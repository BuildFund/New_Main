{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paul-\\\\OneDrive - BARE Capital Ltd\\\\BARE Drive\\\\10.0 BUILDFUND\\\\1.0 Website Dev\\\\GitHub\\\\new_website\\\\src\\\\pages\\\\LenderProfileWizard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport { theme, commonStyles } from '../styles/theme';\nimport Wizard from '../components/Wizard';\nimport Input from '../components/Input';\nimport Textarea from '../components/Textarea';\nimport Button from '../components/Button';\nimport CompanyDetails from '../components/CompanyDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LenderProfileWizard() {\n  _s();\n  const navigate = useNavigate();\n  const [step, setStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [formData, setFormData] = useState({\n    organisation_name: '',\n    company_number: '',\n    fca_registration_number: '',\n    contact_email: '',\n    contact_phone: '',\n    website: '',\n    company_story: '',\n    number_of_employees: '',\n    financial_licences: '',\n    membership_bodies: '',\n    key_personnel: '',\n    risk_compliance_details: ''\n  });\n  const steps = ['Organisation', 'Contact', 'Company Details', 'FCA & Compliance', 'Review'];\n  useEffect(() => {\n    fetchProfile();\n  }, []);\n  const fetchProfile = async () => {\n    try {\n      const res = await api.get('/api/lenders/profiles/');\n      const data = Array.isArray(res.data) ? res.data[0] : res.data;\n      if (data) {\n        setProfile(data);\n        setFormData({\n          organisation_name: data.organisation_name || '',\n          company_number: data.company_number || '',\n          fca_registration_number: data.fca_registration_number || '',\n          contact_email: data.contact_email || '',\n          contact_phone: data.contact_phone || '',\n          website: data.website || '',\n          company_story: data.company_story || '',\n          number_of_employees: data.number_of_employees || '',\n          financial_licences: data.financial_licences || '',\n          membership_bodies: data.membership_bodies || '',\n          key_personnel: data.key_personnel ? JSON.stringify(data.key_personnel, null, 2) : '',\n          risk_compliance_details: data.risk_compliance_details ? JSON.stringify(data.risk_compliance_details, null, 2) : ''\n        });\n      }\n    } catch (err) {\n      var _err$response;\n      console.error(err);\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) !== 404) {\n        setError('Failed to load lender profile');\n      }\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleSaveAndContinue = async () => {\n    setError(null);\n    setMessage(null);\n    if (step < steps.length) {\n      // Auto-save current step\n      try {\n        const payload = buildPayload();\n        if (profile) {\n          await api.put(`/api/lenders/profiles/${profile.id}/`, payload);\n        } else {\n          const response = await api.post('/api/lenders/profiles/', payload);\n          setProfile(response.data);\n        }\n        setStep(step + 1);\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        console.error('Save failed:', err);\n        setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || 'Failed to save profile');\n      }\n    } else {\n      // Final step - complete profile\n      await handleSubmit();\n    }\n  };\n  const handleSubmit = async () => {\n    setLoading(true);\n    setError(null);\n    setMessage(null);\n    try {\n      const payload = buildPayload();\n      if (profile) {\n        await api.put(`/api/lenders/profiles/${profile.id}/`, payload);\n        setMessage('Profile updated successfully');\n      } else {\n        await api.post('/api/lenders/profiles/', payload);\n        setMessage('Profile created successfully');\n      }\n      setTimeout(() => {\n        navigate('/lender/profile');\n      }, 1500);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Submit failed:', err);\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || 'Failed to save profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const buildPayload = () => {\n    let keyPersonnel = [];\n    let riskDetails = {};\n    try {\n      keyPersonnel = formData.key_personnel ? JSON.parse(formData.key_personnel) : [];\n    } catch (err) {\n      // Invalid JSON, use empty array\n    }\n    try {\n      riskDetails = formData.risk_compliance_details ? JSON.parse(formData.risk_compliance_details) : {};\n    } catch (err) {\n      // Invalid JSON, use empty object\n    }\n    return {\n      organisation_name: formData.organisation_name,\n      company_number: formData.company_number,\n      fca_registration_number: formData.fca_registration_number,\n      contact_email: formData.contact_email,\n      contact_phone: formData.contact_phone,\n      website: formData.website,\n      company_story: formData.company_story,\n      number_of_employees: formData.number_of_employees || null,\n      financial_licences: formData.financial_licences,\n      membership_bodies: formData.membership_bodies,\n      key_personnel: keyPersonnel,\n      risk_compliance_details: riskDetails\n    };\n  };\n  const renderStep = () => {\n    switch (step) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: \"Organisation Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              label: \"Organisation Name *\",\n              name: \"organisation_name\",\n              value: formData.organisation_name,\n              onChange: handleChange,\n              required: true,\n              style: {\n                gridColumn: '1 / -1'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Company Number\",\n              name: \"company_number\",\n              value: formData.company_number,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Number of Employees\",\n              type: \"number\",\n              name: \"number_of_employees\",\n              value: formData.number_of_employees,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: \"Contact Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              label: \"Contact Email *\",\n              type: \"email\",\n              name: \"contact_email\",\n              value: formData.contact_email,\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Contact Phone\",\n              name: \"contact_phone\",\n              value: formData.contact_phone,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Website\",\n              type: \"url\",\n              name: \"website\",\n              value: formData.website,\n              onChange: handleChange,\n              placeholder: \"https://example.com\",\n              style: {\n                gridColumn: '1 / -1'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: \"Company Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n            label: \"Company Story\",\n            name: \"company_story\",\n            value: formData.company_story,\n            onChange: handleChange,\n            rows: 4,\n            placeholder: \"Tell us about your organisation...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), formData.company_number && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: theme.spacing.xl\n            },\n            children: /*#__PURE__*/_jsxDEV(CompanyDetails, {\n              companyNumber: formData.company_number\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this);\n      case 4:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: \"FCA Registration & Compliance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"FCA Registration Number\",\n            name: \"fca_registration_number\",\n            value: formData.fca_registration_number,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"Financial Licences\",\n            name: \"financial_licences\",\n            value: formData.financial_licences,\n            onChange: handleChange,\n            placeholder: \"Comma-separated list of licences\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"Membership Bodies\",\n            name: \"membership_bodies\",\n            value: formData.membership_bodies,\n            onChange: handleChange,\n            placeholder: \"Comma-separated list of memberships\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n            label: \"Key Personnel (JSON)\",\n            name: \"key_personnel\",\n            value: formData.key_personnel,\n            onChange: handleChange,\n            rows: 6,\n            placeholder: \"[{\\\"name\\\": \\\"John Doe\\\", \\\"role\\\": \\\"CEO\\\"}]\",\n            helperText: \"Enter valid JSON array format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n            label: \"Risk & Compliance Details (JSON)\",\n            name: \"risk_compliance_details\",\n            value: formData.risk_compliance_details,\n            onChange: handleChange,\n            rows: 6,\n            placeholder: \"{\\\"risk_rating\\\": \\\"low\\\", \\\"compliance_status\\\": \\\"compliant\\\"}\",\n            helperText: \"Enter valid JSON format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this);\n      case 5:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: \"Review Your Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...commonStyles.card,\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: `0 0 ${theme.spacing.md} 0`\n              },\n              children: \"Organisation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 18\n              }, this), \" \", formData.organisation_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Company Number:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 18\n              }, this), \" \", formData.company_number || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Employees:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 18\n              }, this), \" \", formData.number_of_employees || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...commonStyles.card,\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: `0 0 ${theme.spacing.md} 0`\n              },\n              children: \"Contact\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 18\n              }, this), \" \", formData.contact_email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Phone:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 18\n              }, this), \" \", formData.contact_phone || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Website:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 18\n              }, this), \" \", formData.website || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...commonStyles.card,\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: `0 0 ${theme.spacing.md} 0`\n              },\n              children: \"FCA & Compliance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"FCA Registration:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 18\n              }, this), \" \", formData.fca_registration_number || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Financial Licences:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 18\n              }, this), \" \", formData.financial_licences || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Membership Bodies:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 18\n              }, this), \" \", formData.membership_bodies || 'Not provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...commonStyles.container,\n      padding: theme.spacing.xl\n    },\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.errorLight,\n        color: theme.colors.errorDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.successLight,\n        color: theme.colors.successDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Wizard, {\n      steps: steps,\n      currentStep: step,\n      onNext: handleSaveAndContinue,\n      onPrevious: () => setStep(step - 1),\n      onFinish: handleSubmit,\n      loading: loading,\n      canGoNext: step === 1 ? formData.organisation_name : true,\n      children: renderStep()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n}\n_s(LenderProfileWizard, \"qV6FUI6TVLp+ACiwZ2kyTLInd+g=\", false, function () {\n  return [useNavigate];\n});\n_c = LenderProfileWizard;\nexport default LenderProfileWizard;\nvar _c;\n$RefreshReg$(_c, \"LenderProfileWizard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","api","theme","commonStyles","Wizard","Input","Textarea","Button","CompanyDetails","jsxDEV","_jsxDEV","LenderProfileWizard","_s","navigate","step","setStep","loading","setLoading","error","setError","message","setMessage","profile","setProfile","formData","setFormData","organisation_name","company_number","fca_registration_number","contact_email","contact_phone","website","company_story","number_of_employees","financial_licences","membership_bodies","key_personnel","risk_compliance_details","steps","fetchProfile","res","get","data","Array","isArray","JSON","stringify","err","_err$response","console","response","status","handleChange","e","name","value","target","handleSaveAndContinue","length","payload","buildPayload","put","id","post","_err$response2","_err$response2$data","detail","handleSubmit","setTimeout","_err$response3","_err$response3$data","keyPersonnel","riskDetails","parse","renderStep","children","style","marginBottom","spacing","lg","fileName","_jsxFileName","lineNumber","columnNumber","display","gridTemplateColumns","gap","label","onChange","required","gridColumn","type","placeholder","rows","marginTop","xl","companyNumber","helperText","card","margin","md","container","padding","background","colors","errorLight","color","errorDark","borderRadius","successLight","successDark","currentStep","onNext","onPrevious","onFinish","canGoNext","_c","$RefreshReg$"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/LenderProfileWizard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Wizard from '../components/Wizard';\r\nimport Input from '../components/Input';\r\nimport Textarea from '../components/Textarea';\r\nimport Button from '../components/Button';\r\nimport CompanyDetails from '../components/CompanyDetails';\r\n\r\nfunction LenderProfileWizard() {\r\n  const navigate = useNavigate();\r\n  const [step, setStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n  const [profile, setProfile] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    organisation_name: '',\r\n    company_number: '',\r\n    fca_registration_number: '',\r\n    contact_email: '',\r\n    contact_phone: '',\r\n    website: '',\r\n    company_story: '',\r\n    number_of_employees: '',\r\n    financial_licences: '',\r\n    membership_bodies: '',\r\n    key_personnel: '',\r\n    risk_compliance_details: '',\r\n  });\r\n\r\n  const steps = ['Organisation', 'Contact', 'Company Details', 'FCA & Compliance', 'Review'];\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const res = await api.get('/api/lenders/profiles/');\r\n      const data = Array.isArray(res.data) ? res.data[0] : res.data;\r\n      if (data) {\r\n        setProfile(data);\r\n        setFormData({\r\n          organisation_name: data.organisation_name || '',\r\n          company_number: data.company_number || '',\r\n          fca_registration_number: data.fca_registration_number || '',\r\n          contact_email: data.contact_email || '',\r\n          contact_phone: data.contact_phone || '',\r\n          website: data.website || '',\r\n          company_story: data.company_story || '',\r\n          number_of_employees: data.number_of_employees || '',\r\n          financial_licences: data.financial_licences || '',\r\n          membership_bodies: data.membership_bodies || '',\r\n          key_personnel: data.key_personnel\r\n            ? JSON.stringify(data.key_personnel, null, 2)\r\n            : '',\r\n          risk_compliance_details: data.risk_compliance_details\r\n            ? JSON.stringify(data.risk_compliance_details, null, 2)\r\n            : '',\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      if (err.response?.status !== 404) {\r\n        setError('Failed to load lender profile');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSaveAndContinue = async () => {\r\n    setError(null);\r\n    setMessage(null);\r\n\r\n    if (step < steps.length) {\r\n      // Auto-save current step\r\n      try {\r\n        const payload = buildPayload();\r\n        if (profile) {\r\n          await api.put(`/api/lenders/profiles/${profile.id}/`, payload);\r\n        } else {\r\n          const response = await api.post('/api/lenders/profiles/', payload);\r\n          setProfile(response.data);\r\n        }\r\n        setStep(step + 1);\r\n      } catch (err) {\r\n        console.error('Save failed:', err);\r\n        setError(err.response?.data?.detail || 'Failed to save profile');\r\n      }\r\n    } else {\r\n      // Final step - complete profile\r\n      await handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setMessage(null);\r\n\r\n    try {\r\n      const payload = buildPayload();\r\n      if (profile) {\r\n        await api.put(`/api/lenders/profiles/${profile.id}/`, payload);\r\n        setMessage('Profile updated successfully');\r\n      } else {\r\n        await api.post('/api/lenders/profiles/', payload);\r\n        setMessage('Profile created successfully');\r\n      }\r\n      setTimeout(() => {\r\n        navigate('/lender/profile');\r\n      }, 1500);\r\n    } catch (err) {\r\n      console.error('Submit failed:', err);\r\n      setError(err.response?.data?.detail || 'Failed to save profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const buildPayload = () => {\r\n    let keyPersonnel = [];\r\n    let riskDetails = {};\r\n    try {\r\n      keyPersonnel = formData.key_personnel ? JSON.parse(formData.key_personnel) : [];\r\n    } catch (err) {\r\n      // Invalid JSON, use empty array\r\n    }\r\n    try {\r\n      riskDetails = formData.risk_compliance_details ? JSON.parse(formData.risk_compliance_details) : {};\r\n    } catch (err) {\r\n      // Invalid JSON, use empty object\r\n    }\r\n\r\n    return {\r\n      organisation_name: formData.organisation_name,\r\n      company_number: formData.company_number,\r\n      fca_registration_number: formData.fca_registration_number,\r\n      contact_email: formData.contact_email,\r\n      contact_phone: formData.contact_phone,\r\n      website: formData.website,\r\n      company_story: formData.company_story,\r\n      number_of_employees: formData.number_of_employees || null,\r\n      financial_licences: formData.financial_licences,\r\n      membership_bodies: formData.membership_bodies,\r\n      key_personnel: keyPersonnel,\r\n      risk_compliance_details: riskDetails,\r\n    };\r\n  };\r\n\r\n  const renderStep = () => {\r\n    switch (step) {\r\n      case 1:\r\n        return (\r\n          <div>\r\n            <h2 style={{ marginBottom: theme.spacing.lg }}>Organisation Details</h2>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.lg }}>\r\n              <Input\r\n                label=\"Organisation Name *\"\r\n                name=\"organisation_name\"\r\n                value={formData.organisation_name}\r\n                onChange={handleChange}\r\n                required\r\n                style={{ gridColumn: '1 / -1' }}\r\n              />\r\n              <Input\r\n                label=\"Company Number\"\r\n                name=\"company_number\"\r\n                value={formData.company_number}\r\n                onChange={handleChange}\r\n              />\r\n              <Input\r\n                label=\"Number of Employees\"\r\n                type=\"number\"\r\n                name=\"number_of_employees\"\r\n                value={formData.number_of_employees}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 2:\r\n        return (\r\n          <div>\r\n            <h2 style={{ marginBottom: theme.spacing.lg }}>Contact Information</h2>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.lg }}>\r\n              <Input\r\n                label=\"Contact Email *\"\r\n                type=\"email\"\r\n                name=\"contact_email\"\r\n                value={formData.contact_email}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n              <Input\r\n                label=\"Contact Phone\"\r\n                name=\"contact_phone\"\r\n                value={formData.contact_phone}\r\n                onChange={handleChange}\r\n              />\r\n              <Input\r\n                label=\"Website\"\r\n                type=\"url\"\r\n                name=\"website\"\r\n                value={formData.website}\r\n                onChange={handleChange}\r\n                placeholder=\"https://example.com\"\r\n                style={{ gridColumn: '1 / -1' }}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 3:\r\n        return (\r\n          <div>\r\n            <h2 style={{ marginBottom: theme.spacing.lg }}>Company Information</h2>\r\n            <Textarea\r\n              label=\"Company Story\"\r\n              name=\"company_story\"\r\n              value={formData.company_story}\r\n              onChange={handleChange}\r\n              rows={4}\r\n              placeholder=\"Tell us about your organisation...\"\r\n            />\r\n            \r\n            {formData.company_number && (\r\n              <div style={{ marginTop: theme.spacing.xl }}>\r\n                <CompanyDetails companyNumber={formData.company_number} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 4:\r\n        return (\r\n          <div>\r\n            <h2 style={{ marginBottom: theme.spacing.lg }}>FCA Registration & Compliance</h2>\r\n            <Input\r\n              label=\"FCA Registration Number\"\r\n              name=\"fca_registration_number\"\r\n              value={formData.fca_registration_number}\r\n              onChange={handleChange}\r\n            />\r\n            <Input\r\n              label=\"Financial Licences\"\r\n              name=\"financial_licences\"\r\n              value={formData.financial_licences}\r\n              onChange={handleChange}\r\n              placeholder=\"Comma-separated list of licences\"\r\n            />\r\n            <Input\r\n              label=\"Membership Bodies\"\r\n              name=\"membership_bodies\"\r\n              value={formData.membership_bodies}\r\n              onChange={handleChange}\r\n              placeholder=\"Comma-separated list of memberships\"\r\n            />\r\n            <Textarea\r\n              label=\"Key Personnel (JSON)\"\r\n              name=\"key_personnel\"\r\n              value={formData.key_personnel}\r\n              onChange={handleChange}\r\n              rows={6}\r\n              placeholder='[{\"name\": \"John Doe\", \"role\": \"CEO\"}]'\r\n              helperText=\"Enter valid JSON array format\"\r\n            />\r\n            <Textarea\r\n              label=\"Risk & Compliance Details (JSON)\"\r\n              name=\"risk_compliance_details\"\r\n              value={formData.risk_compliance_details}\r\n              onChange={handleChange}\r\n              rows={6}\r\n              placeholder='{\"risk_rating\": \"low\", \"compliance_status\": \"compliant\"}'\r\n              helperText=\"Enter valid JSON format\"\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case 5:\r\n        return (\r\n          <div>\r\n            <h2 style={{ marginBottom: theme.spacing.lg }}>Review Your Information</h2>\r\n            <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Organisation</h3>\r\n              <p><strong>Name:</strong> {formData.organisation_name}</p>\r\n              <p><strong>Company Number:</strong> {formData.company_number || 'Not provided'}</p>\r\n              <p><strong>Employees:</strong> {formData.number_of_employees || 'Not provided'}</p>\r\n            </div>\r\n            <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Contact</h3>\r\n              <p><strong>Email:</strong> {formData.contact_email}</p>\r\n              <p><strong>Phone:</strong> {formData.contact_phone || 'Not provided'}</p>\r\n              <p><strong>Website:</strong> {formData.website || 'Not provided'}</p>\r\n            </div>\r\n            <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>FCA & Compliance</h3>\r\n              <p><strong>FCA Registration:</strong> {formData.fca_registration_number || 'Not provided'}</p>\r\n              <p><strong>Financial Licences:</strong> {formData.financial_licences || 'Not provided'}</p>\r\n              <p><strong>Membership Bodies:</strong> {formData.membership_bodies || 'Not provided'}</p>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...commonStyles.container, padding: theme.spacing.xl }}>\r\n      {error && (\r\n        <div style={{\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n      {message && (\r\n        <div style={{\r\n          background: theme.colors.successLight,\r\n          color: theme.colors.successDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n        }}>\r\n          {message}\r\n        </div>\r\n      )}\r\n      <Wizard\r\n        steps={steps}\r\n        currentStep={step}\r\n        onNext={handleSaveAndContinue}\r\n        onPrevious={() => setStep(step - 1)}\r\n        onFinish={handleSubmit}\r\n        loading={loading}\r\n        canGoNext={step === 1 ? formData.organisation_name : true}\r\n      >\r\n        {renderStep()}\r\n      </Wizard>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LenderProfileWizard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}