{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\BuildFund\\\\1.0 Website Dev\\\\GitHub\\\\new_website\\\\src\\\\components\\\\Chatbot.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../api';\nimport { theme, commonStyles } from '../styles/theme';\nimport Button from './Button';\nimport Input from './Input';\nimport Badge from './Badge';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Chatbot({\n  onComplete,\n  onClose\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const [progress, setProgress] = useState({\n    completion_percentage: 0\n  });\n  const [inputValue, setInputValue] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [dragActive, setDragActive] = useState(false);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    startConversation();\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  async function startConversation() {\n    setLoading(true);\n    try {\n      const res = await api.get('/api/onboarding/chat/');\n      setSessionId(res.data.session_id);\n      setCurrentQuestion(res.data.question);\n      setProgress(res.data.progress);\n\n      // Use conversation history from backend (includes welcome back message if resuming)\n      if (res.data.conversation_history && res.data.conversation_history.length > 0) {\n        var _res$data$question;\n        const messages = [...res.data.conversation_history];\n        const isResuming = res.data.is_resuming;\n\n        // If resuming, ensure the current question is shown (it might not be in history yet)\n        if (isResuming && (_res$data$question = res.data.question) !== null && _res$data$question !== void 0 && _res$data$question.question) {\n          // Check if the last bot message is the current question\n          const lastBotMessage = [...messages].reverse().find(msg => msg.type === 'bot');\n          const questionAlreadyShown = lastBotMessage && lastBotMessage.message === res.data.question.question;\n          if (!questionAlreadyShown) {\n            // Add the current question as the latest bot message so user knows what to answer\n            messages.push({\n              type: 'bot',\n              message: res.data.question.question,\n              timestamp: new Date().toISOString()\n            });\n          }\n        }\n        setMessages(messages);\n      } else {\n        var _res$data$question2;\n        // New conversation - add welcome message\n        setMessages([{\n          type: 'bot',\n          message: ((_res$data$question2 = res.data.question) === null || _res$data$question2 === void 0 ? void 0 : _res$data$question2.question) || 'Welcome! Let\\'s get started.',\n          timestamp: new Date().toISOString()\n        }]);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error('Failed to start conversation:', err);\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || err.message || 'Failed to start conversation. Please try again.';\n      setMessages([{\n        type: 'bot',\n        message: `Sorry, I encountered an error: ${errorMessage}. Please refresh the page and try again.`,\n        timestamp: new Date().toISOString()\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function sendMessage(message, step = null) {\n    if (!message.trim() && !step) return;\n\n    // Add user message to chat\n    const userMessage = {\n      type: 'user',\n      message: message || (step === 'file_upload' ? 'Files uploaded' : ''),\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    try {\n      var _res$data$question3, _res$data$progress;\n      const res = await api.post('/api/onboarding/chat/', {\n        message: message || '',\n        step: step || (currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.step),\n        session_id: sessionId\n      });\n      setCurrentQuestion(res.data.question);\n      setProgress(res.data.progress);\n\n      // Add bot response with progress indicator\n      if ((_res$data$question3 = res.data.question) !== null && _res$data$question3 !== void 0 && _res$data$question3.question) {\n        const questionText = res.data.question.question;\n        const progressInfo = res.data.question.progress !== undefined ? `\\n\\nðŸ“Š Progress: ${res.data.question.progress}% complete (Step ${res.data.question.step_number || ''} of ${res.data.question.total_steps || ''})` : '';\n        setMessages(prev => [...prev, {\n          type: 'bot',\n          message: questionText + progressInfo,\n          timestamp: new Date().toISOString()\n        }]);\n      }\n\n      // Check if complete\n      if ((_res$data$progress = res.data.progress) !== null && _res$data$progress !== void 0 && _res$data$progress.is_complete) {\n        setTimeout(() => {\n          if (onComplete) onComplete();\n        }, 2000);\n      }\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n      console.error('Failed to send message:', err);\n      const errorMessage = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.detail) || err.message || 'An error occurred';\n      setMessages(prev => [...prev, {\n        type: 'bot',\n        message: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\n        timestamp: new Date().toISOString()\n      }]);\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (!inputValue.trim() && (currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.type) !== 'file') return;\n    sendMessage(inputValue);\n    setInputValue('');\n  }\n  function handleOptionSelect(option) {\n    sendMessage(option);\n  }\n  function handleFileUpload(files) {\n    if (!files || files.length === 0) return;\n    setUploading(true);\n    const formData = new FormData();\n    Array.from(files).forEach(file => {\n      formData.append('files', file);\n    });\n\n    // Upload files to onboarding documents API\n    api.post('/api/onboarding/upload_documents/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      var _res$data$documents;\n      const uploadedCount = ((_res$data$documents = res.data.documents) === null || _res$data$documents === void 0 ? void 0 : _res$data$documents.length) || files.length;\n      const docStatus = res.data.document_status;\n\n      // Add success message\n      setMessages(prev => [...prev, {\n        type: 'user',\n        message: `Uploaded ${uploadedCount} file(s)`,\n        timestamp: new Date().toISOString()\n      }]);\n\n      // Check if all documents are uploaded\n      if (docStatus && docStatus.all_uploaded) {\n        setMessages(prev => [...prev, {\n          type: 'bot',\n          message: 'âœ… Excellent! All required documents have been uploaded. You can now proceed to review your application.',\n          timestamp: new Date().toISOString()\n        }]);\n        // Refresh to get updated question\n        setTimeout(() => {\n          sendMessage('All documents uploaded', currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.step);\n        }, 1000);\n      } else {\n        var _docStatus$missing_do;\n        // Still missing documents\n        const missingCount = (docStatus === null || docStatus === void 0 ? void 0 : (_docStatus$missing_do = docStatus.missing_documents) === null || _docStatus$missing_do === void 0 ? void 0 : _docStatus$missing_do.length) || 0;\n        setMessages(prev => [...prev, {\n          type: 'bot',\n          message: `âœ… Files uploaded successfully! However, you still need to upload ${missingCount} more required document(s). Please continue uploading the remaining documents.`,\n          timestamp: new Date().toISOString()\n        }]);\n        // Refresh to get updated question showing what's still needed\n        setTimeout(() => {\n          sendMessage('Continue', currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.step);\n        }, 1000);\n      }\n      setUploading(false);\n    }).catch(err => {\n      var _err$response5, _err$response5$data, _err$response6, _err$response6$data;\n      console.error('File upload failed:', err);\n      const errorMessage = ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || ((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.detail) || err.message || 'File upload failed';\n      setMessages(prev => [...prev, {\n        type: 'bot',\n        message: `Sorry, file upload failed: ${errorMessage}. Please try again.`,\n        timestamp: new Date().toISOString()\n      }]);\n      setUploading(false);\n    });\n  }\n  function handleDrag(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  }\n  function handleDrop(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFileUpload(e.dataTransfer.files);\n    }\n  }\n  function scrollToBottom() {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }\n  const questionType = currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.type;\n  const showFileUpload = questionType === 'file';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      bottom: '20px',\n      right: '20px',\n      width: '400px',\n      maxHeight: '600px',\n      background: theme.colors.white,\n      borderRadius: theme.borderRadius.lg,\n      boxShadow: theme.shadows.xl,\n      display: 'flex',\n      flexDirection: 'column',\n      zIndex: 1000,\n      border: `1px solid ${theme.colors.gray200}`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: theme.spacing.md,\n        borderBottom: `1px solid ${theme.colors.gray200}`,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        background: theme.colors.primary,\n        color: theme.colors.white,\n        borderRadius: `${theme.borderRadius.lg} ${theme.borderRadius.lg} 0 0`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0,\n            fontSize: theme.typography.fontSize.lg\n          },\n          children: \"BuildFund Assistant \\uD83E\\uDD16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), progress.completion_percentage > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: theme.typography.fontSize.xs,\n            marginTop: theme.spacing.xs\n          },\n          children: [progress.completion_percentage, \"% Complete\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          background: 'transparent',\n          border: 'none',\n          color: theme.colors.white,\n          fontSize: '20px',\n          cursor: 'pointer',\n          padding: theme.spacing.xs\n        },\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), progress.completion_percentage > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '4px',\n        background: theme.colors.gray200,\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '100%',\n          background: theme.colors.primary,\n          width: `${progress.completion_percentage}%`,\n          transition: 'width 0.3s ease'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: theme.spacing.md,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing.md,\n        minHeight: '300px',\n        maxHeight: '400px'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          color: theme.colors.textSecondary\n        },\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: msg.type === 'user' ? 'flex-end' : 'flex-start'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxWidth: '80%',\n              padding: theme.spacing.sm,\n              borderRadius: theme.borderRadius.md,\n              background: msg.type === 'user' ? theme.colors.primary : theme.colors.gray100,\n              color: msg.type === 'user' ? theme.colors.white : theme.colors.textPrimary,\n              fontSize: theme.typography.fontSize.sm\n            },\n            children: msg.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), showFileUpload && /*#__PURE__*/_jsxDEV(\"div\", {\n      onDragEnter: handleDrag,\n      onDragLeave: handleDrag,\n      onDragOver: handleDrag,\n      onDrop: handleDrop,\n      style: {\n        margin: theme.spacing.md,\n        padding: theme.spacing.lg,\n        border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\n        borderRadius: theme.borderRadius.md,\n        textAlign: 'center',\n        background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\n        cursor: 'pointer',\n        transition: `all ${theme.transitions.fast}`\n      },\n      onClick: () => {\n        var _fileInputRef$current;\n        return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        style: {\n          display: 'none'\n        },\n        onChange: e => handleFileUpload(e.target.files)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '24px',\n          marginBottom: theme.spacing.sm\n        },\n        children: \"\\uD83D\\uDCCE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: theme.colors.textSecondary,\n          fontSize: theme.typography.fontSize.sm\n        },\n        children: \"Drag and drop files here or click to browse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }, this), !showFileUpload && currentQuestion && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: theme.spacing.md,\n        borderTop: `1px solid ${theme.colors.gray200}`\n      },\n      children: currentQuestion.type === 'select' && currentQuestion.options ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: theme.spacing.xs\n        },\n        children: currentQuestion.options.map((option, idx) => /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          size: \"sm\",\n          onClick: () => handleOptionSelect(option),\n          style: {\n            width: '100%',\n            textAlign: 'left'\n          },\n          children: option\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: theme.spacing.sm\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: currentQuestion.type === 'date' ? 'date' : currentQuestion.type === 'number' ? 'number' : 'text',\n            value: inputValue,\n            onChange: e => setInputValue(e.target.value),\n            placeholder: currentQuestion.type === 'date' ? 'DD/MM/YYYY' : 'Type your answer...',\n            style: {\n              flex: 1,\n              padding: theme.spacing.sm,\n              border: `1px solid ${theme.colors.gray300}`,\n              borderRadius: theme.borderRadius.md,\n              fontSize: theme.typography.fontSize.sm\n            },\n            required: currentQuestion.required\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"primary\",\n            size: \"sm\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: theme.spacing.sm,\n        textAlign: 'center',\n        color: theme.colors.textSecondary,\n        fontSize: theme.typography.fontSize.sm\n      },\n      children: \"Uploading files...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n}\n_s(Chatbot, \"4n43yDoEGkqLdCSwRHfCfYqYL1A=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","theme","commonStyles","Button","Input","Badge","jsxDEV","_jsxDEV","Fragment","_Fragment","Chatbot","onComplete","onClose","_s","messages","setMessages","currentQuestion","setCurrentQuestion","sessionId","setSessionId","progress","setProgress","completion_percentage","inputValue","setInputValue","loading","setLoading","uploading","setUploading","dragActive","setDragActive","messagesEndRef","fileInputRef","startConversation","scrollToBottom","res","get","data","session_id","question","conversation_history","length","_res$data$question","isResuming","is_resuming","lastBotMessage","reverse","find","msg","type","questionAlreadyShown","message","push","timestamp","Date","toISOString","_res$data$question2","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","error","errorMessage","response","detail","sendMessage","step","trim","userMessage","prev","_res$data$question3","_res$data$progress","post","questionText","progressInfo","undefined","step_number","total_steps","is_complete","setTimeout","_err$response3","_err$response3$data","_err$response4","_err$response4$data","handleSubmit","e","preventDefault","handleOptionSelect","option","handleFileUpload","files","formData","FormData","Array","from","forEach","file","append","headers","then","_res$data$documents","uploadedCount","documents","docStatus","document_status","all_uploaded","_docStatus$missing_do","missingCount","missing_documents","catch","_err$response5","_err$response5$data","_err$response6","_err$response6$data","handleDrag","stopPropagation","handleDrop","dataTransfer","_messagesEndRef$curre","current","scrollIntoView","behavior","questionType","showFileUpload","style","position","bottom","right","width","maxHeight","background","colors","white","borderRadius","lg","boxShadow","shadows","xl","display","flexDirection","zIndex","border","gray200","children","padding","spacing","md","borderBottom","justifyContent","alignItems","primary","color","margin","fontSize","typography","fileName","_jsxFileName","lineNumber","columnNumber","xs","marginTop","onClick","cursor","height","transition","flex","overflowY","gap","minHeight","textAlign","textSecondary","map","idx","maxWidth","sm","gray100","textPrimary","ref","onDragEnter","onDragLeave","onDragOver","onDrop","gray300","primaryLight","gray50","transitions","fast","_fileInputRef$current","click","multiple","onChange","target","marginBottom","borderTop","options","variant","size","onSubmit","value","placeholder","required","_c","$RefreshReg$"],"sources":["C:/dev/BuildFund/1.0 Website Dev/GitHub/new_website/src/components/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Button from './Button';\r\nimport Input from './Input';\r\nimport Badge from './Badge';\r\n\r\nfunction Chatbot({ onComplete, onClose }) {\r\n  const [messages, setMessages] = useState([]);\r\n  const [currentQuestion, setCurrentQuestion] = useState(null);\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [progress, setProgress] = useState({ completion_percentage: 0 });\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    startConversation();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  async function startConversation() {\r\n    setLoading(true);\r\n    try {\r\n      const res = await api.get('/api/onboarding/chat/');\r\n      setSessionId(res.data.session_id);\r\n      setCurrentQuestion(res.data.question);\r\n      setProgress(res.data.progress);\r\n      \r\n      // Use conversation history from backend (includes welcome back message if resuming)\r\n      if (res.data.conversation_history && res.data.conversation_history.length > 0) {\r\n        const messages = [...res.data.conversation_history];\r\n        const isResuming = res.data.is_resuming;\r\n        \r\n        // If resuming, ensure the current question is shown (it might not be in history yet)\r\n        if (isResuming && res.data.question?.question) {\r\n          // Check if the last bot message is the current question\r\n          const lastBotMessage = [...messages].reverse().find(msg => msg.type === 'bot');\r\n          const questionAlreadyShown = lastBotMessage && lastBotMessage.message === res.data.question.question;\r\n          \r\n          if (!questionAlreadyShown) {\r\n            // Add the current question as the latest bot message so user knows what to answer\r\n            messages.push({\r\n              type: 'bot',\r\n              message: res.data.question.question,\r\n              timestamp: new Date().toISOString(),\r\n            });\r\n          }\r\n        }\r\n        \r\n        setMessages(messages);\r\n      } else {\r\n        // New conversation - add welcome message\r\n        setMessages([{\r\n          type: 'bot',\r\n          message: res.data.question?.question || 'Welcome! Let\\'s get started.',\r\n          timestamp: new Date().toISOString(),\r\n        }]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to start conversation:', err);\r\n      const errorMessage = err.response?.data?.error || err.response?.data?.detail || err.message || 'Failed to start conversation. Please try again.';\r\n      setMessages([{\r\n        type: 'bot',\r\n        message: `Sorry, I encountered an error: ${errorMessage}. Please refresh the page and try again.`,\r\n        timestamp: new Date().toISOString(),\r\n      }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function sendMessage(message, step = null) {\r\n    if (!message.trim() && !step) return;\r\n\r\n    // Add user message to chat\r\n    const userMessage = {\r\n      type: 'user',\r\n      message: message || (step === 'file_upload' ? 'Files uploaded' : ''),\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n    setMessages(prev => [...prev, userMessage]);\r\n\r\n    try {\r\n      const res = await api.post('/api/onboarding/chat/', {\r\n        message: message || '',\r\n        step: step || currentQuestion?.step,\r\n        session_id: sessionId,\r\n      });\r\n\r\n      setCurrentQuestion(res.data.question);\r\n      setProgress(res.data.progress);\r\n      \r\n      // Add bot response with progress indicator\r\n      if (res.data.question?.question) {\r\n        const questionText = res.data.question.question;\r\n        const progressInfo = res.data.question.progress !== undefined \r\n          ? `\\n\\nðŸ“Š Progress: ${res.data.question.progress}% complete (Step ${res.data.question.step_number || ''} of ${res.data.question.total_steps || ''})`\r\n          : '';\r\n        \r\n        setMessages(prev => [...prev, {\r\n          type: 'bot',\r\n          message: questionText + progressInfo,\r\n          timestamp: new Date().toISOString(),\r\n        }]);\r\n      }\r\n\r\n      // Check if complete\r\n      if (res.data.progress?.is_complete) {\r\n        setTimeout(() => {\r\n          if (onComplete) onComplete();\r\n        }, 2000);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to send message:', err);\r\n      const errorMessage = err.response?.data?.error || err.response?.data?.detail || err.message || 'An error occurred';\r\n      setMessages(prev => [...prev, {\r\n        type: 'bot',\r\n        message: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\r\n        timestamp: new Date().toISOString(),\r\n      }]);\r\n    }\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!inputValue.trim() && currentQuestion?.type !== 'file') return;\r\n    \r\n    sendMessage(inputValue);\r\n    setInputValue('');\r\n  }\r\n\r\n  function handleOptionSelect(option) {\r\n    sendMessage(option);\r\n  }\r\n\r\n  function handleFileUpload(files) {\r\n    if (!files || files.length === 0) return;\r\n\r\n    setUploading(true);\r\n    const formData = new FormData();\r\n    Array.from(files).forEach(file => {\r\n      formData.append('files', file);\r\n    });\r\n\r\n    // Upload files to onboarding documents API\r\n    api.post('/api/onboarding/upload_documents/', formData, {\r\n      headers: { \r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const uploadedCount = res.data.documents?.length || files.length;\r\n        const docStatus = res.data.document_status;\r\n        \r\n        // Add success message\r\n        setMessages(prev => [...prev, {\r\n          type: 'user',\r\n          message: `Uploaded ${uploadedCount} file(s)`,\r\n          timestamp: new Date().toISOString(),\r\n        }]);\r\n        \r\n        // Check if all documents are uploaded\r\n        if (docStatus && docStatus.all_uploaded) {\r\n          setMessages(prev => [...prev, {\r\n            type: 'bot',\r\n            message: 'âœ… Excellent! All required documents have been uploaded. You can now proceed to review your application.',\r\n            timestamp: new Date().toISOString(),\r\n          }]);\r\n          // Refresh to get updated question\r\n          setTimeout(() => {\r\n            sendMessage('All documents uploaded', currentQuestion?.step);\r\n          }, 1000);\r\n        } else {\r\n          // Still missing documents\r\n          const missingCount = docStatus?.missing_documents?.length || 0;\r\n          setMessages(prev => [...prev, {\r\n            type: 'bot',\r\n            message: `âœ… Files uploaded successfully! However, you still need to upload ${missingCount} more required document(s). Please continue uploading the remaining documents.`,\r\n            timestamp: new Date().toISOString(),\r\n          }]);\r\n          // Refresh to get updated question showing what's still needed\r\n          setTimeout(() => {\r\n            sendMessage('Continue', currentQuestion?.step);\r\n          }, 1000);\r\n        }\r\n        \r\n        setUploading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error('File upload failed:', err);\r\n        const errorMessage = err.response?.data?.error || err.response?.data?.detail || err.message || 'File upload failed';\r\n        setMessages(prev => [...prev, {\r\n          type: 'bot',\r\n          message: `Sorry, file upload failed: ${errorMessage}. Please try again.`,\r\n          timestamp: new Date().toISOString(),\r\n        }]);\r\n        setUploading(false);\r\n      });\r\n  }\r\n\r\n  function handleDrag(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === 'dragenter' || e.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  }\r\n\r\n  function handleDrop(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      handleFileUpload(e.dataTransfer.files);\r\n    }\r\n  }\r\n\r\n  function scrollToBottom() {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n\r\n  const questionType = currentQuestion?.type;\r\n  const showFileUpload = questionType === 'file';\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      bottom: '20px',\r\n      right: '20px',\r\n      width: '400px',\r\n      maxHeight: '600px',\r\n      background: theme.colors.white,\r\n      borderRadius: theme.borderRadius.lg,\r\n      boxShadow: theme.shadows.xl,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      zIndex: 1000,\r\n      border: `1px solid ${theme.colors.gray200}`,\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        padding: theme.spacing.md,\r\n        borderBottom: `1px solid ${theme.colors.gray200}`,\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        background: theme.colors.primary,\r\n        color: theme.colors.white,\r\n        borderRadius: `${theme.borderRadius.lg} ${theme.borderRadius.lg} 0 0`,\r\n      }}>\r\n        <div>\r\n          <h3 style={{ margin: 0, fontSize: theme.typography.fontSize.lg }}>\r\n            BuildFund Assistant ðŸ¤–\r\n          </h3>\r\n          {progress.completion_percentage > 0 && (\r\n            <div style={{ fontSize: theme.typography.fontSize.xs, marginTop: theme.spacing.xs }}>\r\n              {progress.completion_percentage}% Complete\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={onClose}\r\n          style={{\r\n            background: 'transparent',\r\n            border: 'none',\r\n            color: theme.colors.white,\r\n            fontSize: '20px',\r\n            cursor: 'pointer',\r\n            padding: theme.spacing.xs,\r\n          }}\r\n        >\r\n          Ã—\r\n        </button>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      {progress.completion_percentage > 0 && (\r\n        <div style={{\r\n          height: '4px',\r\n          background: theme.colors.gray200,\r\n          width: '100%',\r\n        }}>\r\n          <div style={{\r\n            height: '100%',\r\n            background: theme.colors.primary,\r\n            width: `${progress.completion_percentage}%`,\r\n            transition: 'width 0.3s ease',\r\n          }} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Messages */}\r\n      <div style={{\r\n        flex: 1,\r\n        overflowY: 'auto',\r\n        padding: theme.spacing.md,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: theme.spacing.md,\r\n        minHeight: '300px',\r\n        maxHeight: '400px',\r\n      }}>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center', color: theme.colors.textSecondary }}>\r\n            Loading...\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {messages.map((msg, idx) => (\r\n              <div\r\n                key={idx}\r\n                style={{\r\n                  display: 'flex',\r\n                  justifyContent: msg.type === 'user' ? 'flex-end' : 'flex-start',\r\n                }}\r\n              >\r\n                <div style={{\r\n                  maxWidth: '80%',\r\n                  padding: theme.spacing.sm,\r\n                  borderRadius: theme.borderRadius.md,\r\n                  background: msg.type === 'user'\r\n                    ? theme.colors.primary\r\n                    : theme.colors.gray100,\r\n                  color: msg.type === 'user'\r\n                    ? theme.colors.white\r\n                    : theme.colors.textPrimary,\r\n                  fontSize: theme.typography.fontSize.sm,\r\n                }}>\r\n                  {msg.message}\r\n                </div>\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* File Upload Area */}\r\n      {showFileUpload && (\r\n        <div\r\n          onDragEnter={handleDrag}\r\n          onDragLeave={handleDrag}\r\n          onDragOver={handleDrag}\r\n          onDrop={handleDrop}\r\n          style={{\r\n            margin: theme.spacing.md,\r\n            padding: theme.spacing.lg,\r\n            border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n            borderRadius: theme.borderRadius.md,\r\n            textAlign: 'center',\r\n            background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n            cursor: 'pointer',\r\n            transition: `all ${theme.transitions.fast}`,\r\n          }}\r\n          onClick={() => fileInputRef.current?.click()}\r\n        >\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            multiple\r\n            style={{ display: 'none' }}\r\n            onChange={(e) => handleFileUpload(e.target.files)}\r\n          />\r\n          <div style={{ fontSize: '24px', marginBottom: theme.spacing.sm }}>ðŸ“Ž</div>\r\n          <div style={{ color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n            Drag and drop files here or click to browse\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Input Area */}\r\n      {!showFileUpload && currentQuestion && (\r\n        <div style={{\r\n          padding: theme.spacing.md,\r\n          borderTop: `1px solid ${theme.colors.gray200}`,\r\n        }}>\r\n          {currentQuestion.type === 'select' && currentQuestion.options ? (\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.xs }}>\r\n              {currentQuestion.options.map((option, idx) => (\r\n                <Button\r\n                  key={idx}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleOptionSelect(option)}\r\n                  style={{ width: '100%', textAlign: 'left' }}\r\n                >\r\n                  {option}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={{ display: 'flex', gap: theme.spacing.sm }}>\r\n                <input\r\n                  type={currentQuestion.type === 'date' ? 'date' : currentQuestion.type === 'number' ? 'number' : 'text'}\r\n                  value={inputValue}\r\n                  onChange={(e) => setInputValue(e.target.value)}\r\n                  placeholder={currentQuestion.type === 'date' ? 'DD/MM/YYYY' : 'Type your answer...'}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: theme.spacing.sm,\r\n                    border: `1px solid ${theme.colors.gray300}`,\r\n                    borderRadius: theme.borderRadius.md,\r\n                    fontSize: theme.typography.fontSize.sm,\r\n                  }}\r\n                  required={currentQuestion.required}\r\n                />\r\n                <Button type=\"submit\" variant=\"primary\" size=\"sm\">\r\n                  Send\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {uploading && (\r\n        <div style={{\r\n          padding: theme.spacing.sm,\r\n          textAlign: 'center',\r\n          color: theme.colors.textSecondary,\r\n          fontSize: theme.typography.fontSize.sm,\r\n        }}>\r\n          Uploading files...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chatbot;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,GAAG,MAAM,QAAQ;AACxB,SAASC,KAAK,EAAEC,YAAY,QAAQ,iBAAiB;AACrD,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,KAAK,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5B,SAASC,OAAOA,CAAC;EAAEC,UAAU;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACmB,eAAe,EAAEC,kBAAkB,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACqB,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACuB,QAAQ,EAAEC,WAAW,CAAC,GAAGxB,QAAQ,CAAC;IAAEyB,qBAAqB,EAAE;EAAE,CAAC,CAAC;EACtE,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC4B,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC8B,SAAS,EAAEC,YAAY,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMkC,cAAc,GAAGhC,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMiC,YAAY,GAAGjC,MAAM,CAAC,IAAI,CAAC;EAEjCD,SAAS,CAAC,MAAM;IACdmC,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAENnC,SAAS,CAAC,MAAM;IACdoC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACpB,QAAQ,CAAC,CAAC;EAEd,eAAemB,iBAAiBA,CAAA,EAAG;IACjCP,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMS,GAAG,GAAG,MAAMnC,GAAG,CAACoC,GAAG,CAAC,uBAAuB,CAAC;MAClDjB,YAAY,CAACgB,GAAG,CAACE,IAAI,CAACC,UAAU,CAAC;MACjCrB,kBAAkB,CAACkB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAAC;MACrClB,WAAW,CAACc,GAAG,CAACE,IAAI,CAACjB,QAAQ,CAAC;;MAE9B;MACA,IAAIe,GAAG,CAACE,IAAI,CAACG,oBAAoB,IAAIL,GAAG,CAACE,IAAI,CAACG,oBAAoB,CAACC,MAAM,GAAG,CAAC,EAAE;QAAA,IAAAC,kBAAA;QAC7E,MAAM5B,QAAQ,GAAG,CAAC,GAAGqB,GAAG,CAACE,IAAI,CAACG,oBAAoB,CAAC;QACnD,MAAMG,UAAU,GAAGR,GAAG,CAACE,IAAI,CAACO,WAAW;;QAEvC;QACA,IAAID,UAAU,KAAAD,kBAAA,GAAIP,GAAG,CAACE,IAAI,CAACE,QAAQ,cAAAG,kBAAA,eAAjBA,kBAAA,CAAmBH,QAAQ,EAAE;UAC7C;UACA,MAAMM,cAAc,GAAG,CAAC,GAAG/B,QAAQ,CAAC,CAACgC,OAAO,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,KAAK,KAAK,CAAC;UAC9E,MAAMC,oBAAoB,GAAGL,cAAc,IAAIA,cAAc,CAACM,OAAO,KAAKhB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACA,QAAQ;UAEpG,IAAI,CAACW,oBAAoB,EAAE;YACzB;YACApC,QAAQ,CAACsC,IAAI,CAAC;cACZH,IAAI,EAAE,KAAK;cACXE,OAAO,EAAEhB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACA,QAAQ;cACnCc,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;YACpC,CAAC,CAAC;UACJ;QACF;QAEAxC,WAAW,CAACD,QAAQ,CAAC;MACvB,CAAC,MAAM;QAAA,IAAA0C,mBAAA;QACL;QACAzC,WAAW,CAAC,CAAC;UACXkC,IAAI,EAAE,KAAK;UACXE,OAAO,EAAE,EAAAK,mBAAA,GAAArB,GAAG,CAACE,IAAI,CAACE,QAAQ,cAAAiB,mBAAA,uBAAjBA,mBAAA,CAAmBjB,QAAQ,KAAI,8BAA8B;UACtEc,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACpC,CAAC,CAAC,CAAC;MACL;IACF,CAAC,CAAC,OAAOE,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZC,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEN,GAAG,CAAC;MACnD,MAAMO,YAAY,GAAG,EAAAN,aAAA,GAAAD,GAAG,CAACQ,QAAQ,cAAAP,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcrB,IAAI,cAAAsB,kBAAA,uBAAlBA,kBAAA,CAAoBI,KAAK,OAAAH,cAAA,GAAIH,GAAG,CAACQ,QAAQ,cAAAL,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcvB,IAAI,cAAAwB,mBAAA,uBAAlBA,mBAAA,CAAoBK,MAAM,KAAIT,GAAG,CAACN,OAAO,IAAI,iDAAiD;MAChJpC,WAAW,CAAC,CAAC;QACXkC,IAAI,EAAE,KAAK;QACXE,OAAO,EAAE,kCAAkCa,YAAY,0CAA0C;QACjGX,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;IACL,CAAC,SAAS;MACR7B,UAAU,CAAC,KAAK,CAAC;IACnB;EACF;EAEA,eAAeyC,WAAWA,CAAChB,OAAO,EAAEiB,IAAI,GAAG,IAAI,EAAE;IAC/C,IAAI,CAACjB,OAAO,CAACkB,IAAI,CAAC,CAAC,IAAI,CAACD,IAAI,EAAE;;IAE9B;IACA,MAAME,WAAW,GAAG;MAClBrB,IAAI,EAAE,MAAM;MACZE,OAAO,EAAEA,OAAO,KAAKiB,IAAI,KAAK,aAAa,GAAG,gBAAgB,GAAG,EAAE,CAAC;MACpEf,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IACpC,CAAC;IACDxC,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAED,WAAW,CAAC,CAAC;IAE3C,IAAI;MAAA,IAAAE,mBAAA,EAAAC,kBAAA;MACF,MAAMtC,GAAG,GAAG,MAAMnC,GAAG,CAAC0E,IAAI,CAAC,uBAAuB,EAAE;QAClDvB,OAAO,EAAEA,OAAO,IAAI,EAAE;QACtBiB,IAAI,EAAEA,IAAI,KAAIpD,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEoD,IAAI;QACnC9B,UAAU,EAAEpB;MACd,CAAC,CAAC;MAEFD,kBAAkB,CAACkB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAAC;MACrClB,WAAW,CAACc,GAAG,CAACE,IAAI,CAACjB,QAAQ,CAAC;;MAE9B;MACA,KAAAoD,mBAAA,GAAIrC,GAAG,CAACE,IAAI,CAACE,QAAQ,cAAAiC,mBAAA,eAAjBA,mBAAA,CAAmBjC,QAAQ,EAAE;QAC/B,MAAMoC,YAAY,GAAGxC,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACA,QAAQ;QAC/C,MAAMqC,YAAY,GAAGzC,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACnB,QAAQ,KAAKyD,SAAS,GACzD,oBAAoB1C,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACnB,QAAQ,oBAAoBe,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACuC,WAAW,IAAI,EAAE,OAAO3C,GAAG,CAACE,IAAI,CAACE,QAAQ,CAACwC,WAAW,IAAI,EAAE,GAAG,GAClJ,EAAE;QAENhE,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;UAC5BtB,IAAI,EAAE,KAAK;UACXE,OAAO,EAAEwB,YAAY,GAAGC,YAAY;UACpCvB,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACpC,CAAC,CAAC,CAAC;MACL;;MAEA;MACA,KAAAkB,kBAAA,GAAItC,GAAG,CAACE,IAAI,CAACjB,QAAQ,cAAAqD,kBAAA,eAAjBA,kBAAA,CAAmBO,WAAW,EAAE;QAClCC,UAAU,CAAC,MAAM;UACf,IAAItE,UAAU,EAAEA,UAAU,CAAC,CAAC;QAC9B,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC,CAAC,OAAO8C,GAAG,EAAE;MAAA,IAAAyB,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZvB,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEN,GAAG,CAAC;MAC7C,MAAMO,YAAY,GAAG,EAAAkB,cAAA,GAAAzB,GAAG,CAACQ,QAAQ,cAAAiB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc7C,IAAI,cAAA8C,mBAAA,uBAAlBA,mBAAA,CAAoBpB,KAAK,OAAAqB,cAAA,GAAI3B,GAAG,CAACQ,QAAQ,cAAAmB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc/C,IAAI,cAAAgD,mBAAA,uBAAlBA,mBAAA,CAAoBnB,MAAM,KAAIT,GAAG,CAACN,OAAO,IAAI,mBAAmB;MAClHpC,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BtB,IAAI,EAAE,KAAK;QACXE,OAAO,EAAE,kCAAkCa,YAAY,qBAAqB;QAC5EX,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;IACL;EACF;EAEA,SAAS+B,YAAYA,CAACC,CAAC,EAAE;IACvBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACjE,UAAU,CAAC8C,IAAI,CAAC,CAAC,IAAI,CAAArD,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEiC,IAAI,MAAK,MAAM,EAAE;IAE5DkB,WAAW,CAAC5C,UAAU,CAAC;IACvBC,aAAa,CAAC,EAAE,CAAC;EACnB;EAEA,SAASiE,kBAAkBA,CAACC,MAAM,EAAE;IAClCvB,WAAW,CAACuB,MAAM,CAAC;EACrB;EAEA,SAASC,gBAAgBA,CAACC,KAAK,EAAE;IAC/B,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACnD,MAAM,KAAK,CAAC,EAAE;IAElCb,YAAY,CAAC,IAAI,CAAC;IAClB,MAAMiE,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BC,KAAK,CAACC,IAAI,CAACJ,KAAK,CAAC,CAACK,OAAO,CAACC,IAAI,IAAI;MAChCL,QAAQ,CAACM,MAAM,CAAC,OAAO,EAAED,IAAI,CAAC;IAChC,CAAC,CAAC;;IAEF;IACAlG,GAAG,CAAC0E,IAAI,CAAC,mCAAmC,EAAEmB,QAAQ,EAAE;MACtDO,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC,CACCC,IAAI,CAAElE,GAAG,IAAK;MAAA,IAAAmE,mBAAA;MACb,MAAMC,aAAa,GAAG,EAAAD,mBAAA,GAAAnE,GAAG,CAACE,IAAI,CAACmE,SAAS,cAAAF,mBAAA,uBAAlBA,mBAAA,CAAoB7D,MAAM,KAAImD,KAAK,CAACnD,MAAM;MAChE,MAAMgE,SAAS,GAAGtE,GAAG,CAACE,IAAI,CAACqE,eAAe;;MAE1C;MACA3F,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BtB,IAAI,EAAE,MAAM;QACZE,OAAO,EAAE,YAAYoD,aAAa,UAAU;QAC5ClD,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;;MAEH;MACA,IAAIkD,SAAS,IAAIA,SAAS,CAACE,YAAY,EAAE;QACvC5F,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;UAC5BtB,IAAI,EAAE,KAAK;UACXE,OAAO,EAAE,yGAAyG;UAClHE,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACpC,CAAC,CAAC,CAAC;QACH;QACA0B,UAAU,CAAC,MAAM;UACfd,WAAW,CAAC,wBAAwB,EAAEnD,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEoD,IAAI,CAAC;QAC9D,CAAC,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QAAA,IAAAwC,qBAAA;QACL;QACA,MAAMC,YAAY,GAAG,CAAAJ,SAAS,aAATA,SAAS,wBAAAG,qBAAA,GAATH,SAAS,CAAEK,iBAAiB,cAAAF,qBAAA,uBAA5BA,qBAAA,CAA8BnE,MAAM,KAAI,CAAC;QAC9D1B,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;UAC5BtB,IAAI,EAAE,KAAK;UACXE,OAAO,EAAE,oEAAoE0D,YAAY,gFAAgF;UACzKxD,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACpC,CAAC,CAAC,CAAC;QACH;QACA0B,UAAU,CAAC,MAAM;UACfd,WAAW,CAAC,UAAU,EAAEnD,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEoD,IAAI,CAAC;QAChD,CAAC,EAAE,IAAI,CAAC;MACV;MAEAxC,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,CACDmF,KAAK,CAACtD,GAAG,IAAI;MAAA,IAAAuD,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZrD,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEN,GAAG,CAAC;MACzC,MAAMO,YAAY,GAAG,EAAAgD,cAAA,GAAAvD,GAAG,CAACQ,QAAQ,cAAA+C,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc3E,IAAI,cAAA4E,mBAAA,uBAAlBA,mBAAA,CAAoBlD,KAAK,OAAAmD,cAAA,GAAIzD,GAAG,CAACQ,QAAQ,cAAAiD,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc7E,IAAI,cAAA8E,mBAAA,uBAAlBA,mBAAA,CAAoBjD,MAAM,KAAIT,GAAG,CAACN,OAAO,IAAI,oBAAoB;MACnHpC,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BtB,IAAI,EAAE,KAAK;QACXE,OAAO,EAAE,8BAA8Ba,YAAY,qBAAqB;QACxEX,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;MACH3B,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;EACN;EAEA,SAASwF,UAAUA,CAAC7B,CAAC,EAAE;IACrBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAAC8B,eAAe,CAAC,CAAC;IACnB,IAAI9B,CAAC,CAACtC,IAAI,KAAK,WAAW,IAAIsC,CAAC,CAACtC,IAAI,KAAK,UAAU,EAAE;MACnDnB,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,MAAM,IAAIyD,CAAC,CAACtC,IAAI,KAAK,WAAW,EAAE;MACjCnB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF;EAEA,SAASwF,UAAUA,CAAC/B,CAAC,EAAE;IACrBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAAC8B,eAAe,CAAC,CAAC;IACnBvF,aAAa,CAAC,KAAK,CAAC;IAEpB,IAAIyD,CAAC,CAACgC,YAAY,CAAC3B,KAAK,IAAIL,CAAC,CAACgC,YAAY,CAAC3B,KAAK,CAACnD,MAAM,GAAG,CAAC,EAAE;MAC3DkD,gBAAgB,CAACJ,CAAC,CAACgC,YAAY,CAAC3B,KAAK,CAAC;IACxC;EACF;EAEA,SAAS1D,cAAcA,CAAA,EAAG;IAAA,IAAAsF,qBAAA;IACxB,CAAAA,qBAAA,GAAAzF,cAAc,CAAC0F,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE;EAEA,MAAMC,YAAY,GAAG5G,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEiC,IAAI;EAC1C,MAAM4E,cAAc,GAAGD,YAAY,KAAK,MAAM;EAE9C,oBACErH,OAAA;IAAKuH,KAAK,EAAE;MACVC,QAAQ,EAAE,OAAO;MACjBC,MAAM,EAAE,MAAM;MACdC,KAAK,EAAE,MAAM;MACbC,KAAK,EAAE,OAAO;MACdC,SAAS,EAAE,OAAO;MAClBC,UAAU,EAAEnI,KAAK,CAACoI,MAAM,CAACC,KAAK;MAC9BC,YAAY,EAAEtI,KAAK,CAACsI,YAAY,CAACC,EAAE;MACnCC,SAAS,EAAExI,KAAK,CAACyI,OAAO,CAACC,EAAE;MAC3BC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,aAAa9I,KAAK,CAACoI,MAAM,CAACW,OAAO;IAC3C,CAAE;IAAAC,QAAA,gBAEA1I,OAAA;MAAKuH,KAAK,EAAE;QACVoB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAACC,EAAE;QACzBC,YAAY,EAAE,aAAapJ,KAAK,CAACoI,MAAM,CAACW,OAAO,EAAE;QACjDJ,OAAO,EAAE,MAAM;QACfU,cAAc,EAAE,eAAe;QAC/BC,UAAU,EAAE,QAAQ;QACpBnB,UAAU,EAAEnI,KAAK,CAACoI,MAAM,CAACmB,OAAO;QAChCC,KAAK,EAAExJ,KAAK,CAACoI,MAAM,CAACC,KAAK;QACzBC,YAAY,EAAE,GAAGtI,KAAK,CAACsI,YAAY,CAACC,EAAE,IAAIvI,KAAK,CAACsI,YAAY,CAACC,EAAE;MACjE,CAAE;MAAAS,QAAA,gBACA1I,OAAA;QAAA0I,QAAA,gBACE1I,OAAA;UAAIuH,KAAK,EAAE;YAAE4B,MAAM,EAAE,CAAC;YAAEC,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACnB;UAAG,CAAE;UAAAS,QAAA,EAAC;QAElE;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACJ5I,QAAQ,CAACE,qBAAqB,GAAG,CAAC,iBACjCf,OAAA;UAAKuH,KAAK,EAAE;YAAE6B,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACM,EAAE;YAAEC,SAAS,EAAEjK,KAAK,CAACkJ,OAAO,CAACc;UAAG,CAAE;UAAAhB,QAAA,GACjF7H,QAAQ,CAACE,qBAAqB,EAAC,YAClC;QAAA;UAAAuI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACNzJ,OAAA;QACE4J,OAAO,EAAEvJ,OAAQ;QACjBkH,KAAK,EAAE;UACLM,UAAU,EAAE,aAAa;UACzBW,MAAM,EAAE,MAAM;UACdU,KAAK,EAAExJ,KAAK,CAACoI,MAAM,CAACC,KAAK;UACzBqB,QAAQ,EAAE,MAAM;UAChBS,MAAM,EAAE,SAAS;UACjBlB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAACc;QACzB,CAAE;QAAAhB,QAAA,EACH;MAED;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAGL5I,QAAQ,CAACE,qBAAqB,GAAG,CAAC,iBACjCf,OAAA;MAAKuH,KAAK,EAAE;QACVuC,MAAM,EAAE,KAAK;QACbjC,UAAU,EAAEnI,KAAK,CAACoI,MAAM,CAACW,OAAO;QAChCd,KAAK,EAAE;MACT,CAAE;MAAAe,QAAA,eACA1I,OAAA;QAAKuH,KAAK,EAAE;UACVuC,MAAM,EAAE,MAAM;UACdjC,UAAU,EAAEnI,KAAK,CAACoI,MAAM,CAACmB,OAAO;UAChCtB,KAAK,EAAE,GAAG9G,QAAQ,CAACE,qBAAqB,GAAG;UAC3CgJ,UAAU,EAAE;QACd;MAAE;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACN,eAGDzJ,OAAA;MAAKuH,KAAK,EAAE;QACVyC,IAAI,EAAE,CAAC;QACPC,SAAS,EAAE,MAAM;QACjBtB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAACC,EAAE;QACzBR,OAAO,EAAE,MAAM;QACfC,aAAa,EAAE,QAAQ;QACvB4B,GAAG,EAAExK,KAAK,CAACkJ,OAAO,CAACC,EAAE;QACrBsB,SAAS,EAAE,OAAO;QAClBvC,SAAS,EAAE;MACb,CAAE;MAAAc,QAAA,EACCxH,OAAO,gBACNlB,OAAA;QAAKuH,KAAK,EAAE;UAAE6C,SAAS,EAAE,QAAQ;UAAElB,KAAK,EAAExJ,KAAK,CAACoI,MAAM,CAACuC;QAAc,CAAE;QAAA3B,QAAA,EAAC;MAExE;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,gBAENzJ,OAAA,CAAAE,SAAA;QAAAwI,QAAA,GACGnI,QAAQ,CAAC+J,GAAG,CAAC,CAAC7H,GAAG,EAAE8H,GAAG,kBACrBvK,OAAA;UAEEuH,KAAK,EAAE;YACLc,OAAO,EAAE,MAAM;YACfU,cAAc,EAAEtG,GAAG,CAACC,IAAI,KAAK,MAAM,GAAG,UAAU,GAAG;UACrD,CAAE;UAAAgG,QAAA,eAEF1I,OAAA;YAAKuH,KAAK,EAAE;cACViD,QAAQ,EAAE,KAAK;cACf7B,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAAC6B,EAAE;cACzBzC,YAAY,EAAEtI,KAAK,CAACsI,YAAY,CAACa,EAAE;cACnChB,UAAU,EAAEpF,GAAG,CAACC,IAAI,KAAK,MAAM,GAC3BhD,KAAK,CAACoI,MAAM,CAACmB,OAAO,GACpBvJ,KAAK,CAACoI,MAAM,CAAC4C,OAAO;cACxBxB,KAAK,EAAEzG,GAAG,CAACC,IAAI,KAAK,MAAM,GACtBhD,KAAK,CAACoI,MAAM,CAACC,KAAK,GAClBrI,KAAK,CAACoI,MAAM,CAAC6C,WAAW;cAC5BvB,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACqB;YACtC,CAAE;YAAA/B,QAAA,EACCjG,GAAG,CAACG;UAAO;YAAA0G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT;QAAC,GAnBDc,GAAG;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAoBL,CACN,CAAC,eACFzJ,OAAA;UAAK4K,GAAG,EAAEpJ;QAAe;UAAA8H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA,eAC5B;IACH;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLnC,cAAc,iBACbtH,OAAA;MACE6K,WAAW,EAAEhE,UAAW;MACxBiE,WAAW,EAAEjE,UAAW;MACxBkE,UAAU,EAAElE,UAAW;MACvBmE,MAAM,EAAEjE,UAAW;MACnBQ,KAAK,EAAE;QACL4B,MAAM,EAAEzJ,KAAK,CAACkJ,OAAO,CAACC,EAAE;QACxBF,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAACX,EAAE;QACzBO,MAAM,EAAE,cAAclH,UAAU,GAAG5B,KAAK,CAACoI,MAAM,CAACmB,OAAO,GAAGvJ,KAAK,CAACoI,MAAM,CAACmD,OAAO,EAAE;QAChFjD,YAAY,EAAEtI,KAAK,CAACsI,YAAY,CAACa,EAAE;QACnCuB,SAAS,EAAE,QAAQ;QACnBvC,UAAU,EAAEvG,UAAU,GAAG5B,KAAK,CAACoI,MAAM,CAACoD,YAAY,GAAGxL,KAAK,CAACoI,MAAM,CAACqD,MAAM;QACxEtB,MAAM,EAAE,SAAS;QACjBE,UAAU,EAAE,OAAOrK,KAAK,CAAC0L,WAAW,CAACC,IAAI;MAC3C,CAAE;MACFzB,OAAO,EAAEA,CAAA;QAAA,IAAA0B,qBAAA;QAAA,QAAAA,qBAAA,GAAM7J,YAAY,CAACyF,OAAO,cAAAoE,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;MAAA,CAAC;MAAA7C,QAAA,gBAE7C1I,OAAA;QACE4K,GAAG,EAAEnJ,YAAa;QAClBiB,IAAI,EAAC,MAAM;QACX8I,QAAQ;QACRjE,KAAK,EAAE;UAAEc,OAAO,EAAE;QAAO,CAAE;QAC3BoD,QAAQ,EAAGzG,CAAC,IAAKI,gBAAgB,CAACJ,CAAC,CAAC0G,MAAM,CAACrG,KAAK;MAAE;QAAAiE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eACFzJ,OAAA;QAAKuH,KAAK,EAAE;UAAE6B,QAAQ,EAAE,MAAM;UAAEuC,YAAY,EAAEjM,KAAK,CAACkJ,OAAO,CAAC6B;QAAG,CAAE;QAAA/B,QAAA,EAAC;MAAE;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC1EzJ,OAAA;QAAKuH,KAAK,EAAE;UAAE2B,KAAK,EAAExJ,KAAK,CAACoI,MAAM,CAACuC,aAAa;UAAEjB,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACqB;QAAG,CAAE;QAAA/B,QAAA,EAAC;MAE3F;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGA,CAACnC,cAAc,IAAI7G,eAAe,iBACjCT,OAAA;MAAKuH,KAAK,EAAE;QACVoB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAACC,EAAE;QACzB+C,SAAS,EAAE,aAAalM,KAAK,CAACoI,MAAM,CAACW,OAAO;MAC9C,CAAE;MAAAC,QAAA,EACCjI,eAAe,CAACiC,IAAI,KAAK,QAAQ,IAAIjC,eAAe,CAACoL,OAAO,gBAC3D7L,OAAA;QAAKuH,KAAK,EAAE;UAAEc,OAAO,EAAE,MAAM;UAAEC,aAAa,EAAE,QAAQ;UAAE4B,GAAG,EAAExK,KAAK,CAACkJ,OAAO,CAACc;QAAG,CAAE;QAAAhB,QAAA,EAC7EjI,eAAe,CAACoL,OAAO,CAACvB,GAAG,CAAC,CAACnF,MAAM,EAAEoF,GAAG,kBACvCvK,OAAA,CAACJ,MAAM;UAELkM,OAAO,EAAC,SAAS;UACjBC,IAAI,EAAC,IAAI;UACTnC,OAAO,EAAEA,CAAA,KAAM1E,kBAAkB,CAACC,MAAM,CAAE;UAC1CoC,KAAK,EAAE;YAAEI,KAAK,EAAE,MAAM;YAAEyC,SAAS,EAAE;UAAO,CAAE;UAAA1B,QAAA,EAE3CvD;QAAM,GANFoF,GAAG;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOF,CACT;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,gBAENzJ,OAAA;QAAMgM,QAAQ,EAAEjH,YAAa;QAAA2D,QAAA,eAC3B1I,OAAA;UAAKuH,KAAK,EAAE;YAAEc,OAAO,EAAE,MAAM;YAAE6B,GAAG,EAAExK,KAAK,CAACkJ,OAAO,CAAC6B;UAAG,CAAE;UAAA/B,QAAA,gBACrD1I,OAAA;YACE0C,IAAI,EAAEjC,eAAe,CAACiC,IAAI,KAAK,MAAM,GAAG,MAAM,GAAGjC,eAAe,CAACiC,IAAI,KAAK,QAAQ,GAAG,QAAQ,GAAG,MAAO;YACvGuJ,KAAK,EAAEjL,UAAW;YAClByK,QAAQ,EAAGzG,CAAC,IAAK/D,aAAa,CAAC+D,CAAC,CAAC0G,MAAM,CAACO,KAAK,CAAE;YAC/CC,WAAW,EAAEzL,eAAe,CAACiC,IAAI,KAAK,MAAM,GAAG,YAAY,GAAG,qBAAsB;YACpF6E,KAAK,EAAE;cACLyC,IAAI,EAAE,CAAC;cACPrB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAAC6B,EAAE;cACzBjC,MAAM,EAAE,aAAa9I,KAAK,CAACoI,MAAM,CAACmD,OAAO,EAAE;cAC3CjD,YAAY,EAAEtI,KAAK,CAACsI,YAAY,CAACa,EAAE;cACnCO,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACqB;YACtC,CAAE;YACF0B,QAAQ,EAAE1L,eAAe,CAAC0L;UAAS;YAAA7C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpC,CAAC,eACFzJ,OAAA,CAACJ,MAAM;YAAC8C,IAAI,EAAC,QAAQ;YAACoJ,OAAO,EAAC,SAAS;YAACC,IAAI,EAAC,IAAI;YAAArD,QAAA,EAAC;UAElD;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IACP;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,EAEArI,SAAS,iBACRpB,OAAA;MAAKuH,KAAK,EAAE;QACVoB,OAAO,EAAEjJ,KAAK,CAACkJ,OAAO,CAAC6B,EAAE;QACzBL,SAAS,EAAE,QAAQ;QACnBlB,KAAK,EAAExJ,KAAK,CAACoI,MAAM,CAACuC,aAAa;QACjCjB,QAAQ,EAAE1J,KAAK,CAAC2J,UAAU,CAACD,QAAQ,CAACqB;MACtC,CAAE;MAAA/B,QAAA,EAAC;IAEH;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACnJ,EAAA,CA/aQH,OAAO;AAAAiM,EAAA,GAAPjM,OAAO;AAibhB,eAAeA,OAAO;AAAC,IAAAiM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}