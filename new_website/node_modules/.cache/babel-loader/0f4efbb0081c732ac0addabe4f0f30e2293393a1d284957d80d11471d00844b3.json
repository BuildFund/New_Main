{"ast":null,"code":"import _objectSpread from\"C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import api from'../api';import{theme,commonStyles}from'../styles/theme';import Button from'../components/Button';import Badge from'../components/Badge';import ApplicationProgress from'../components/ApplicationProgress';import Select from'../components/Select';import Textarea from'../components/Textarea';import Input from'../components/Input';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ApplicationDetail(){const{id}=useParams();const navigate=useNavigate();const[application,setApplication]=useState(null);const[statusHistory,setStatusHistory]=useState([]);const[documents,setDocuments]=useState([]);const[messages,setMessages]=useState([]);const[activeTab,setActiveTab]=useState('overview');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[updatingStatus,setUpdatingStatus]=useState(false);const[uploadingDoc,setUploadingDoc]=useState(false);const[statusUpdateForm,setStatusUpdateForm]=useState({status:'',feedback:''});const[docUploadForm,setDocUploadForm]=useState({description:'',document_type_id:'',is_required:false});const[dragActive,setDragActive]=useState(false);const[documentTypes,setDocumentTypes]=useState([]);const[underwriting,setUnderwriting]=useState(null);const[givingConsent,setGivingConsent]=useState(false);const role=localStorage.getItem('role');const isLender=role==='Lender';const isBorrower=role==='Borrower';useEffect(()=>{loadApplication();loadDocumentTypes();loadUnderwriting();},[id]);async function loadDocumentTypes(){try{const res=await api.get('/api/documents/types/?loan_type=business_finance');setDocumentTypes(res.data||[]);}catch(err){console.error('Failed to load document types:',err);}}async function loadUnderwriting(){try{const res=await api.get(\"/api/applications/\".concat(id,\"/underwriting/\"));setUnderwriting(res.data);}catch(err){// Underwriting may not exist yet\nconsole.log('No underwriting assessment available');}}async function loadApplication(){setLoading(true);setError(null);try{const[appRes,historyRes,docsRes,messagesRes]=await Promise.all([api.get(\"/api/applications/\".concat(id,\"/\")),api.get(\"/api/applications/\".concat(id,\"/status_history/\")).catch(()=>({data:[]})),api.get(\"/api/applications/\".concat(id,\"/documents/\")).catch(()=>({data:[]})),api.get(\"/api/messages/?application=\".concat(id)).catch(()=>({data:[]}))]);setApplication(appRes.data);setStatusHistory(historyRes.data||[]);setDocuments(docsRes.data||[]);setMessages(messagesRes.data||[]);// Load underwriting if lender\nif(role==='Lender'){loadUnderwriting();}}catch(err){console.error('ApplicationDetail loadApplication error:',err);setError('Failed to load application details');}finally{setLoading(false);}}async function handleDocumentUpload(files){if(!files||files.length===0)return;setUploadingDoc(true);const formData=new FormData();Array.from(files).forEach(file=>{formData.append('files',file);});formData.append('description',docUploadForm.description);if(docUploadForm.document_type_id){formData.append('document_type_id',docUploadForm.document_type_id);}formData.append('is_required',docUploadForm.is_required);try{await api.post(\"/api/applications/\".concat(id,\"/documents/\"),formData,{headers:{'Content-Type':'multipart/form-data'}});await loadApplication();await loadUnderwriting();setDocUploadForm({description:'',document_type_id:'',is_required:false});}catch(err){var _err$response,_err$response$data;console.error('Document upload error:',err);alert('Failed to upload document: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message));}finally{setUploadingDoc(false);}}function handleDrag(e){e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}}function handleDrop(e){e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files.length>0){handleDocumentUpload(e.dataTransfer.files);}}const getStatusBadge=status=>{const statusMap={submitted:{variant:'info',label:'Submitted'},opened:{variant:'info',label:'Opened'},under_review:{variant:'warning',label:'Under Review'},further_info_required:{variant:'warning',label:'Further Info Required'},credit_check:{variant:'info',label:'Credit Check'},approved:{variant:'success',label:'Approved'},accepted:{variant:'success',label:'Accepted'},declined:{variant:'error',label:'Declined'},withdrawn:{variant:'info',label:'Withdrawn'},completed:{variant:'success',label:'Completed'}};const statusInfo=statusMap[status]||{variant:'info',label:status};return/*#__PURE__*/_jsx(Badge,{variant:statusInfo.variant,children:statusInfo.label});};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:commonStyles.container,children:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',color:theme.colors.textSecondary},children:\"Loading application...\"})});}if(error||!application){const backPath=role==='Borrower'?'/borrower/applications':'/lender/applications';return/*#__PURE__*/_jsx(\"div\",{style:commonStyles.container,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{background:theme.colors.errorLight,color:theme.colors.errorDark,padding:theme.spacing.lg}),children:[/*#__PURE__*/_jsx(\"p\",{children:error||'Application not found'}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(backPath),variant:\"primary\",children:\"Back to Applications\"})]})});}const backPath=role==='Borrower'?'/borrower/applications':'/lender/applications';const tabs=[{id:'overview',label:'Overview'},{id:'messages',label:\"Messages (\".concat(messages.length,\")\")},{id:'documents',label:\"Documents (\".concat(documents.length,\")\")},{id:'progress',label:'Progress'}];return/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.lg,display:'flex',alignItems:'center',gap:theme.spacing.md},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(backPath),variant:\"outline\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsxs(\"h1\",{style:{margin:0,fontSize:theme.typography.fontSize['3xl'],fontWeight:theme.typography.fontWeight.bold},children:[\"Application #\",application.id]}),getStatusBadge(application.status)]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:theme.spacing.sm,borderBottom:\"2px solid \".concat(theme.colors.gray200),marginBottom:theme.spacing.xl},children:tabs.map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab.id),style:{padding:\"\".concat(theme.spacing.md,\" \").concat(theme.spacing.lg),background:'transparent',border:'none',borderBottom:activeTab===tab.id?\"3px solid \".concat(theme.colors.primary):'3px solid transparent',color:activeTab===tab.id?theme.colors.primary:theme.colors.textSecondary,fontWeight:activeTab===tab.id?theme.typography.fontWeight.semibold:theme.typography.fontWeight.normal,cursor:'pointer',fontSize:theme.typography.fontSize.base,transition:'all 0.2s'},children:tab.label},tab.id))}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'2fr 1fr',gap:theme.spacing.xl},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.lg}),children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\"),fontSize:theme.typography.fontSize['2xl']},children:\"Application Terms\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Loan Amount:\"})}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.lg,fontWeight:theme.typography.fontWeight.semibold},children:[\"\\xA3\",parseFloat(application.proposed_loan_amount||0).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Interest Rate:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.lg,fontWeight:theme.typography.fontWeight.semibold},children:application.proposed_interest_rate?\"\".concat(application.proposed_interest_rate,\"%\"):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Term:\"})}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0},children:[application.proposed_term_months,\" months\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"LTV Ratio:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.proposed_ltv_ratio?\"\".concat(application.proposed_ltv_ratio,\"%\"):'N/A'})]})]}),application.notes&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:theme.spacing.lg},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,lineHeight:theme.typography.lineHeight.relaxed},children:application.notes})]})]}),application.project_details&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.lg}),children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Project Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"})}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0},children:[application.project_details.address,/*#__PURE__*/_jsx(\"br\",{}),application.project_details.town,\", \",application.project_details.county,/*#__PURE__*/_jsx(\"br\",{}),application.project_details.postcode]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Funding Type:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.project_details.funding_type}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.md,\" 0 \").concat(theme.spacing.xs),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Property Type:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.project_details.property_type})]})]}),application.project_details.project_reference&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:theme.spacing.md},children:/*#__PURE__*/_jsxs(Badge,{variant:\"info\",children:[\"Project Reference: \",application.project_details.project_reference]})})]}),role==='Lender'&&application.borrower_details&&/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Borrower Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Company Name:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.borrower_details.company_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Contact:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.borrower_details.user_email||'N/A'})]})]})]}),role==='Borrower'&&application.lender_details&&/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Lender Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Organisation:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.lender_details.organisation_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Contact:\"})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:application.lender_details.contact_email||'N/A'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[isLender&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.lg}),children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Update Status\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:theme.spacing.xs,fontWeight:theme.typography.fontWeight.medium},children:\"New Status\"}),/*#__PURE__*/_jsxs(Select,{value:statusUpdateForm.status,onChange:e=>setStatusUpdateForm(_objectSpread(_objectSpread({},statusUpdateForm),{},{status:e.target.value})),style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select status...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"opened\",children:\"Opened\"}),/*#__PURE__*/_jsx(\"option\",{value:\"under_review\",children:\"Under Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"further_info_required\",children:\"Further Information Required\"}),/*#__PURE__*/_jsx(\"option\",{value:\"credit_check\",children:\"Credit Check/Underwriting\"}),/*#__PURE__*/_jsx(\"option\",{value:\"approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"declined\",children:\"Declined\"}),/*#__PURE__*/_jsx(\"option\",{value:\"withdrawn\",children:\"Withdrawn\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:theme.spacing.xs,fontWeight:theme.typography.fontWeight.medium},children:\"Feedback/Notes (optional)\"}),/*#__PURE__*/_jsx(Textarea,{value:statusUpdateForm.feedback,onChange:e=>setStatusUpdateForm(_objectSpread(_objectSpread({},statusUpdateForm),{},{feedback:e.target.value})),placeholder:\"Add feedback or notes about this status change...\",rows:3})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",style:{width:'100%'},onClick:async()=>{if(!statusUpdateForm.status){alert('Please select a status');return;}setUpdatingStatus(true);try{await api.post(\"/api/applications/\".concat(id,\"/update_status/\"),{status:statusUpdateForm.status,feedback:statusUpdateForm.feedback});await loadApplication();setStatusUpdateForm({status:'',feedback:''});}catch(err){var _err$response2,_err$response2$data;console.error('Status update error:',err);alert('Failed to update status: '+(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message));}finally{setUpdatingStatus(false);}},disabled:updatingStatus||!statusUpdateForm.status,children:updatingStatus?'Updating...':'Update Status'})]}),/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:theme.spacing.md},children:[/*#__PURE__*/_jsx(Link,{to:\"/\".concat(role.toLowerCase(),\"/messages?application_id=\").concat(application.id),style:{textDecoration:'none'},children:/*#__PURE__*/_jsxs(Button,{variant:\"primary\",style:{width:'100%'},children:[\"Message \",role==='Borrower'?'Lender':'Borrower']})}),isLender&&application.status==='accepted'&&application.borrower_consent_given&&/*#__PURE__*/_jsx(Link,{to:\"/lender/applications/\".concat(application.id,\"/borrower-info\"),style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",style:{width:'100%'},children:\"\\uD83D\\uDCCB View Borrower Information\"})}),isBorrower&&application.status==='accepted'&&!application.borrower_consent_given&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",style:{width:'100%'},onClick:async()=>{setGivingConsent(true);try{await api.post(\"/api/applications/\".concat(id,\"/give_consent/\"));await loadApplication();alert('Consent given successfully. The lender can now view your information.');}catch(err){var _err$response3,_err$response3$data;console.error('Failed to give consent:',err);alert('Failed to give consent: '+(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||err.message));}finally{setGivingConsent(false);}},disabled:givingConsent,children:givingConsent?'Processing...':'✓ Give Consent to Share Information'}),isBorrower&&application.status==='accepted'&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:theme.spacing.md,background:application.borrower_consent_given?theme.colors.successLight:theme.colors.warningLight,borderRadius:theme.borderRadius.md,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontWeight:theme.typography.fontWeight.semibold},children:application.borrower_consent_given?'✓ Consent Given':'⚠️ Consent Required'}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0 0\"),fontSize:theme.typography.fontSize.xs},children:application.borrower_consent_given?'Lender can view your information':'Give consent to allow lender to view your information'}),application.borrower_consent_given&&application.borrower_consent_given_at&&/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0 0\"),fontSize:theme.typography.fontSize.xs,color:theme.colors.textMuted},children:[\"Given on \",new Date(application.borrower_consent_given_at).toLocaleDateString()]})]})]})]})]})]}),activeTab==='messages'&&/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Messages\"}),messages.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary},children:\"No messages yet.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:theme.spacing.md},children:messages.map(msg=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:theme.spacing.md,background:msg.sender===role?theme.colors.primaryLight:theme.colors.gray50,borderRadius:theme.borderRadius.md},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:theme.spacing.xs},children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.sender_username||'Unknown'}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary},children:new Date(msg.created_at).toLocaleString()})]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:msg.body})]},msg.id))}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:theme.spacing.lg},children:/*#__PURE__*/_jsx(Link,{to:\"/\".concat(role.toLowerCase(),\"/messages?application_id=\").concat(application.id),children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Go to Messages\"})})})]}),activeTab==='documents'&&/*#__PURE__*/_jsxs(\"div\",{children:[isLender&&underwriting&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.lg,background:theme.colors.infoLight}),children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 \".concat(theme.spacing.md,\" 0\")},children:\"AI Underwriting Assessment\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:theme.spacing.md,marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary},children:\"Risk Score\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.bold},children:underwriting.risk_score||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary},children:\"Recommendation\"}),/*#__PURE__*/_jsx(Badge,{variant:underwriting.recommendation==='approve'?'success':underwriting.recommendation==='decline'?'error':'warning',children:underwriting.recommendation||'Pending'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary},children:\"Documents Valid\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.lg},children:[underwriting.documents_valid||0,\" / \",underwriting.documents_analyzed||0]})]})]}),underwriting.summary&&/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.sm},children:underwriting.summary})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.lg}),children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Upload Documents\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,marginBottom:theme.spacing.lg},children:\"Upload required documents for your loan application. Documents will be automatically validated and assessed.\"}),/*#__PURE__*/_jsxs(\"div\",{onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,style:{marginBottom:theme.spacing.lg,padding:theme.spacing.xl,border:\"2px dashed \".concat(dragActive?theme.colors.primary:theme.colors.gray300),borderRadius:theme.borderRadius.md,textAlign:'center',background:dragActive?theme.colors.primaryLight:theme.colors.gray50,cursor:'pointer',transition:'all 0.2s'},onClick:()=>document.getElementById('file-upload').click(),children:[/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",type:\"file\",multiple:true,style:{display:'none'},onChange:e=>handleDocumentUpload(e.target.files)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:theme.spacing.sm},children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:theme.typography.fontSize.lg,fontWeight:theme.typography.fontWeight.semibold,marginBottom:theme.spacing.xs},children:\"Drag and drop files here\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:theme.colors.textSecondary},children:\"or click to browse \\u2022 PDF, Images, Word, Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:theme.spacing.md,marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:theme.spacing.xs,fontWeight:theme.typography.fontWeight.medium},children:\"Document Type\"}),/*#__PURE__*/_jsxs(Select,{value:docUploadForm.document_type_id,onChange:e=>setDocUploadForm(_objectSpread(_objectSpread({},docUploadForm),{},{document_type_id:e.target.value})),style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select document type...\"}),documentTypes.map(dt=>/*#__PURE__*/_jsxs(\"option\",{value:dt.id,children:[dt.name,\" \",dt.is_required&&'(Required)']},dt.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:theme.spacing.xs,fontWeight:theme.typography.fontWeight.medium},children:\"Description (Optional)\"}),/*#__PURE__*/_jsx(Input,{name:\"description\",value:docUploadForm.description,onChange:e=>setDocUploadForm(_objectSpread(_objectSpread({},docUploadForm),{},{description:e.target.value})),placeholder:\"e.g., Q1 2024 Bank Statement\"})]})]}),uploadingDoc&&/*#__PURE__*/_jsx(\"div\",{style:{padding:theme.spacing.md,background:theme.colors.infoLight,borderRadius:theme.borderRadius.md,marginBottom:theme.spacing.md},children:/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:theme.colors.info},children:\"\\u23F3 Uploading and validating documents...\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:[\"Uploaded Documents (\",documents.length,\")\"]}),documents.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:theme.spacing.xl},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,marginBottom:theme.spacing.md},children:\"No documents uploaded yet.\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textMuted,fontSize:theme.typography.fontSize.sm},children:\"Required documents: Passport/ID, Utility Bill, Bank Statements, Company Accounts\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:theme.spacing.md},children:documents.map(doc=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:theme.spacing.md,border:\"1px solid \".concat(theme.colors.gray200),borderRadius:theme.borderRadius.md,background:doc.validation_status==='valid'?theme.colors.successLight:doc.validation_status==='invalid'?theme.colors.errorLight:theme.colors.gray50},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:theme.spacing.sm},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:theme.spacing.sm,marginBottom:theme.spacing.xs},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontWeight:theme.typography.fontWeight.semibold},children:doc.file_name}),doc.document_type&&/*#__PURE__*/_jsx(Badge,{variant:\"info\",style:{fontSize:theme.typography.fontSize.xs},children:doc.document_type}),doc.is_required&&/*#__PURE__*/_jsx(Badge,{variant:\"warning\",style:{fontSize:theme.typography.fontSize.xs},children:\"Required\"})]}),doc.description&&/*#__PURE__*/_jsx(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary},children:doc.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:theme.spacing.md,marginTop:theme.spacing.xs},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:theme.typography.fontSize.xs,color:theme.colors.textMuted},children:[(doc.file_size/1024).toFixed(2),\" KB\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:theme.typography.fontSize.xs,color:theme.colors.textMuted},children:[\"Uploaded by \",doc.uploaded_by,\" \\u2022 \",new Date(doc.uploaded_at).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'flex-end',gap:theme.spacing.xs},children:[doc.validation_status&&/*#__PURE__*/_jsx(Badge,{variant:doc.validation_status==='valid'?'success':doc.validation_status==='invalid'?'error':'warning',children:doc.validation_status==='valid'?'✓ Valid':doc.validation_status==='invalid'?'✗ Invalid':'⏳ Validating'}),doc.validation_score!==null&&doc.validation_score!==undefined&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:theme.typography.fontSize.xs,color:theme.colors.textSecondary},children:[\"Score: \",doc.validation_score,\"/100\"]})]})]}),doc.validation_notes&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:theme.spacing.sm,padding:theme.spacing.xs,background:theme.colors.white,borderRadius:theme.borderRadius.sm,fontSize:theme.typography.fontSize.xs,color:theme.colors.textSecondary},children:doc.validation_notes})]},doc.id))})]})]}),activeTab==='progress'&&/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 \".concat(theme.spacing.lg,\" 0\")},children:\"Application Progress\"}),/*#__PURE__*/_jsx(ApplicationProgress,{application:application,statusHistory:statusHistory})]})]});}export default ApplicationDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","api","theme","commonStyles","Button","Badge","ApplicationProgress","Select","Textarea","Input","jsx","_jsx","jsxs","_jsxs","ApplicationDetail","id","navigate","application","setApplication","statusHistory","setStatusHistory","documents","setDocuments","messages","setMessages","activeTab","setActiveTab","loading","setLoading","error","setError","updatingStatus","setUpdatingStatus","uploadingDoc","setUploadingDoc","statusUpdateForm","setStatusUpdateForm","status","feedback","docUploadForm","setDocUploadForm","description","document_type_id","is_required","dragActive","setDragActive","documentTypes","setDocumentTypes","underwriting","setUnderwriting","givingConsent","setGivingConsent","role","localStorage","getItem","isLender","isBorrower","loadApplication","loadDocumentTypes","loadUnderwriting","res","get","data","err","console","concat","log","appRes","historyRes","docsRes","messagesRes","Promise","all","catch","handleDocumentUpload","files","length","formData","FormData","Array","from","forEach","file","append","post","headers","_err$response","_err$response$data","alert","response","message","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","getStatusBadge","statusMap","submitted","variant","label","opened","under_review","further_info_required","credit_check","approved","accepted","declined","withdrawn","completed","statusInfo","children","style","container","textAlign","color","colors","textSecondary","backPath","_objectSpread","card","background","errorLight","errorDark","padding","spacing","lg","onClick","tabs","marginBottom","display","alignItems","gap","md","margin","fontSize","typography","fontWeight","bold","sm","borderBottom","gray200","xl","map","tab","border","primary","semibold","normal","cursor","base","transition","gridTemplateColumns","xs","parseFloat","proposed_loan_amount","toLocaleString","proposed_interest_rate","proposed_term_months","proposed_ltv_ratio","notes","marginTop","lineHeight","relaxed","project_details","address","town","county","postcode","funding_type","property_type","project_reference","borrower_details","company_name","user_email","lender_details","organisation_name","contact_email","medium","value","onChange","target","width","placeholder","rows","_err$response2","_err$response2$data","disabled","flexDirection","to","toLowerCase","textDecoration","borrower_consent_given","_err$response3","_err$response3$data","successLight","warningLight","borderRadius","borrower_consent_given_at","textMuted","Date","toLocaleDateString","msg","sender","primaryLight","gray50","justifyContent","sender_username","created_at","body","infoLight","risk_score","recommendation","documents_valid","documents_analyzed","summary","onDragEnter","onDragLeave","onDragOver","onDrop","gray300","document","getElementById","click","multiple","dt","name","info","doc","validation_status","flex","file_name","document_type","file_size","toFixed","uploaded_by","uploaded_at","validation_score","undefined","validation_notes","white"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/ApplicationDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport ApplicationProgress from '../components/ApplicationProgress';\r\nimport Select from '../components/Select';\r\nimport Textarea from '../components/Textarea';\r\nimport Input from '../components/Input';\r\n\r\nfunction ApplicationDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [application, setApplication] = useState(null);\r\n  const [statusHistory, setStatusHistory] = useState([]);\r\n  const [documents, setDocuments] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [updatingStatus, setUpdatingStatus] = useState(false);\r\n  const [uploadingDoc, setUploadingDoc] = useState(false);\r\n  const [statusUpdateForm, setStatusUpdateForm] = useState({ status: '', feedback: '' });\r\n  const [docUploadForm, setDocUploadForm] = useState({ description: '', document_type_id: '', is_required: false });\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [documentTypes, setDocumentTypes] = useState([]);\r\n  const [underwriting, setUnderwriting] = useState(null);\r\n  const [givingConsent, setGivingConsent] = useState(false);\r\n  const role = localStorage.getItem('role');\r\n  const isLender = role === 'Lender';\r\n  const isBorrower = role === 'Borrower';\r\n\r\n  useEffect(() => {\r\n    loadApplication();\r\n    loadDocumentTypes();\r\n    loadUnderwriting();\r\n  }, [id]);\r\n  \r\n  async function loadDocumentTypes() {\r\n    try {\r\n      const res = await api.get('/api/documents/types/?loan_type=business_finance');\r\n      setDocumentTypes(res.data || []);\r\n    } catch (err) {\r\n      console.error('Failed to load document types:', err);\r\n    }\r\n  }\r\n  \r\n  async function loadUnderwriting() {\r\n    try {\r\n      const res = await api.get(`/api/applications/${id}/underwriting/`);\r\n      setUnderwriting(res.data);\r\n    } catch (err) {\r\n      // Underwriting may not exist yet\r\n      console.log('No underwriting assessment available');\r\n    }\r\n  }\r\n\r\n  async function loadApplication() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const [appRes, historyRes, docsRes, messagesRes] = await Promise.all([\r\n        api.get(`/api/applications/${id}/`),\r\n        api.get(`/api/applications/${id}/status_history/`).catch(() => ({ data: [] })),\r\n        api.get(`/api/applications/${id}/documents/`).catch(() => ({ data: [] })),\r\n        api.get(`/api/messages/?application=${id}`).catch(() => ({ data: [] })),\r\n      ]);\r\n      setApplication(appRes.data);\r\n      setStatusHistory(historyRes.data || []);\r\n      setDocuments(docsRes.data || []);\r\n      setMessages(messagesRes.data || []);\r\n      \r\n      // Load underwriting if lender\r\n      if (role === 'Lender') {\r\n        loadUnderwriting();\r\n      }\r\n    } catch (err) {\r\n      console.error('ApplicationDetail loadApplication error:', err);\r\n      setError('Failed to load application details');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleDocumentUpload(files) {\r\n    if (!files || files.length === 0) return;\r\n    \r\n    setUploadingDoc(true);\r\n    const formData = new FormData();\r\n    Array.from(files).forEach(file => {\r\n      formData.append('files', file);\r\n    });\r\n    formData.append('description', docUploadForm.description);\r\n    if (docUploadForm.document_type_id) {\r\n      formData.append('document_type_id', docUploadForm.document_type_id);\r\n    }\r\n    formData.append('is_required', docUploadForm.is_required);\r\n    \r\n    try {\r\n      await api.post(`/api/applications/${id}/documents/`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n      await loadApplication();\r\n      await loadUnderwriting();\r\n      setDocUploadForm({ description: '', document_type_id: '', is_required: false });\r\n    } catch (err) {\r\n      console.error('Document upload error:', err);\r\n      alert('Failed to upload document: ' + (err.response?.data?.error || err.message));\r\n    } finally {\r\n      setUploadingDoc(false);\r\n    }\r\n  }\r\n\r\n  function handleDrag(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === 'dragenter' || e.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  }\r\n\r\n  function handleDrop(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      handleDocumentUpload(e.dataTransfer.files);\r\n    }\r\n  }\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusMap = {\r\n      submitted: { variant: 'info', label: 'Submitted' },\r\n      opened: { variant: 'info', label: 'Opened' },\r\n      under_review: { variant: 'warning', label: 'Under Review' },\r\n      further_info_required: { variant: 'warning', label: 'Further Info Required' },\r\n      credit_check: { variant: 'info', label: 'Credit Check' },\r\n      approved: { variant: 'success', label: 'Approved' },\r\n      accepted: { variant: 'success', label: 'Accepted' },\r\n      declined: { variant: 'error', label: 'Declined' },\r\n      withdrawn: { variant: 'info', label: 'Withdrawn' },\r\n      completed: { variant: 'success', label: 'Completed' },\r\n    };\r\n    const statusInfo = statusMap[status] || { variant: 'info', label: status };\r\n    return <Badge variant={statusInfo.variant}>{statusInfo.label}</Badge>;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={commonStyles.container}>\r\n        <p style={{ textAlign: 'center', color: theme.colors.textSecondary }}>Loading application...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !application) {\r\n    const backPath = role === 'Borrower' ? '/borrower/applications' : '/lender/applications';\r\n    return (\r\n      <div style={commonStyles.container}>\r\n        <div style={{\r\n          ...commonStyles.card,\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.lg,\r\n        }}>\r\n          <p>{error || 'Application not found'}</p>\r\n          <Button onClick={() => navigate(backPath)} variant=\"primary\">\r\n            Back to Applications\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const backPath = role === 'Borrower' ? '/borrower/applications' : '/lender/applications';\r\n\r\n  const tabs = [\r\n    { id: 'overview', label: 'Overview' },\r\n    { id: 'messages', label: `Messages (${messages.length})` },\r\n    { id: 'documents', label: `Documents (${documents.length})` },\r\n    { id: 'progress', label: 'Progress' },\r\n  ];\r\n\r\n  return (\r\n    <div style={commonStyles.container}>\r\n      <div style={{ marginBottom: theme.spacing.lg, display: 'flex', alignItems: 'center', gap: theme.spacing.md }}>\r\n        <Button onClick={() => navigate(backPath)} variant=\"outline\">\r\n          ← Back\r\n        </Button>\r\n        <h1 style={{\r\n          margin: 0,\r\n          fontSize: theme.typography.fontSize['3xl'],\r\n          fontWeight: theme.typography.fontWeight.bold,\r\n        }}>\r\n          Application #{application.id}\r\n        </h1>\r\n        {getStatusBadge(application.status)}\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: theme.spacing.sm,\r\n        borderBottom: `2px solid ${theme.colors.gray200}`,\r\n        marginBottom: theme.spacing.xl,\r\n      }}>\r\n        {tabs.map(tab => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            style={{\r\n              padding: `${theme.spacing.md} ${theme.spacing.lg}`,\r\n              background: 'transparent',\r\n              border: 'none',\r\n              borderBottom: activeTab === tab.id ? `3px solid ${theme.colors.primary}` : '3px solid transparent',\r\n              color: activeTab === tab.id ? theme.colors.primary : theme.colors.textSecondary,\r\n              fontWeight: activeTab === tab.id ? theme.typography.fontWeight.semibold : theme.typography.fontWeight.normal,\r\n              cursor: 'pointer',\r\n              fontSize: theme.typography.fontSize.base,\r\n              transition: 'all 0.2s',\r\n            }}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'overview' && (\r\n        <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: theme.spacing.xl }}>\r\n          {/* Main Details */}\r\n          <div>\r\n            {/* Application Terms */}\r\n            <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n              <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0`, fontSize: theme.typography.fontSize['2xl'] }}>\r\n                Application Terms\r\n              </h2>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md }}>\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Loan Amount:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                    £{parseFloat(application.proposed_loan_amount || 0).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Interest Rate:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                    {application.proposed_interest_rate ? `${application.proposed_interest_rate}%` : 'N/A'}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Term:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0 }}>{application.proposed_term_months} months</p>\r\n                </div>\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>LTV Ratio:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0 }}>\r\n                    {application.proposed_ltv_ratio ? `${application.proposed_ltv_ratio}%` : 'N/A'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              {application.notes && (\r\n                <div style={{ marginTop: theme.spacing.lg }}>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Notes:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0, lineHeight: theme.typography.lineHeight.relaxed }}>\r\n                    {application.notes}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Project Details */}\r\n            {application.project_details && (\r\n              <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Project Details</h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md }}>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Address:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>\r\n                      {application.project_details.address}<br />\r\n                      {application.project_details.town}, {application.project_details.county}<br />\r\n                      {application.project_details.postcode}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Funding Type:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.project_details.funding_type}</p>\r\n                    <p style={{ margin: `${theme.spacing.md} 0 ${theme.spacing.xs}`, color: theme.colors.textSecondary }}>\r\n                      <strong>Property Type:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.project_details.property_type}</p>\r\n                  </div>\r\n                </div>\r\n                {application.project_details.project_reference && (\r\n                  <div style={{ marginTop: theme.spacing.md }}>\r\n                    <Badge variant=\"info\">\r\n                      Project Reference: {application.project_details.project_reference}\r\n                    </Badge>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Borrower/Lender Details */}\r\n            {role === 'Lender' && application.borrower_details && (\r\n              <div style={commonStyles.card}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Borrower Details</h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md }}>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Company Name:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.borrower_details.company_name || 'N/A'}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Contact:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.borrower_details.user_email || 'N/A'}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {role === 'Borrower' && application.lender_details && (\r\n              <div style={commonStyles.card}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Lender Details</h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md }}>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Organisation:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.lender_details.organisation_name || 'N/A'}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Contact:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{application.lender_details.contact_email || 'N/A'}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div>\r\n            {/* Status Update (Lender only) */}\r\n            {isLender && (\r\n              <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Update Status</h3>\r\n                <div style={{ marginBottom: theme.spacing.md }}>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: theme.spacing.xs,\r\n                    fontWeight: theme.typography.fontWeight.medium,\r\n                  }}>\r\n                    New Status\r\n                  </label>\r\n                  <Select\r\n                    value={statusUpdateForm.status}\r\n                    onChange={(e) => setStatusUpdateForm({ ...statusUpdateForm, status: e.target.value })}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                    <option value=\"\">Select status...</option>\r\n                    <option value=\"opened\">Opened</option>\r\n                    <option value=\"under_review\">Under Review</option>\r\n                    <option value=\"further_info_required\">Further Information Required</option>\r\n                    <option value=\"credit_check\">Credit Check/Underwriting</option>\r\n                    <option value=\"approved\">Approved</option>\r\n                    <option value=\"accepted\">Accepted</option>\r\n                    <option value=\"declined\">Declined</option>\r\n                    <option value=\"withdrawn\">Withdrawn</option>\r\n                    <option value=\"completed\">Completed</option>\r\n                  </Select>\r\n                </div>\r\n                <div style={{ marginBottom: theme.spacing.md }}>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: theme.spacing.xs,\r\n                    fontWeight: theme.typography.fontWeight.medium,\r\n                  }}>\r\n                    Feedback/Notes (optional)\r\n                  </label>\r\n                  <Textarea\r\n                    value={statusUpdateForm.feedback}\r\n                    onChange={(e) => setStatusUpdateForm({ ...statusUpdateForm, feedback: e.target.value })}\r\n                    placeholder=\"Add feedback or notes about this status change...\"\r\n                    rows={3}\r\n                  />\r\n                </div>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  style={{ width: '100%' }}\r\n                  onClick={async () => {\r\n                    if (!statusUpdateForm.status) {\r\n                      alert('Please select a status');\r\n                      return;\r\n                    }\r\n                    setUpdatingStatus(true);\r\n                    try {\r\n                      await api.post(`/api/applications/${id}/update_status/`, {\r\n                        status: statusUpdateForm.status,\r\n                        feedback: statusUpdateForm.feedback,\r\n                      });\r\n                      await loadApplication();\r\n                      setStatusUpdateForm({ status: '', feedback: '' });\r\n                    } catch (err) {\r\n                      console.error('Status update error:', err);\r\n                      alert('Failed to update status: ' + (err.response?.data?.error || err.message));\r\n                    } finally {\r\n                      setUpdatingStatus(false);\r\n                    }\r\n                  }}\r\n                  disabled={updatingStatus || !statusUpdateForm.status}\r\n                >\r\n                  {updatingStatus ? 'Updating...' : 'Update Status'}\r\n                </Button>\r\n              </div>\r\n            )}\r\n\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Quick Actions</h3>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n                <Link \r\n                  to={`/${role.toLowerCase()}/messages?application_id=${application.id}`} \r\n                  style={{ textDecoration: 'none' }}\r\n                >\r\n                  <Button variant=\"primary\" style={{ width: '100%' }}>\r\n                    Message {role === 'Borrower' ? 'Lender' : 'Borrower'}\r\n                  </Button>\r\n                </Link>\r\n                \r\n                {/* Lender: View Borrower Information (if accepted and consent given) */}\r\n                {isLender && application.status === 'accepted' && application.borrower_consent_given && (\r\n                  <Link \r\n                    to={`/lender/applications/${application.id}/borrower-info`}\r\n                    style={{ textDecoration: 'none' }}\r\n                  >\r\n                    <Button variant=\"secondary\" style={{ width: '100%' }}>\r\n                      📋 View Borrower Information\r\n                    </Button>\r\n                  </Link>\r\n                )}\r\n                \r\n                {/* Borrower: Give Consent (if application is accepted) */}\r\n                {isBorrower && application.status === 'accepted' && !application.borrower_consent_given && (\r\n                  <Button \r\n                    variant=\"primary\" \r\n                    style={{ width: '100%' }}\r\n                    onClick={async () => {\r\n                      setGivingConsent(true);\r\n                      try {\r\n                        await api.post(`/api/applications/${id}/give_consent/`);\r\n                        await loadApplication();\r\n                        alert('Consent given successfully. The lender can now view your information.');\r\n                      } catch (err) {\r\n                        console.error('Failed to give consent:', err);\r\n                        alert('Failed to give consent: ' + (err.response?.data?.error || err.message));\r\n                      } finally {\r\n                        setGivingConsent(false);\r\n                      }\r\n                    }}\r\n                    disabled={givingConsent}\r\n                  >\r\n                    {givingConsent ? 'Processing...' : '✓ Give Consent to Share Information'}\r\n                  </Button>\r\n                )}\r\n                \r\n                {/* Borrower: Consent Status */}\r\n                {isBorrower && application.status === 'accepted' && (\r\n                  <div style={{\r\n                    padding: theme.spacing.md,\r\n                    background: application.borrower_consent_given ? theme.colors.successLight : theme.colors.warningLight,\r\n                    borderRadius: theme.borderRadius.md,\r\n                    fontSize: theme.typography.fontSize.sm,\r\n                  }}>\r\n                    <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                      {application.borrower_consent_given ? '✓ Consent Given' : '⚠️ Consent Required'}\r\n                    </p>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0 0`, fontSize: theme.typography.fontSize.xs }}>\r\n                      {application.borrower_consent_given \r\n                        ? 'Lender can view your information'\r\n                        : 'Give consent to allow lender to view your information'}\r\n                    </p>\r\n                    {application.borrower_consent_given && application.borrower_consent_given_at && (\r\n                      <p style={{ margin: `${theme.spacing.xs} 0 0`, fontSize: theme.typography.fontSize.xs, color: theme.colors.textMuted }}>\r\n                        Given on {new Date(application.borrower_consent_given_at).toLocaleDateString()}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'messages' && (\r\n        <div style={commonStyles.card}>\r\n          <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Messages</h2>\r\n          {messages.length === 0 ? (\r\n            <p style={{ color: theme.colors.textSecondary }}>No messages yet.</p>\r\n          ) : (\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n              {messages.map(msg => (\r\n                <div key={msg.id} style={{\r\n                  padding: theme.spacing.md,\r\n                  background: msg.sender === role ? theme.colors.primaryLight : theme.colors.gray50,\r\n                  borderRadius: theme.borderRadius.md,\r\n                }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: theme.spacing.xs }}>\r\n                    <strong>{msg.sender_username || 'Unknown'}</strong>\r\n                    <span style={{ fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                      {new Date(msg.created_at).toLocaleString()}\r\n                    </span>\r\n                  </div>\r\n                  <p style={{ margin: 0 }}>{msg.body}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          <div style={{ marginTop: theme.spacing.lg }}>\r\n            <Link to={`/${role.toLowerCase()}/messages?application_id=${application.id}`}>\r\n              <Button variant=\"primary\">Go to Messages</Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'documents' && (\r\n        <div>\r\n          {/* AI Underwriting Assessment (for lenders) */}\r\n          {isLender && underwriting && (\r\n            <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg, background: theme.colors.infoLight }}>\r\n              <h2 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>AI Underwriting Assessment</h2>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: theme.spacing.md, marginBottom: theme.spacing.md }}>\r\n                <div>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Risk Score</p>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize['2xl'], fontWeight: theme.typography.fontWeight.bold }}>\r\n                    {underwriting.risk_score || 'N/A'}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Recommendation</p>\r\n                  <Badge variant={underwriting.recommendation === 'approve' ? 'success' : underwriting.recommendation === 'decline' ? 'error' : 'warning'}>\r\n                    {underwriting.recommendation || 'Pending'}\r\n                  </Badge>\r\n                </div>\r\n                <div>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Documents Valid</p>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg }}>\r\n                    {underwriting.documents_valid || 0} / {underwriting.documents_analyzed || 0}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              {underwriting.summary && (\r\n                <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm }}>{underwriting.summary}</p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n            <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Upload Documents</h2>\r\n            <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n              Upload required documents for your loan application. Documents will be automatically validated and assessed.\r\n            </p>\r\n            \r\n            {/* Upload Area */}\r\n            <div\r\n              onDragEnter={handleDrag}\r\n              onDragLeave={handleDrag}\r\n              onDragOver={handleDrag}\r\n              onDrop={handleDrop}\r\n              style={{\r\n                marginBottom: theme.spacing.lg,\r\n                padding: theme.spacing.xl,\r\n                border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n                borderRadius: theme.borderRadius.md,\r\n                textAlign: 'center',\r\n                background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n              }}\r\n              onClick={() => document.getElementById('file-upload').click()}\r\n            >\r\n              <input\r\n                id=\"file-upload\"\r\n                type=\"file\"\r\n                multiple\r\n                style={{ display: 'none' }}\r\n                onChange={(e) => handleDocumentUpload(e.target.files)}\r\n              />\r\n              <div style={{ fontSize: '48px', marginBottom: theme.spacing.sm }}>📎</div>\r\n              <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold, marginBottom: theme.spacing.xs }}>\r\n                Drag and drop files here\r\n              </p>\r\n              <p style={{ margin: 0, color: theme.colors.textSecondary }}>\r\n                or click to browse • PDF, Images, Word, Excel\r\n              </p>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md, marginBottom: theme.spacing.md }}>\r\n              <div>\r\n                <label style={{ display: 'block', marginBottom: theme.spacing.xs, fontWeight: theme.typography.fontWeight.medium }}>\r\n                  Document Type\r\n                </label>\r\n                <Select\r\n                  value={docUploadForm.document_type_id}\r\n                  onChange={(e) => setDocUploadForm({ ...docUploadForm, document_type_id: e.target.value })}\r\n                  style={{ width: '100%' }}\r\n                >\r\n                  <option value=\"\">Select document type...</option>\r\n                  {documentTypes.map(dt => (\r\n                    <option key={dt.id} value={dt.id}>\r\n                      {dt.name} {dt.is_required && '(Required)'}\r\n                    </option>\r\n                  ))}\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <label style={{ display: 'block', marginBottom: theme.spacing.xs, fontWeight: theme.typography.fontWeight.medium }}>\r\n                  Description (Optional)\r\n                </label>\r\n                <Input\r\n                  name=\"description\"\r\n                  value={docUploadForm.description}\r\n                  onChange={(e) => setDocUploadForm({ ...docUploadForm, description: e.target.value })}\r\n                  placeholder=\"e.g., Q1 2024 Bank Statement\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {uploadingDoc && (\r\n              <div style={{ padding: theme.spacing.md, background: theme.colors.infoLight, borderRadius: theme.borderRadius.md, marginBottom: theme.spacing.md }}>\r\n                <p style={{ margin: 0, color: theme.colors.info }}>\r\n                  ⏳ Uploading and validating documents...\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Documents List */}\r\n          <div style={commonStyles.card}>\r\n            <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Uploaded Documents ({documents.length})</h3>\r\n            {documents.length === 0 ? (\r\n              <div style={{ textAlign: 'center', padding: theme.spacing.xl }}>\r\n                <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.md }}>\r\n                  No documents uploaded yet.\r\n                </p>\r\n                <p style={{ color: theme.colors.textMuted, fontSize: theme.typography.fontSize.sm }}>\r\n                  Required documents: Passport/ID, Utility Bill, Bank Statements, Company Accounts\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n                {documents.map(doc => (\r\n                  <div key={doc.id} style={{\r\n                    padding: theme.spacing.md,\r\n                    border: `1px solid ${theme.colors.gray200}`,\r\n                    borderRadius: theme.borderRadius.md,\r\n                    background: doc.validation_status === 'valid' ? theme.colors.successLight : \r\n                               doc.validation_status === 'invalid' ? theme.colors.errorLight : \r\n                               theme.colors.gray50,\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: theme.spacing.sm }}>\r\n                      <div style={{ flex: 1 }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: theme.spacing.sm, marginBottom: theme.spacing.xs }}>\r\n                          <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                            {doc.file_name}\r\n                          </p>\r\n                          {doc.document_type && (\r\n                            <Badge variant=\"info\" style={{ fontSize: theme.typography.fontSize.xs }}>\r\n                              {doc.document_type}\r\n                            </Badge>\r\n                          )}\r\n                          {doc.is_required && (\r\n                            <Badge variant=\"warning\" style={{ fontSize: theme.typography.fontSize.xs }}>\r\n                              Required\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        {doc.description && (\r\n                          <p style={{ margin: `${theme.spacing.xs} 0`, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                            {doc.description}\r\n                          </p>\r\n                        )}\r\n                        <div style={{ display: 'flex', gap: theme.spacing.md, marginTop: theme.spacing.xs }}>\r\n                          <span style={{ fontSize: theme.typography.fontSize.xs, color: theme.colors.textMuted }}>\r\n                            {(doc.file_size / 1024).toFixed(2)} KB\r\n                          </span>\r\n                          <span style={{ fontSize: theme.typography.fontSize.xs, color: theme.colors.textMuted }}>\r\n                            Uploaded by {doc.uploaded_by} • {new Date(doc.uploaded_at).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: theme.spacing.xs }}>\r\n                        {doc.validation_status && (\r\n                          <Badge \r\n                            variant={doc.validation_status === 'valid' ? 'success' : doc.validation_status === 'invalid' ? 'error' : 'warning'}\r\n                          >\r\n                            {doc.validation_status === 'valid' ? '✓ Valid' : \r\n                             doc.validation_status === 'invalid' ? '✗ Invalid' : \r\n                             '⏳ Validating'}\r\n                          </Badge>\r\n                        )}\r\n                        {doc.validation_score !== null && doc.validation_score !== undefined && (\r\n                          <span style={{ fontSize: theme.typography.fontSize.xs, color: theme.colors.textSecondary }}>\r\n                            Score: {doc.validation_score}/100\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    {doc.validation_notes && (\r\n                      <div style={{ \r\n                        marginTop: theme.spacing.sm, \r\n                        padding: theme.spacing.xs, \r\n                        background: theme.colors.white,\r\n                        borderRadius: theme.borderRadius.sm,\r\n                        fontSize: theme.typography.fontSize.xs,\r\n                        color: theme.colors.textSecondary \r\n                      }}>\r\n                        {doc.validation_notes}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'progress' && (\r\n        <div style={commonStyles.card}>\r\n          <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Application Progress</h2>\r\n          <ApplicationProgress application={application} statusHistory={statusHistory} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ApplicationDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}