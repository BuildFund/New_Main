{"ast":null,"code":"import _objectSpread from\"C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import api from'../api';import{theme,commonStyles}from'../styles/theme';import Select from'../components/Select';import Button from'../components/Button';import Textarea from'../components/Textarea';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function BorrowerMatches(){const navigate=useNavigate();const[searchParams]=useSearchParams();const projectIdFromUrl=searchParams.get('project_id');const[projects,setProjects]=useState([]);const[selectedProject,setSelectedProject]=useState(projectIdFromUrl||'');const[matches,setMatches]=useState([]);const[favourites,setFavourites]=useState([]);const[activeTab,setActiveTab]=useState('matches');// 'matches' or 'saved'\nconst[error,setError]=useState(null);const[loading,setLoading]=useState(false);const[favouritesLoading,setFavouritesLoading]=useState(false);const[submittingEnquiry,setSubmittingEnquiry]=useState({});const[enquiryNotes,setEnquiryNotes]=useState({});const[successMessage,setSuccessMessage]=useState(null);const[favouriteStatus,setFavouriteStatus]=useState({});// Track which products are favourited\nuseEffect(()=>{fetchProjects();if(activeTab==='saved'){loadFavourites();}},[activeTab]);// Auto-load matches if project_id is provided in URL\nuseEffect(()=>{if(projectIdFromUrl&&projects.length>0&&!matches.length){// Set the selected project and trigger match loading\nsetSelectedProject(projectIdFromUrl);loadMatchesForProject(projectIdFromUrl);}},[projectIdFromUrl,projects]);useEffect(()=>{// Check favourite status for all matches when they load\nif(matches.length>0&&selectedProject){checkFavouriteStatuses();}},[matches,selectedProject]);async function fetchProjects(){try{const res=await api.get('/api/projects/');setProjects(res.data||[]);}catch(err){setError('Failed to load projects');}}async function loadMatchesForProject(projectId){if(!projectId){setMatches([]);setLoading(false);return;}setLoading(true);setError(null);setSuccessMessage(null);try{const res=await api.get(\"/api/projects/\".concat(projectId,\"/matched-products/\"));setMatches(res.data||[]);}catch(err){var _err$response;console.error('BorrowerMatches loadMatchesForProject error:',err);console.error('Error details:',{message:err.message,response:err.response,status:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status});let errorMessage='Failed to load matched products';if(err.response){var _err$response$data,_err$response$data2;if(err.response.status===401||err.response.status===403){errorMessage='Authentication failed. Please log in again.';localStorage.removeItem('token');localStorage.removeItem('role');window.location.href='/login';return;}errorMessage=((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||((_err$response$data2=err.response.data)===null||_err$response$data2===void 0?void 0:_err$response$data2.error)||\"Server error: \".concat(err.response.status);}else if(err.request){errorMessage='Network Error: Cannot connect to backend server. Please ensure the Django server is running on http://localhost:8000';}else{errorMessage=err.message||'Unknown error';}setError(errorMessage);}finally{setLoading(false);}}async function loadFavourites(){setFavouritesLoading(true);setError(null);try{var _res$data;const res=await api.get('/api/products/favourites/');const favs=((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.results)||res.data||[];setFavourites(favs);}catch(err){console.error('Failed to load favourites:',err);setError('Failed to load saved products');}finally{setFavouritesLoading(false);}}async function checkFavouriteStatuses(){// Check which products are favourited\nconst statusChecks=matches.map(async product=>{try{const res=await api.get(\"/api/products/favourites/check/?product_id=\".concat(product.id,\"&project_id=\").concat(selectedProject||''));return{productId:product.id,favourited:res.data.favourited};}catch(err){return{productId:product.id,favourited:false};}});const results=await Promise.all(statusChecks);const statusMap={};results.forEach(_ref=>{let{productId,favourited}=_ref;statusMap[productId]=favourited;});setFavouriteStatus(statusMap);}const handleSelectProject=async e=>{const projectId=e.target.value;setSelectedProject(projectId);// Update URL to include project_id if selected, or remove it if cleared\nif(projectId){navigate(\"/borrower/matches?project_id=\".concat(projectId),{replace:true});}else{navigate('/borrower/matches',{replace:true});}loadMatchesForProject(projectId);};const handleToggleFavourite=async(productId,product)=>{try{const res=await api.post('/api/products/favourites/toggle/',{product_id:productId,project_id:selectedProject||null});setFavouriteStatus(_objectSpread(_objectSpread({},favouriteStatus),{},{[productId]:res.data.favourited}));if(res.data.favourited){setSuccessMessage(\"\\\"\".concat(product.name,\"\\\" added to saved products\"));}else{setSuccessMessage(\"\\\"\".concat(product.name,\"\\\" removed from saved products\"));}// Reload favourites if on saved tab\nif(activeTab==='saved'){loadFavourites();}// Clear success message after 3 seconds\nsetTimeout(()=>setSuccessMessage(null),3000);}catch(err){var _err$response2,_err$response2$data;console.error('Failed to toggle favourite:',err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to save product');}};const handleViewDetails=productId=>{navigate(\"/borrower/products/\".concat(productId).concat(selectedProject?\"?project_id=\".concat(selectedProject):''));};const handleApply=async productId=>{if(!selectedProject){setError('Please select a project first');return;}setSubmittingEnquiry(_objectSpread(_objectSpread({},submittingEnquiry),{},{[productId]:true}));setError(null);setSuccessMessage(null);try{const res=await api.post(\"/api/projects/\".concat(selectedProject,\"/submit-enquiry/\"),{product_id:productId,notes:enquiryNotes[productId]||''});setSuccessMessage(\"Application submitted successfully! The lender will be notified.\");// Remove the product from matches since enquiry is submitted\nsetMatches(matches.filter(p=>p.id!==productId));setEnquiryNotes(_objectSpread(_objectSpread({},enquiryNotes),{},{[productId]:''}));}catch(err){var _err$response3,_err$response3$data,_err$response4,_err$response4$data;const errorMsg=((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||'Failed to submit application';setError(errorMsg);}finally{setSubmittingEnquiry(_objectSpread(_objectSpread({},submittingEnquiry),{},{[productId]:false}));}};const renderProductRow=function(product){var _product$lender_detai;let isFavourite=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const isFavourited=favouriteStatus[product.id]||isFavourite;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid \".concat(theme.colors.gray200),cursor:'pointer'},onClick:()=>handleViewDetails(product.id),onMouseEnter:e=>{e.currentTarget.style.background=theme.colors.gray50;},onMouseLeave:e=>{e.currentTarget.style.background='transparent';},children:[/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},commonStyles.tableCell),{},{fontWeight:theme.typography.fontWeight.semibold}),children:product.name}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:((_product$lender_detai=product.lender_details)===null||_product$lender_detai===void 0?void 0:_product$lender_detai.organisation_name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:product.funding_type}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:product.property_type}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[\"\\xA3\",parseFloat(product.min_loan_amount||0).toLocaleString(),\" - \\xA3\",parseFloat(product.max_loan_amount||0).toLocaleString()]}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[product.interest_rate_min,\"% - \",product.interest_rate_max,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[product.max_ltv_ratio,\"%\"]}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:theme.spacing.xs,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleToggleFavourite(product.id,product),variant:isFavourited?\"primary\":\"outline\",size:\"sm\",title:isFavourited?\"Remove from saved\":\"Save for later\",children:isFavourited?'★ Saved':'☆ Save'}),selectedProject&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleApply(product.id),disabled:submittingEnquiry[product.id],size:\"sm\",variant:\"primary\",children:submittingEnquiry[product.id]?'Applying...':'Apply'}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleViewDetails(product.id),size:\"sm\",variant:\"outline\",children:\"View Details\"})]})})]},product.id);};return/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.xl},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:theme.typography.fontSize['4xl'],fontWeight:theme.typography.fontWeight.bold,margin:\"0 0 \".concat(theme.spacing.sm,\" 0\"),color:theme.colors.textPrimary},children:\"Matched Products\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.base,margin:0},children:\"View lender products that match your projects, save favourites, and apply\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{background:theme.colors.errorLight,color:theme.colors.errorDark,padding:theme.spacing.md,borderRadius:theme.borderRadius.md,marginBottom:theme.spacing.lg,border:\"1px solid \".concat(theme.colors.error)},children:error}),successMessage&&/*#__PURE__*/_jsx(\"div\",{style:{background:theme.colors.successLight,color:theme.colors.successDark,padding:theme.spacing.md,borderRadius:theme.borderRadius.md,marginBottom:theme.spacing.lg,border:\"1px solid \".concat(theme.colors.success)},children:successMessage}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:theme.spacing.md,marginBottom:theme.spacing.lg,borderBottom:\"2px solid \".concat(theme.colors.gray200)},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('matches'),style:{padding:\"\".concat(theme.spacing.md,\" \").concat(theme.spacing.lg),border:'none',background:'transparent',borderBottom:activeTab==='matches'?\"3px solid \".concat(theme.colors.primary):'3px solid transparent',color:activeTab==='matches'?theme.colors.primary:theme.colors.textSecondary,fontWeight:activeTab==='matches'?theme.typography.fontWeight.semibold:theme.typography.fontWeight.normal,cursor:'pointer',fontSize:theme.typography.fontSize.base},children:[\"Matches (\",matches.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('saved'),style:{padding:\"\".concat(theme.spacing.md,\" \").concat(theme.spacing.lg),border:'none',background:'transparent',borderBottom:activeTab==='saved'?\"3px solid \".concat(theme.colors.primary):'3px solid transparent',color:activeTab==='saved'?theme.colors.primary:theme.colors.textSecondary,fontWeight:activeTab==='saved'?theme.typography.fontWeight.semibold:theme.typography.fontWeight.normal,cursor:'pointer',fontSize:theme.typography.fontSize.base},children:[\"Saved (\",favourites.length,\")\"]})]}),activeTab==='matches'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{marginBottom:theme.spacing.xl}),children:/*#__PURE__*/_jsxs(Select,{label:\"Select Project\",value:selectedProject,onChange:handleSelectProject,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a project --\"}),projects.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.description||p.address||\"Project #\".concat(p.id)},p.id))]})}),selectedProject&&/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary},children:\"Loading matches...\"})}):matches.length===0?/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.lg},children:\"No matches found for this project.\"})}):/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{padding:0,overflow:'hidden'}),children:/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:commonStyles.table,children:[/*#__PURE__*/_jsx(\"thead\",{style:commonStyles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Lender\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Funding Type\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Property Type\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Loan Range (\\xA3)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Interest Rate (%)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"LTV Ratio (%)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:matches.map(product=>renderProductRow(product))})]})})})})]}),activeTab==='saved'&&/*#__PURE__*/_jsx(\"div\",{children:favouritesLoading?/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary},children:\"Loading saved products...\"})}):favourites.length===0?/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.lg},children:\"No saved products yet. Save products from the Matches tab to view them here.\"})}):/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{padding:0,overflow:'hidden'}),children:/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:commonStyles.table,children:[/*#__PURE__*/_jsx(\"thead\",{style:commonStyles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Lender\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Funding Type\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Property Type\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Loan Range (\\xA3)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Interest Rate (%)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"LTV Ratio (%)\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:favourites.map(fav=>renderProductRow(fav.product,true))})]})})})})]});}export default BorrowerMatches;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","api","theme","commonStyles","Select","Button","Textarea","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BorrowerMatches","navigate","searchParams","projectIdFromUrl","get","projects","setProjects","selectedProject","setSelectedProject","matches","setMatches","favourites","setFavourites","activeTab","setActiveTab","error","setError","loading","setLoading","favouritesLoading","setFavouritesLoading","submittingEnquiry","setSubmittingEnquiry","enquiryNotes","setEnquiryNotes","successMessage","setSuccessMessage","favouriteStatus","setFavouriteStatus","fetchProjects","loadFavourites","length","loadMatchesForProject","checkFavouriteStatuses","res","data","err","projectId","concat","_err$response","console","message","response","status","errorMessage","_err$response$data","_err$response$data2","localStorage","removeItem","window","location","href","detail","request","_res$data","favs","results","statusChecks","map","product","id","productId","favourited","Promise","all","statusMap","forEach","_ref","handleSelectProject","e","target","value","replace","handleToggleFavourite","post","product_id","project_id","_objectSpread","name","setTimeout","_err$response2","_err$response2$data","handleViewDetails","handleApply","notes","filter","p","_err$response3","_err$response3$data","_err$response4","_err$response4$data","errorMsg","renderProductRow","_product$lender_detai","isFavourite","arguments","undefined","isFavourited","style","borderBottom","colors","gray200","cursor","onClick","onMouseEnter","currentTarget","background","gray50","onMouseLeave","children","tableCell","fontWeight","typography","semibold","lender_details","organisation_name","funding_type","property_type","parseFloat","min_loan_amount","toLocaleString","max_loan_amount","interest_rate_min","interest_rate_max","max_ltv_ratio","stopPropagation","display","gap","spacing","xs","flexWrap","variant","size","title","disabled","container","marginBottom","xl","fontSize","bold","margin","sm","color","textPrimary","textSecondary","base","errorLight","errorDark","padding","md","borderRadius","lg","border","successLight","successDark","success","primary","normal","card","label","onChange","description","address","textAlign","overflow","overflowX","table","tableHeader","fav"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/BorrowerMatches.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Select from '../components/Select';\r\nimport Button from '../components/Button';\r\nimport Textarea from '../components/Textarea';\r\n\r\nfunction BorrowerMatches() {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const projectIdFromUrl = searchParams.get('project_id');\r\n  \r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(projectIdFromUrl || '');\r\n  const [matches, setMatches] = useState([]);\r\n  const [favourites, setFavourites] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('matches'); // 'matches' or 'saved'\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [favouritesLoading, setFavouritesLoading] = useState(false);\r\n  const [submittingEnquiry, setSubmittingEnquiry] = useState({});\r\n  const [enquiryNotes, setEnquiryNotes] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [favouriteStatus, setFavouriteStatus] = useState({}); // Track which products are favourited\r\n\r\n  useEffect(() => {\r\n    fetchProjects();\r\n    if (activeTab === 'saved') {\r\n      loadFavourites();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  // Auto-load matches if project_id is provided in URL\r\n  useEffect(() => {\r\n    if (projectIdFromUrl && projects.length > 0 && !matches.length) {\r\n      // Set the selected project and trigger match loading\r\n      setSelectedProject(projectIdFromUrl);\r\n      loadMatchesForProject(projectIdFromUrl);\r\n    }\r\n  }, [projectIdFromUrl, projects]);\r\n\r\n  useEffect(() => {\r\n    // Check favourite status for all matches when they load\r\n    if (matches.length > 0 && selectedProject) {\r\n      checkFavouriteStatuses();\r\n    }\r\n  }, [matches, selectedProject]);\r\n\r\n  async function fetchProjects() {\r\n    try {\r\n      const res = await api.get('/api/projects/');\r\n      setProjects(res.data || []);\r\n    } catch (err) {\r\n      setError('Failed to load projects');\r\n    }\r\n  }\r\n\r\n  async function loadMatchesForProject(projectId) {\r\n    if (!projectId) {\r\n      setMatches([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccessMessage(null);\r\n    try {\r\n      const res = await api.get(`/api/projects/${projectId}/matched-products/`);\r\n      setMatches(res.data || []);\r\n    } catch (err) {\r\n      console.error('BorrowerMatches loadMatchesForProject error:', err);\r\n      console.error('Error details:', {\r\n        message: err.message,\r\n        response: err.response,\r\n        status: err.response?.status,\r\n      });\r\n      \r\n      let errorMessage = 'Failed to load matched products';\r\n      if (err.response) {\r\n        if (err.response.status === 401 || err.response.status === 403) {\r\n          errorMessage = 'Authentication failed. Please log in again.';\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('role');\r\n          window.location.href = '/login';\r\n          return;\r\n        }\r\n        errorMessage = err.response.data?.detail || \r\n                      err.response.data?.error || \r\n                      `Server error: ${err.response.status}`;\r\n      } else if (err.request) {\r\n        errorMessage = 'Network Error: Cannot connect to backend server. Please ensure the Django server is running on http://localhost:8000';\r\n      } else {\r\n        errorMessage = err.message || 'Unknown error';\r\n      }\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function loadFavourites() {\r\n    setFavouritesLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await api.get('/api/products/favourites/');\r\n      const favs = res.data?.results || res.data || [];\r\n      setFavourites(favs);\r\n    } catch (err) {\r\n      console.error('Failed to load favourites:', err);\r\n      setError('Failed to load saved products');\r\n    } finally {\r\n      setFavouritesLoading(false);\r\n    }\r\n  }\r\n\r\n  async function checkFavouriteStatuses() {\r\n    // Check which products are favourited\r\n    const statusChecks = matches.map(async (product) => {\r\n      try {\r\n        const res = await api.get(\r\n          `/api/products/favourites/check/?product_id=${product.id}&project_id=${selectedProject || ''}`\r\n        );\r\n        return { productId: product.id, favourited: res.data.favourited };\r\n      } catch (err) {\r\n        return { productId: product.id, favourited: false };\r\n      }\r\n    });\r\n    \r\n    const results = await Promise.all(statusChecks);\r\n    const statusMap = {};\r\n    results.forEach(({ productId, favourited }) => {\r\n      statusMap[productId] = favourited;\r\n    });\r\n    setFavouriteStatus(statusMap);\r\n  }\r\n\r\n  const handleSelectProject = async (e) => {\r\n    const projectId = e.target.value;\r\n    setSelectedProject(projectId);\r\n    // Update URL to include project_id if selected, or remove it if cleared\r\n    if (projectId) {\r\n      navigate(`/borrower/matches?project_id=${projectId}`, { replace: true });\r\n    } else {\r\n      navigate('/borrower/matches', { replace: true });\r\n    }\r\n    loadMatchesForProject(projectId);\r\n  };\r\n\r\n  const handleToggleFavourite = async (productId, product) => {\r\n    try {\r\n      const res = await api.post('/api/products/favourites/toggle/', {\r\n        product_id: productId,\r\n        project_id: selectedProject || null,\r\n      });\r\n      \r\n      setFavouriteStatus({\r\n        ...favouriteStatus,\r\n        [productId]: res.data.favourited,\r\n      });\r\n      \r\n      if (res.data.favourited) {\r\n        setSuccessMessage(`\"${product.name}\" added to saved products`);\r\n      } else {\r\n        setSuccessMessage(`\"${product.name}\" removed from saved products`);\r\n      }\r\n      \r\n      // Reload favourites if on saved tab\r\n      if (activeTab === 'saved') {\r\n        loadFavourites();\r\n      }\r\n      \r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => setSuccessMessage(null), 3000);\r\n    } catch (err) {\r\n      console.error('Failed to toggle favourite:', err);\r\n      setError(err.response?.data?.error || 'Failed to save product');\r\n    }\r\n  };\r\n\r\n  const handleViewDetails = (productId) => {\r\n    navigate(`/borrower/products/${productId}${selectedProject ? `?project_id=${selectedProject}` : ''}`);\r\n  };\r\n\r\n  const handleApply = async (productId) => {\r\n    if (!selectedProject) {\r\n      setError('Please select a project first');\r\n      return;\r\n    }\r\n\r\n    setSubmittingEnquiry({ ...submittingEnquiry, [productId]: true });\r\n    setError(null);\r\n    setSuccessMessage(null);\r\n\r\n    try {\r\n      const res = await api.post(`/api/projects/${selectedProject}/submit-enquiry/`, {\r\n        product_id: productId,\r\n        notes: enquiryNotes[productId] || '',\r\n      });\r\n      \r\n      setSuccessMessage(`Application submitted successfully! The lender will be notified.`);\r\n      // Remove the product from matches since enquiry is submitted\r\n      setMatches(matches.filter(p => p.id !== productId));\r\n      setEnquiryNotes({ ...enquiryNotes, [productId]: '' });\r\n    } catch (err) {\r\n      const errorMsg = err.response?.data?.error || err.response?.data?.detail || 'Failed to submit application';\r\n      setError(errorMsg);\r\n    } finally {\r\n      setSubmittingEnquiry({ ...submittingEnquiry, [productId]: false });\r\n    }\r\n  };\r\n\r\n  const renderProductRow = (product, isFavourite = false) => {\r\n    const isFavourited = favouriteStatus[product.id] || isFavourite;\r\n    \r\n    return (\r\n      <tr \r\n        key={product.id} \r\n        style={{ \r\n          borderBottom: `1px solid ${theme.colors.gray200}`,\r\n          cursor: 'pointer',\r\n        }}\r\n        onClick={() => handleViewDetails(product.id)}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.background = theme.colors.gray50;\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.background = 'transparent';\r\n        }}\r\n      >\r\n        <td style={{ ...commonStyles.tableCell, fontWeight: theme.typography.fontWeight.semibold }}>\r\n          {product.name}\r\n        </td>\r\n        <td style={commonStyles.tableCell}>\r\n          {product.lender_details?.organisation_name || 'N/A'}\r\n        </td>\r\n        <td style={commonStyles.tableCell}>{product.funding_type}</td>\r\n        <td style={commonStyles.tableCell}>{product.property_type}</td>\r\n        <td style={commonStyles.tableCell}>\r\n          £{parseFloat(product.min_loan_amount || 0).toLocaleString()} - £{parseFloat(product.max_loan_amount || 0).toLocaleString()}\r\n        </td>\r\n        <td style={commonStyles.tableCell}>\r\n          {product.interest_rate_min}% - {product.interest_rate_max}%\r\n        </td>\r\n        <td style={commonStyles.tableCell}>{product.max_ltv_ratio}%</td>\r\n        <td \r\n          style={commonStyles.tableCell} \r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <div style={{ display: 'flex', gap: theme.spacing.xs, flexWrap: 'wrap' }}>\r\n            <Button\r\n              onClick={() => handleToggleFavourite(product.id, product)}\r\n              variant={isFavourited ? \"primary\" : \"outline\"}\r\n              size=\"sm\"\r\n              title={isFavourited ? \"Remove from saved\" : \"Save for later\"}\r\n            >\r\n              {isFavourited ? '★ Saved' : '☆ Save'}\r\n            </Button>\r\n            {selectedProject && (\r\n              <Button\r\n                onClick={() => handleApply(product.id)}\r\n                disabled={submittingEnquiry[product.id]}\r\n                size=\"sm\"\r\n                variant=\"primary\"\r\n              >\r\n                {submittingEnquiry[product.id] ? 'Applying...' : 'Apply'}\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={() => handleViewDetails(product.id)}\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n            >\r\n              View Details\r\n            </Button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={commonStyles.container}>\r\n      <div style={{ marginBottom: theme.spacing.xl }}>\r\n        <h1 style={{\r\n          fontSize: theme.typography.fontSize['4xl'],\r\n          fontWeight: theme.typography.fontWeight.bold,\r\n          margin: `0 0 ${theme.spacing.sm} 0`,\r\n          color: theme.colors.textPrimary,\r\n        }}>\r\n          Matched Products\r\n        </h1>\r\n        <p style={{\r\n          color: theme.colors.textSecondary,\r\n          fontSize: theme.typography.fontSize.base,\r\n          margin: 0,\r\n        }}>\r\n          View lender products that match your projects, save favourites, and apply\r\n        </p>\r\n      </div>\r\n\r\n      {error && (\r\n        <div style={{\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.error}`,\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div style={{\r\n          background: theme.colors.successLight,\r\n          color: theme.colors.successDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.success}`,\r\n        }}>\r\n          {successMessage}\r\n        </div>\r\n      )}\r\n\r\n      {/* Tabs */}\r\n      <div style={{ \r\n        display: 'flex', \r\n        gap: theme.spacing.md, \r\n        marginBottom: theme.spacing.lg,\r\n        borderBottom: `2px solid ${theme.colors.gray200}`,\r\n      }}>\r\n        <button\r\n          onClick={() => setActiveTab('matches')}\r\n          style={{\r\n            padding: `${theme.spacing.md} ${theme.spacing.lg}`,\r\n            border: 'none',\r\n            background: 'transparent',\r\n            borderBottom: activeTab === 'matches' ? `3px solid ${theme.colors.primary}` : '3px solid transparent',\r\n            color: activeTab === 'matches' ? theme.colors.primary : theme.colors.textSecondary,\r\n            fontWeight: activeTab === 'matches' ? theme.typography.fontWeight.semibold : theme.typography.fontWeight.normal,\r\n            cursor: 'pointer',\r\n            fontSize: theme.typography.fontSize.base,\r\n          }}\r\n        >\r\n          Matches ({matches.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('saved')}\r\n          style={{\r\n            padding: `${theme.spacing.md} ${theme.spacing.lg}`,\r\n            border: 'none',\r\n            background: 'transparent',\r\n            borderBottom: activeTab === 'saved' ? `3px solid ${theme.colors.primary}` : '3px solid transparent',\r\n            color: activeTab === 'saved' ? theme.colors.primary : theme.colors.textSecondary,\r\n            fontWeight: activeTab === 'saved' ? theme.typography.fontWeight.semibold : theme.typography.fontWeight.normal,\r\n            cursor: 'pointer',\r\n            fontSize: theme.typography.fontSize.base,\r\n          }}\r\n        >\r\n          Saved ({favourites.length})\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === 'matches' && (\r\n        <>\r\n          <div style={{ ...commonStyles.card, marginBottom: theme.spacing.xl }}>\r\n            <Select\r\n              label=\"Select Project\"\r\n              value={selectedProject}\r\n              onChange={handleSelectProject}\r\n            >\r\n              <option value=\"\">-- Select a project --</option>\r\n              {projects.map((p) => (\r\n                <option key={p.id} value={p.id}>\r\n                  {p.description || p.address || `Project #${p.id}`}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n\r\n          {selectedProject && (\r\n            <div>\r\n              {loading ? (\r\n                <div style={{ ...commonStyles.card, textAlign: 'center', padding: theme.spacing['2xl'] }}>\r\n                  <p style={{ color: theme.colors.textSecondary }}>Loading matches...</p>\r\n                </div>\r\n              ) : matches.length === 0 ? (\r\n                <div style={{ ...commonStyles.card, textAlign: 'center', padding: theme.spacing['2xl'] }}>\r\n                  <p style={{ color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.lg }}>\r\n                    No matches found for this project.\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div style={{ ...commonStyles.card, padding: 0, overflow: 'hidden' }}>\r\n                  <div style={{ overflowX: 'auto' }}>\r\n                    <table style={commonStyles.table}>\r\n                      <thead style={commonStyles.tableHeader}>\r\n                        <tr>\r\n                          <th style={commonStyles.tableCell}>Product Name</th>\r\n                          <th style={commonStyles.tableCell}>Lender</th>\r\n                          <th style={commonStyles.tableCell}>Funding Type</th>\r\n                          <th style={commonStyles.tableCell}>Property Type</th>\r\n                          <th style={commonStyles.tableCell}>Loan Range (£)</th>\r\n                          <th style={commonStyles.tableCell}>Interest Rate (%)</th>\r\n                          <th style={commonStyles.tableCell}>LTV Ratio (%)</th>\r\n                          <th style={commonStyles.tableCell}>Actions</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {matches.map((product) => renderProductRow(product))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {activeTab === 'saved' && (\r\n        <div>\r\n          {favouritesLoading ? (\r\n            <div style={{ ...commonStyles.card, textAlign: 'center', padding: theme.spacing['2xl'] }}>\r\n              <p style={{ color: theme.colors.textSecondary }}>Loading saved products...</p>\r\n            </div>\r\n          ) : favourites.length === 0 ? (\r\n            <div style={{ ...commonStyles.card, textAlign: 'center', padding: theme.spacing['2xl'] }}>\r\n              <p style={{ color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.lg }}>\r\n                No saved products yet. Save products from the Matches tab to view them here.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div style={{ ...commonStyles.card, padding: 0, overflow: 'hidden' }}>\r\n              <div style={{ overflowX: 'auto' }}>\r\n                <table style={commonStyles.table}>\r\n                  <thead style={commonStyles.tableHeader}>\r\n                    <tr>\r\n                      <th style={commonStyles.tableCell}>Product Name</th>\r\n                      <th style={commonStyles.tableCell}>Lender</th>\r\n                      <th style={commonStyles.tableCell}>Funding Type</th>\r\n                      <th style={commonStyles.tableCell}>Property Type</th>\r\n                      <th style={commonStyles.tableCell}>Loan Range (£)</th>\r\n                      <th style={commonStyles.tableCell}>Interest Rate (%)</th>\r\n                      <th style={commonStyles.tableCell}>LTV Ratio (%)</th>\r\n                      <th style={commonStyles.tableCell}>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {favourites.map((fav) => renderProductRow(fav.product, true))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BorrowerMatches;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}