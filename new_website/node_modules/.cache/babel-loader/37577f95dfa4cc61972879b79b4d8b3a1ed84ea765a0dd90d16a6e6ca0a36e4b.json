{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paul-\\\\OneDrive - BARE Capital Ltd\\\\BARE Drive\\\\10.0 BUILDFUND\\\\1.0 Website Dev\\\\GitHub\\\\new_website\\\\src\\\\components\\\\TaskBoard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../api';\nimport { theme, commonStyles } from '../styles/theme';\nimport Button from './Button';\nimport Badge from './Badge';\nimport { CheckCircle, Clock, AlertCircle, Lock, Send, Filter } from 'lucide-react';\n\n/**\r\n * Task Board component - Shows tasks organized by stage with filters\r\n * Chunk 6: Timeline + Task engine\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TaskBoard({\n  dealId\n}) {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [stages, setStages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeFilter, setActiveFilter] = useState('all');\n  const [chasingTaskId, setChasingTaskId] = useState(null);\n  useEffect(() => {\n    loadTasks();\n    loadStages();\n  }, [dealId, activeFilter]);\n  async function loadTasks() {\n    setLoading(true);\n    setError(null);\n    try {\n      let url = `/api/deal-tasks/?deal_id=${dealId}`;\n      if (activeFilter !== 'all') {\n        url = `/api/deal-tasks/filters/?deal_id=${dealId}&filter=${activeFilter}`;\n      }\n      const res = await api.get(url);\n      setTasks(res.data || []);\n    } catch (err) {\n      console.error('Failed to load tasks:', err);\n      setError('Failed to load tasks');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function loadStages() {\n    try {\n      var _stagesRes$data;\n      const dealRes = await api.get(`/api/deals/${dealId}/`);\n      // Load stages from deal\n      const stagesRes = await api.get(`/api/deals/${dealId}/timeline/`);\n      setStages(((_stagesRes$data = stagesRes.data) === null || _stagesRes$data === void 0 ? void 0 : _stagesRes$data.stages) || []);\n    } catch (err) {\n      console.error('Failed to load stages:', err);\n    }\n  }\n  async function handleCompleteTask(taskId) {\n    try {\n      await api.post(`/api/deal-tasks/${taskId}/complete/`);\n      loadTasks(); // Reload tasks\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error('Failed to complete task:', err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to complete task. ' + ((_err$response2 = err.response) !== null && _err$response2 !== void 0 && (_err$response2$data = _err$response2.data) !== null && _err$response2$data !== void 0 && _err$response2$data.blocking_tasks ? `Blocked by: ${err.response.data.blocking_tasks.join(', ')}` : ''));\n    }\n  }\n  async function handleChaseTask(taskId) {\n    setChasingTaskId(taskId);\n    try {\n      const res = await api.post(`/api/deal-tasks/${taskId}/chase/`);\n      alert(res.data.message || 'Chase reminder sent');\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Failed to send chase:', err);\n      alert(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to send chase reminder');\n    } finally {\n      setChasingTaskId(null);\n    }\n  }\n  const getTaskStatusIcon = status => {\n    switch (status) {\n      case 'completed':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          size: 16,\n          color: theme.colors.success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 16\n        }, this);\n      case 'in_progress':\n        return /*#__PURE__*/_jsxDEV(Clock, {\n          size: 16,\n          color: theme.colors.primary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }, this);\n      case 'blocked':\n        return /*#__PURE__*/_jsxDEV(Lock, {\n          size: 16,\n          color: theme.colors.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Clock, {\n          size: 16,\n          color: theme.colors.textSecondary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getTaskStatusBadge = task => {\n    if (task.is_overdue) {\n      return {\n        variant: 'error',\n        label: 'Overdue'\n      };\n    }\n    const statusMap = {\n      completed: {\n        variant: 'success',\n        label: 'Completed'\n      },\n      in_progress: {\n        variant: 'info',\n        label: 'In Progress'\n      },\n      blocked: {\n        variant: 'error',\n        label: 'Blocked'\n      },\n      pending: {\n        variant: 'secondary',\n        label: 'Pending'\n      },\n      cancelled: {\n        variant: 'secondary',\n        label: 'Cancelled'\n      }\n    };\n    return statusMap[task.status] || {\n      variant: 'secondary',\n      label: task.status_display\n    };\n  };\n  const getPriorityBadge = priority => {\n    const priorityMap = {\n      critical: {\n        variant: 'error',\n        label: 'Critical'\n      },\n      high: {\n        variant: 'warning',\n        label: 'High'\n      },\n      medium: {\n        variant: 'info',\n        label: 'Medium'\n      },\n      low: {\n        variant: 'secondary',\n        label: 'Low'\n      }\n    };\n    return priorityMap[priority] || {\n      variant: 'secondary',\n      label: priority\n    };\n  };\n\n  // Group tasks by stage\n  const tasksByStage = {};\n  tasks.forEach(task => {\n    const stageId = task.stage;\n    if (!tasksByStage[stageId]) {\n      tasksByStage[stageId] = [];\n    }\n    tasksByStage[stageId].push(task);\n  });\n  const filters = [{\n    id: 'all',\n    label: 'All Tasks'\n  }, {\n    id: 'overdue',\n    label: 'Overdue'\n  }, {\n    id: 'awaiting_review',\n    label: 'Awaiting Review'\n  }, {\n    id: 'critical_path',\n    label: 'Critical Path'\n  }, {\n    id: 'blocked',\n    label: 'Blocked'\n  }];\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: theme.colors.textSecondary\n      },\n      children: \"Loading tasks...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...commonStyles.alertError,\n        marginBottom: theme.spacing.lg\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...commonStyles.card,\n        marginBottom: theme.spacing.lg\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: theme.spacing.md,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Filter, {\n          size: 18,\n          color: theme.colors.textSecondary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: theme.typography.fontWeight.semibold\n          },\n          children: \"Filter:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), filters.map(filter => /*#__PURE__*/_jsxDEV(Button, {\n          variant: activeFilter === filter.id ? 'primary' : 'outline',\n          size: \"sm\",\n          onClick: () => setActiveFilter(filter.id),\n          children: filter.label\n        }, filter.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), stages.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing.xl\n      },\n      children: stages.map(stage => {\n        const stageTasks = tasksByStage[stage.id] || [];\n        if (activeFilter !== 'all' && stageTasks.length === 0) {\n          return null; // Don't show empty stages when filtering\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: 0\n              },\n              children: [\"Stage \", stage.stage_number, \": \", stage.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Badge, {\n              variant: stage.status === 'in_progress' ? 'info' : 'secondary',\n              children: [stageTasks.length, \" task\", stageTasks.length !== 1 ? 's' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }, this), stageTasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: theme.colors.textSecondary,\n              fontStyle: 'italic'\n            },\n            children: \"No tasks in this stage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: theme.spacing.md\n            },\n            children: stageTasks.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: theme.spacing.md,\n                border: `1px solid ${theme.colors.gray200}`,\n                borderRadius: theme.borderRadius.md,\n                background: task.is_overdue ? theme.colors.errorLight : theme.colors.white\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  marginBottom: theme.spacing.xs\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: theme.spacing.xs,\n                      marginBottom: theme.spacing.xs\n                    },\n                    children: [getTaskStatusIcon(task.status), /*#__PURE__*/_jsxDEV(\"h4\", {\n                      style: {\n                        margin: 0,\n                        flex: 1\n                      },\n                      children: task.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                      variant: getTaskStatusBadge(task).variant,\n                      children: getTaskStatusBadge(task).label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 31\n                    }, this), task.priority && /*#__PURE__*/_jsxDEV(Badge, {\n                      variant: getPriorityBadge(task.priority).variant,\n                      children: getPriorityBadge(task.priority).label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 29\n                  }, this), task.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: `0 0 ${theme.spacing.xs} 0`,\n                      color: theme.colors.textSecondary,\n                      fontSize: theme.typography.fontSize.sm\n                    },\n                    children: task.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: theme.spacing.md,\n                      fontSize: theme.typography.fontSize.sm,\n                      color: theme.colors.textSecondary,\n                      flexWrap: 'wrap'\n                    },\n                    children: [task.assignee_name && /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Assignee: \", task.assignee_name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 33\n                    }, this), task.due_date && /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Due: \", new Date(task.due_date).toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 33\n                    }, this), task.owner_party_type && /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Owner: \", task.owner_party_type]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 29\n                  }, this), task.blocked_by && task.blocked_by.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      marginTop: theme.spacing.xs,\n                      padding: theme.spacing.xs,\n                      background: theme.colors.warningLight,\n                      borderRadius: theme.borderRadius.sm\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: 0,\n                        fontSize: theme.typography.fontSize.sm,\n                        fontWeight: theme.typography.fontWeight.semibold\n                      },\n                      children: \"Blocked by:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                      style: {\n                        margin: 0,\n                        paddingLeft: theme.spacing.lg,\n                        fontSize: theme.typography.fontSize.sm\n                      },\n                      children: task.blocked_by.map(blocker => /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [blocker.title, \" (\", blocker.status, \")\"]\n                      }, blocker.id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 37\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 31\n                  }, this), task.dependencies_list && task.dependencies_list.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      marginTop: theme.spacing.xs,\n                      fontSize: theme.typography.fontSize.sm,\n                      color: theme.colors.textSecondary\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Depends on: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 244,\n                      columnNumber: 33\n                    }, this), task.dependencies_list.map((dep, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [dep.title, \" \", dep.status === 'completed' ? '✓' : '⏳', idx < task.dependencies_list.length - 1 && ', ']\n                    }, dep.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 35\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: theme.spacing.sm,\n                  marginTop: theme.spacing.sm\n                },\n                children: task.status !== 'completed' && task.status !== 'cancelled' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"success\",\n                    size: \"sm\",\n                    onClick: () => handleCompleteTask(task.id),\n                    disabled: task.blocked_by && task.blocked_by.length > 0,\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                      size: 14,\n                      style: {\n                        marginRight: theme.spacing.xs\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 33\n                    }, this), \"Complete\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline\",\n                    size: \"sm\",\n                    onClick: () => handleChaseTask(task.id),\n                    disabled: chasingTaskId === task.id,\n                    children: [/*#__PURE__*/_jsxDEV(Send, {\n                      size: 14,\n                      style: {\n                        marginRight: theme.spacing.xs\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 33\n                    }, this), chasingTaskId === task.id ? 'Sending...' : 'Chase']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 25\n              }, this)]\n            }, task.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 19\n          }, this)]\n        }, stage.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: commonStyles.card,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary\n        },\n        children: \"No tasks found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n_s(TaskBoard, \"vpUyiae8BEpbO2d3NXYDO1UzNZQ=\");\n_c = TaskBoard;\nexport default TaskBoard;\nvar _c;\n$RefreshReg$(_c, \"TaskBoard\");","map":{"version":3,"names":["React","useEffect","useState","api","theme","commonStyles","Button","Badge","CheckCircle","Clock","AlertCircle","Lock","Send","Filter","jsxDEV","_jsxDEV","Fragment","_Fragment","TaskBoard","dealId","_s","tasks","setTasks","stages","setStages","loading","setLoading","error","setError","activeFilter","setActiveFilter","chasingTaskId","setChasingTaskId","loadTasks","loadStages","url","res","get","data","err","console","_stagesRes$data","dealRes","stagesRes","handleCompleteTask","taskId","post","_err$response","_err$response$data","_err$response2","_err$response2$data","alert","response","blocking_tasks","join","handleChaseTask","message","_err$response3","_err$response3$data","getTaskStatusIcon","status","size","color","colors","success","fileName","_jsxFileName","lineNumber","columnNumber","primary","textSecondary","getTaskStatusBadge","task","is_overdue","variant","label","statusMap","completed","in_progress","blocked","pending","cancelled","status_display","getPriorityBadge","priority","priorityMap","critical","high","medium","low","tasksByStage","forEach","stageId","stage","push","filters","id","style","children","alertError","marginBottom","spacing","lg","card","display","alignItems","gap","md","flexWrap","fontWeight","typography","semibold","map","filter","onClick","length","flexDirection","xl","stageTasks","justifyContent","margin","stage_number","name","fontStyle","padding","border","gray200","borderRadius","background","errorLight","white","xs","flex","title","description","fontSize","sm","assignee_name","due_date","Date","toLocaleString","owner_party_type","blocked_by","marginTop","warningLight","paddingLeft","blocker","dependencies_list","dep","idx","disabled","marginRight","_c","$RefreshReg$"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/components/TaskBoard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Button from './Button';\r\nimport Badge from './Badge';\r\nimport { CheckCircle, Clock, AlertCircle, Lock, Send, Filter } from 'lucide-react';\r\n\r\n/**\r\n * Task Board component - Shows tasks organized by stage with filters\r\n * Chunk 6: Timeline + Task engine\r\n */\r\nfunction TaskBoard({ dealId }) {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [stages, setStages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [activeFilter, setActiveFilter] = useState('all');\r\n  const [chasingTaskId, setChasingTaskId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadTasks();\r\n    loadStages();\r\n  }, [dealId, activeFilter]);\r\n\r\n  async function loadTasks() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      let url = `/api/deal-tasks/?deal_id=${dealId}`;\r\n      if (activeFilter !== 'all') {\r\n        url = `/api/deal-tasks/filters/?deal_id=${dealId}&filter=${activeFilter}`;\r\n      }\r\n      const res = await api.get(url);\r\n      setTasks(res.data || []);\r\n    } catch (err) {\r\n      console.error('Failed to load tasks:', err);\r\n      setError('Failed to load tasks');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function loadStages() {\r\n    try {\r\n      const dealRes = await api.get(`/api/deals/${dealId}/`);\r\n      // Load stages from deal\r\n      const stagesRes = await api.get(`/api/deals/${dealId}/timeline/`);\r\n      setStages(stagesRes.data?.stages || []);\r\n    } catch (err) {\r\n      console.error('Failed to load stages:', err);\r\n    }\r\n  }\r\n\r\n  async function handleCompleteTask(taskId) {\r\n    try {\r\n      await api.post(`/api/deal-tasks/${taskId}/complete/`);\r\n      loadTasks(); // Reload tasks\r\n    } catch (err) {\r\n      console.error('Failed to complete task:', err);\r\n      alert(err.response?.data?.error || 'Failed to complete task. ' + (err.response?.data?.blocking_tasks ? `Blocked by: ${err.response.data.blocking_tasks.join(', ')}` : ''));\r\n    }\r\n  }\r\n\r\n  async function handleChaseTask(taskId) {\r\n    setChasingTaskId(taskId);\r\n    try {\r\n      const res = await api.post(`/api/deal-tasks/${taskId}/chase/`);\r\n      alert(res.data.message || 'Chase reminder sent');\r\n    } catch (err) {\r\n      console.error('Failed to send chase:', err);\r\n      alert(err.response?.data?.error || 'Failed to send chase reminder');\r\n    } finally {\r\n      setChasingTaskId(null);\r\n    }\r\n  }\r\n\r\n  const getTaskStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <CheckCircle size={16} color={theme.colors.success} />;\r\n      case 'in_progress':\r\n        return <Clock size={16} color={theme.colors.primary} />;\r\n      case 'blocked':\r\n        return <Lock size={16} color={theme.colors.error} />;\r\n      default:\r\n        return <Clock size={16} color={theme.colors.textSecondary} />;\r\n    }\r\n  };\r\n\r\n  const getTaskStatusBadge = (task) => {\r\n    if (task.is_overdue) {\r\n      return { variant: 'error', label: 'Overdue' };\r\n    }\r\n    const statusMap = {\r\n      completed: { variant: 'success', label: 'Completed' },\r\n      in_progress: { variant: 'info', label: 'In Progress' },\r\n      blocked: { variant: 'error', label: 'Blocked' },\r\n      pending: { variant: 'secondary', label: 'Pending' },\r\n      cancelled: { variant: 'secondary', label: 'Cancelled' },\r\n    };\r\n    return statusMap[task.status] || { variant: 'secondary', label: task.status_display };\r\n  };\r\n\r\n  const getPriorityBadge = (priority) => {\r\n    const priorityMap = {\r\n      critical: { variant: 'error', label: 'Critical' },\r\n      high: { variant: 'warning', label: 'High' },\r\n      medium: { variant: 'info', label: 'Medium' },\r\n      low: { variant: 'secondary', label: 'Low' },\r\n    };\r\n    return priorityMap[priority] || { variant: 'secondary', label: priority };\r\n  };\r\n\r\n  // Group tasks by stage\r\n  const tasksByStage = {};\r\n  tasks.forEach(task => {\r\n    const stageId = task.stage;\r\n    if (!tasksByStage[stageId]) {\r\n      tasksByStage[stageId] = [];\r\n    }\r\n    tasksByStage[stageId].push(task);\r\n  });\r\n\r\n  const filters = [\r\n    { id: 'all', label: 'All Tasks' },\r\n    { id: 'overdue', label: 'Overdue' },\r\n    { id: 'awaiting_review', label: 'Awaiting Review' },\r\n    { id: 'critical_path', label: 'Critical Path' },\r\n    { id: 'blocked', label: 'Blocked' },\r\n  ];\r\n\r\n  if (loading) {\r\n    return <p style={{ color: theme.colors.textSecondary }}>Loading tasks...</p>;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ ...commonStyles.alertError, marginBottom: theme.spacing.lg }}>\r\n        {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Filters */}\r\n      <div style={{ ...commonStyles.card, marginBottom: theme.spacing.lg }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: theme.spacing.md, flexWrap: 'wrap' }}>\r\n          <Filter size={18} color={theme.colors.textSecondary} />\r\n          <span style={{ fontWeight: theme.typography.fontWeight.semibold }}>Filter:</span>\r\n          {filters.map(filter => (\r\n            <Button\r\n              key={filter.id}\r\n              variant={activeFilter === filter.id ? 'primary' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => setActiveFilter(filter.id)}\r\n            >\r\n              {filter.label}\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tasks by Stage */}\r\n      {stages.length > 0 ? (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.xl }}>\r\n          {stages.map(stage => {\r\n            const stageTasks = tasksByStage[stage.id] || [];\r\n            if (activeFilter !== 'all' && stageTasks.length === 0) {\r\n              return null; // Don't show empty stages when filtering\r\n            }\r\n\r\n            return (\r\n              <div key={stage.id} style={commonStyles.card}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: theme.spacing.md }}>\r\n                  <h3 style={{ margin: 0 }}>\r\n                    Stage {stage.stage_number}: {stage.name}\r\n                  </h3>\r\n                  <Badge variant={stage.status === 'in_progress' ? 'info' : 'secondary'}>\r\n                    {stageTasks.length} task{stageTasks.length !== 1 ? 's' : ''}\r\n                  </Badge>\r\n                </div>\r\n\r\n                {stageTasks.length === 0 ? (\r\n                  <p style={{ color: theme.colors.textSecondary, fontStyle: 'italic' }}>\r\n                    No tasks in this stage\r\n                  </p>\r\n                ) : (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n                    {stageTasks.map(task => (\r\n                      <div\r\n                        key={task.id}\r\n                        style={{\r\n                          padding: theme.spacing.md,\r\n                          border: `1px solid ${theme.colors.gray200}`,\r\n                          borderRadius: theme.borderRadius.md,\r\n                          background: task.is_overdue ? theme.colors.errorLight : theme.colors.white,\r\n                        }}\r\n                      >\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: theme.spacing.xs }}>\r\n                          <div style={{ flex: 1 }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs, marginBottom: theme.spacing.xs }}>\r\n                              {getTaskStatusIcon(task.status)}\r\n                              <h4 style={{ margin: 0, flex: 1 }}>{task.title}</h4>\r\n                              <Badge variant={getTaskStatusBadge(task).variant}>\r\n                                {getTaskStatusBadge(task).label}\r\n                              </Badge>\r\n                              {task.priority && (\r\n                                <Badge variant={getPriorityBadge(task.priority).variant}>\r\n                                  {getPriorityBadge(task.priority).label}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                            {task.description && (\r\n                              <p style={{ margin: `0 0 ${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                                {task.description}\r\n                              </p>\r\n                            )}\r\n                            <div style={{ display: 'flex', gap: theme.spacing.md, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary, flexWrap: 'wrap' }}>\r\n                              {task.assignee_name && (\r\n                                <span>Assignee: {task.assignee_name}</span>\r\n                              )}\r\n                              {task.due_date && (\r\n                                <span>Due: {new Date(task.due_date).toLocaleString()}</span>\r\n                              )}\r\n                              {task.owner_party_type && (\r\n                                <span>Owner: {task.owner_party_type}</span>\r\n                              )}\r\n                            </div>\r\n                            {task.blocked_by && task.blocked_by.length > 0 && (\r\n                              <div style={{ marginTop: theme.spacing.xs, padding: theme.spacing.xs, background: theme.colors.warningLight, borderRadius: theme.borderRadius.sm }}>\r\n                                <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                                  Blocked by:\r\n                                </p>\r\n                                <ul style={{ margin: 0, paddingLeft: theme.spacing.lg, fontSize: theme.typography.fontSize.sm }}>\r\n                                  {task.blocked_by.map(blocker => (\r\n                                    <li key={blocker.id}>{blocker.title} ({blocker.status})</li>\r\n                                  ))}\r\n                                </ul>\r\n                              </div>\r\n                            )}\r\n                            {task.dependencies_list && task.dependencies_list.length > 0 && (\r\n                              <div style={{ marginTop: theme.spacing.xs, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                                <span>Depends on: </span>\r\n                                {task.dependencies_list.map((dep, idx) => (\r\n                                  <span key={dep.id}>\r\n                                    {dep.title} {dep.status === 'completed' ? '✓' : '⏳'}\r\n                                    {idx < task.dependencies_list.length - 1 && ', '}\r\n                                  </span>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.sm }}>\r\n                          {task.status !== 'completed' && task.status !== 'cancelled' && (\r\n                            <>\r\n                              <Button\r\n                                variant=\"success\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleCompleteTask(task.id)}\r\n                                disabled={task.blocked_by && task.blocked_by.length > 0}\r\n                              >\r\n                                <CheckCircle size={14} style={{ marginRight: theme.spacing.xs }} />\r\n                                Complete\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleChaseTask(task.id)}\r\n                                disabled={chasingTaskId === task.id}\r\n                              >\r\n                                <Send size={14} style={{ marginRight: theme.spacing.xs }} />\r\n                                {chasingTaskId === task.id ? 'Sending...' : 'Chase'}\r\n                              </Button>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div style={commonStyles.card}>\r\n          <p style={{ color: theme.colors.textSecondary }}>No tasks found</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TaskBoard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}