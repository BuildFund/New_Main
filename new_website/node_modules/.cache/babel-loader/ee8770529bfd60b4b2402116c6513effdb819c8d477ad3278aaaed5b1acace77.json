{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paul-\\\\OneDrive - BARE Capital Ltd\\\\BARE Drive\\\\10.0 BUILDFUND\\\\1.0 Website Dev\\\\GitHub\\\\new_website\\\\src\\\\pages\\\\BorrowerProductDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport api from '../api';\nimport { theme, commonStyles } from '../styles/theme';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport Textarea from '../components/Textarea';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BorrowerProductDetail() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const projectId = searchParams.get('project_id');\n  const [product, setProduct] = useState(null);\n  const [lender, setLender] = useState(null);\n  const [isFavourited, setIsFavourited] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [applying, setApplying] = useState(false);\n  const [enquiryNotes, setEnquiryNotes] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  useEffect(() => {\n    loadProduct();\n    if (projectId) {\n      checkFavouriteStatus();\n    }\n  }, [id, projectId]);\n  async function loadProduct() {\n    setLoading(true);\n    setError(null);\n    try {\n      const productRes = await api.get(`/api/products/${id}/`);\n      setProduct(productRes.data);\n\n      // Lender details should be included in product response, but try separate endpoint as fallback\n      if (productRes.data.lender_details) {\n        setLender(productRes.data.lender_details);\n      } else {\n        try {\n          const lenderRes = await api.get(`/api/products/${id}/lender-details/`);\n          setLender(lenderRes.data);\n        } catch (lenderErr) {\n          console.warn('Failed to load lender details separately:', lenderErr);\n          // Continue without separate lender details - product data should have lender info\n          if (productRes.data.lender) {\n            // If lender is just an ID, we'll show what we have\n            setLender({\n              id: productRes.data.lender\n            });\n          }\n        }\n      }\n    } catch (err) {\n      var _err$response;\n      console.error('BorrowerProductDetail loadProduct error:', err);\n      console.error('Error details:', {\n        message: err.message,\n        response: err.response,\n        status: (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status\n      });\n      let errorMessage = 'Failed to load product details';\n      if (err.response) {\n        if (err.response.status === 404) {\n          errorMessage = 'Product not found';\n        } else if (err.response.status === 401 || err.response.status === 403) {\n          errorMessage = 'Authentication failed. Please log in again.';\n          localStorage.removeItem('token');\n          localStorage.removeItem('role');\n          window.location.href = '/login';\n          return;\n        } else {\n          var _err$response$data, _err$response$data2;\n          errorMessage = ((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || ((_err$response$data2 = err.response.data) === null || _err$response$data2 === void 0 ? void 0 : _err$response$data2.error) || `Server error: ${err.response.status}`;\n        }\n      } else if (err.request) {\n        errorMessage = 'Network Error: Cannot connect to backend server';\n      } else {\n        errorMessage = err.message || 'Unknown error';\n      }\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function checkFavouriteStatus() {\n    try {\n      const res = await api.get(`/api/products/favourites/check/?product_id=${id}&project_id=${projectId || ''}`);\n      setIsFavourited(res.data.favourited);\n    } catch (err) {\n      console.error('Failed to check favourite status:', err);\n    }\n  }\n  const handleToggleFavourite = async () => {\n    try {\n      const res = await api.post('/api/products/favourites/toggle/', {\n        product_id: id,\n        project_id: projectId || null\n      });\n      setIsFavourited(res.data.favourited);\n      setSuccessMessage(res.data.favourited ? 'Product added to saved products' : 'Product removed from saved products');\n      setTimeout(() => setSuccessMessage(null), 3000);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Failed to toggle favourite:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to save product');\n    }\n  };\n  const handleApply = async () => {\n    if (!projectId) {\n      setError('Please select a project from the Matches page first');\n      return;\n    }\n    setApplying(true);\n    setError(null);\n    setSuccessMessage(null);\n    try {\n      const res = await api.post(`/api/projects/${projectId}/submit-enquiry/`, {\n        product_id: id,\n        notes: enquiryNotes\n      });\n      setSuccessMessage('Application submitted successfully! The lender will be notified.');\n      setEnquiryNotes('');\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n      const errorMsg = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.detail) || 'Failed to submit application';\n      setError(errorMsg);\n    } finally {\n      setApplying(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: commonStyles.container,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          color: theme.colors.textSecondary\n        },\n        children: \"Loading product...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: commonStyles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          background: theme.colors.errorLight,\n          color: theme.colors.errorDark,\n          padding: theme.spacing.lg\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigate('/borrower/matches'),\n          variant: \"primary\",\n          children: \"Back to Matches\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this);\n  }\n  if (!product) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: commonStyles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: theme.spacing.lg,\n        display: 'flex',\n        alignItems: 'center',\n        gap: theme.spacing.md\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => navigate('/borrower/matches'),\n        variant: \"outline\",\n        children: \"\\u2190 Back to Matches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          margin: 0,\n          fontSize: theme.typography.fontSize['3xl'],\n          fontWeight: theme.typography.fontWeight.bold\n        },\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n        variant: product.status === 'active' ? 'success' : 'warning',\n        children: product.status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.errorLight,\n        color: theme.colors.errorDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg,\n        border: `1px solid ${theme.colors.error}`\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.successLight,\n        color: theme.colors.successDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg,\n        border: `1px solid ${theme.colors.success}`\n      },\n      children: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '2fr 1fr',\n        gap: theme.spacing.xl\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: \"Product Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gap: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Funding Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: product.funding_type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), product.property_type && product.property_type !== 'n/a' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Property Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: product.property_type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), product.description && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Description:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  lineHeight: theme.typography.lineHeight.relaxed\n                },\n                children: product.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), lender && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: \"Lender Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gap: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Organisation Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: lender.organisation_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), lender.contact_email && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Contact Email:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: lender.contact_email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 19\n            }, this), lender.contact_phone && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Contact Phone:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: lender.contact_phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this), lender.description && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"About:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  lineHeight: theme.typography.lineHeight.relaxed\n                },\n                children: lender.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: \"Loan Terms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Loan Amount Range:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: [\"\\xA3\", parseFloat(product.min_loan_amount || 0).toLocaleString(), \" - \\xA3\", parseFloat(product.max_loan_amount || 0).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Interest Rate:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: [product.interest_rate_min, \"% - \", product.interest_rate_max, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Term:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: [product.term_min_months, \" - \", product.term_max_months, \" months\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), product.max_ltv_ratio && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Max LTV Ratio:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: [product.max_ltv_ratio, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0`,\n                  color: theme.colors.textSecondary\n                },\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Repayment Structure:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0\n                },\n                children: product.repayment_structure\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), product.eligibility_criteria && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: \"Eligibility Criteria\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              lineHeight: theme.typography.lineHeight.relaxed\n            },\n            children: product.eligibility_criteria\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleToggleFavourite,\n              variant: isFavourited ? \"primary\" : \"outline\",\n              style: {\n                width: '100%'\n              },\n              children: isFavourited ? '★ Remove from Saved' : '☆ Save for Later'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), projectId && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    marginBottom: theme.spacing.xs,\n                    fontWeight: theme.typography.fontWeight.medium\n                  },\n                  children: \"Notes (optional):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                  value: enquiryNotes,\n                  onChange: e => setEnquiryNotes(e.target.value),\n                  placeholder: \"Add any notes or questions for the lender...\",\n                  rows: 4\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleApply,\n                disabled: applying,\n                variant: \"primary\",\n                style: {\n                  width: '100%'\n                },\n                children: applying ? 'Submitting...' : 'Apply Now'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), !projectId && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: theme.colors.textSecondary,\n                fontSize: theme.typography.fontSize.sm,\n                margin: 0\n              },\n              children: \"Select a project from the Matches page to apply for this product.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n_s(BorrowerProductDetail, \"ZoWZILmd9p1iRvxWMHk4nOJFx/M=\", false, function () {\n  return [useParams, useNavigate, useSearchParams];\n});\n_c = BorrowerProductDetail;\nexport default BorrowerProductDetail;\nvar _c;\n$RefreshReg$(_c, \"BorrowerProductDetail\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","useSearchParams","api","theme","commonStyles","Button","Badge","Textarea","jsxDEV","_jsxDEV","Fragment","_Fragment","BorrowerProductDetail","_s","id","navigate","searchParams","projectId","get","product","setProduct","lender","setLender","isFavourited","setIsFavourited","loading","setLoading","error","setError","applying","setApplying","enquiryNotes","setEnquiryNotes","successMessage","setSuccessMessage","loadProduct","checkFavouriteStatus","productRes","data","lender_details","lenderRes","lenderErr","console","warn","err","_err$response","message","response","status","errorMessage","localStorage","removeItem","window","location","href","_err$response$data","_err$response$data2","detail","request","res","favourited","handleToggleFavourite","post","product_id","project_id","setTimeout","_err$response2","_err$response2$data","handleApply","notes","_err$response3","_err$response3$data","_err$response4","_err$response4$data","errorMsg","style","container","children","textAlign","color","colors","textSecondary","fileName","_jsxFileName","lineNumber","columnNumber","card","background","errorLight","errorDark","padding","spacing","lg","onClick","variant","marginBottom","display","alignItems","gap","md","margin","fontSize","typography","fontWeight","bold","name","borderRadius","border","successLight","successDark","success","gridTemplateColumns","xl","xs","funding_type","property_type","description","lineHeight","relaxed","organisation_name","contact_email","contact_phone","parseFloat","min_loan_amount","toLocaleString","max_loan_amount","interest_rate_min","interest_rate_max","term_min_months","term_max_months","max_ltv_ratio","repayment_structure","eligibility_criteria","flexDirection","width","medium","value","onChange","e","target","placeholder","rows","disabled","sm","_c","$RefreshReg$"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/BorrowerProductDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport Textarea from '../components/Textarea';\r\n\r\nfunction BorrowerProductDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const projectId = searchParams.get('project_id');\r\n  \r\n  const [product, setProduct] = useState(null);\r\n  const [lender, setLender] = useState(null);\r\n  const [isFavourited, setIsFavourited] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [applying, setApplying] = useState(false);\r\n  const [enquiryNotes, setEnquiryNotes] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadProduct();\r\n    if (projectId) {\r\n      checkFavouriteStatus();\r\n    }\r\n  }, [id, projectId]);\r\n\r\n  async function loadProduct() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const productRes = await api.get(`/api/products/${id}/`);\r\n      setProduct(productRes.data);\r\n      \r\n      // Lender details should be included in product response, but try separate endpoint as fallback\r\n      if (productRes.data.lender_details) {\r\n        setLender(productRes.data.lender_details);\r\n      } else {\r\n        try {\r\n          const lenderRes = await api.get(`/api/products/${id}/lender-details/`);\r\n          setLender(lenderRes.data);\r\n        } catch (lenderErr) {\r\n          console.warn('Failed to load lender details separately:', lenderErr);\r\n          // Continue without separate lender details - product data should have lender info\r\n          if (productRes.data.lender) {\r\n            // If lender is just an ID, we'll show what we have\r\n            setLender({ id: productRes.data.lender });\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('BorrowerProductDetail loadProduct error:', err);\r\n      console.error('Error details:', {\r\n        message: err.message,\r\n        response: err.response,\r\n        status: err.response?.status,\r\n      });\r\n      \r\n      let errorMessage = 'Failed to load product details';\r\n      if (err.response) {\r\n        if (err.response.status === 404) {\r\n          errorMessage = 'Product not found';\r\n        } else if (err.response.status === 401 || err.response.status === 403) {\r\n          errorMessage = 'Authentication failed. Please log in again.';\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('role');\r\n          window.location.href = '/login';\r\n          return;\r\n        } else {\r\n          errorMessage = err.response.data?.detail || \r\n                        err.response.data?.error || \r\n                        `Server error: ${err.response.status}`;\r\n        }\r\n      } else if (err.request) {\r\n        errorMessage = 'Network Error: Cannot connect to backend server';\r\n      } else {\r\n        errorMessage = err.message || 'Unknown error';\r\n      }\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function checkFavouriteStatus() {\r\n    try {\r\n      const res = await api.get(\r\n        `/api/products/favourites/check/?product_id=${id}&project_id=${projectId || ''}`\r\n      );\r\n      setIsFavourited(res.data.favourited);\r\n    } catch (err) {\r\n      console.error('Failed to check favourite status:', err);\r\n    }\r\n  }\r\n\r\n  const handleToggleFavourite = async () => {\r\n    try {\r\n      const res = await api.post('/api/products/favourites/toggle/', {\r\n        product_id: id,\r\n        project_id: projectId || null,\r\n      });\r\n      \r\n      setIsFavourited(res.data.favourited);\r\n      setSuccessMessage(\r\n        res.data.favourited \r\n          ? 'Product added to saved products' \r\n          : 'Product removed from saved products'\r\n      );\r\n      setTimeout(() => setSuccessMessage(null), 3000);\r\n    } catch (err) {\r\n      console.error('Failed to toggle favourite:', err);\r\n      setError(err.response?.data?.error || 'Failed to save product');\r\n    }\r\n  };\r\n\r\n  const handleApply = async () => {\r\n    if (!projectId) {\r\n      setError('Please select a project from the Matches page first');\r\n      return;\r\n    }\r\n\r\n    setApplying(true);\r\n    setError(null);\r\n    setSuccessMessage(null);\r\n\r\n    try {\r\n      const res = await api.post(`/api/projects/${projectId}/submit-enquiry/`, {\r\n        product_id: id,\r\n        notes: enquiryNotes,\r\n      });\r\n      \r\n      setSuccessMessage('Application submitted successfully! The lender will be notified.');\r\n      setEnquiryNotes('');\r\n    } catch (err) {\r\n      const errorMsg = err.response?.data?.error || err.response?.data?.detail || 'Failed to submit application';\r\n      setError(errorMsg);\r\n    } finally {\r\n      setApplying(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={commonStyles.container}>\r\n        <p style={{ textAlign: 'center', color: theme.colors.textSecondary }}>Loading product...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !product) {\r\n    return (\r\n      <div style={commonStyles.container}>\r\n        <div style={{\r\n          ...commonStyles.card,\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.lg,\r\n        }}>\r\n          <p>{error}</p>\r\n          <Button onClick={() => navigate('/borrower/matches')} variant=\"primary\">\r\n            Back to Matches\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div style={commonStyles.container}>\r\n      <div style={{ marginBottom: theme.spacing.lg, display: 'flex', alignItems: 'center', gap: theme.spacing.md }}>\r\n        <Button onClick={() => navigate('/borrower/matches')} variant=\"outline\">\r\n          ← Back to Matches\r\n        </Button>\r\n        <h1 style={{\r\n          margin: 0,\r\n          fontSize: theme.typography.fontSize['3xl'],\r\n          fontWeight: theme.typography.fontWeight.bold,\r\n        }}>\r\n          {product.name}\r\n        </h1>\r\n        <Badge variant={product.status === 'active' ? 'success' : 'warning'}>\r\n          {product.status}\r\n        </Badge>\r\n      </div>\r\n\r\n      {error && (\r\n        <div style={{\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.error}`,\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div style={{\r\n          background: theme.colors.successLight,\r\n          color: theme.colors.successDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.success}`,\r\n        }}>\r\n          {successMessage}\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: theme.spacing.xl }}>\r\n        {/* Main Details */}\r\n        <div>\r\n          {/* Product Information */}\r\n          <div style={commonStyles.card}>\r\n            <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Product Information</h2>\r\n            <div style={{ display: 'grid', gap: theme.spacing.md }}>\r\n              <div>\r\n                <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                  <strong>Funding Type:</strong>\r\n                </p>\r\n                <p style={{ margin: 0 }}>{product.funding_type}</p>\r\n              </div>\r\n              {product.property_type && product.property_type !== 'n/a' && (\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Property Type:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0 }}>{product.property_type}</p>\r\n                </div>\r\n              )}\r\n              {product.description && (\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Description:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0, lineHeight: theme.typography.lineHeight.relaxed }}>\r\n                    {product.description}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Lender Information */}\r\n          {lender && (\r\n            <div style={commonStyles.card}>\r\n              <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Lender Information</h2>\r\n              <div style={{ display: 'grid', gap: theme.spacing.md }}>\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Organisation Name:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0 }}>{lender.organisation_name}</p>\r\n                </div>\r\n                {lender.contact_email && (\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Contact Email:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{lender.contact_email}</p>\r\n                  </div>\r\n                )}\r\n                {lender.contact_phone && (\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>Contact Phone:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0 }}>{lender.contact_phone}</p>\r\n                  </div>\r\n                )}\r\n                {lender.description && (\r\n                  <div>\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                      <strong>About:</strong>\r\n                    </p>\r\n                    <p style={{ margin: 0, lineHeight: theme.typography.lineHeight.relaxed }}>\r\n                      {lender.description}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Loan Terms */}\r\n          <div style={commonStyles.card}>\r\n            <h2 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Loan Terms</h2>\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: theme.spacing.md }}>\r\n              <div>\r\n                <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                  <strong>Loan Amount Range:</strong>\r\n                </p>\r\n                <p style={{ margin: 0 }}>\r\n                  £{parseFloat(product.min_loan_amount || 0).toLocaleString()} - \r\n                  £{parseFloat(product.max_loan_amount || 0).toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                  <strong>Interest Rate:</strong>\r\n                </p>\r\n                <p style={{ margin: 0 }}>\r\n                  {product.interest_rate_min}% - {product.interest_rate_max}%\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                  <strong>Term:</strong>\r\n                </p>\r\n                <p style={{ margin: 0 }}>\r\n                  {product.term_min_months} - {product.term_max_months} months\r\n                </p>\r\n              </div>\r\n              {product.max_ltv_ratio && (\r\n                <div>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                    <strong>Max LTV Ratio:</strong>\r\n                  </p>\r\n                  <p style={{ margin: 0 }}>{product.max_ltv_ratio}%</p>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary }}>\r\n                  <strong>Repayment Structure:</strong>\r\n                </p>\r\n                <p style={{ margin: 0 }}>{product.repayment_structure}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Eligibility Criteria */}\r\n          {product.eligibility_criteria && (\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Eligibility Criteria</h3>\r\n              <p style={{ margin: 0, lineHeight: theme.typography.lineHeight.relaxed }}>\r\n                {product.eligibility_criteria}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Sidebar */}\r\n        <div>\r\n          <div style={commonStyles.card}>\r\n            <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>Actions</h3>\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n              <Button\r\n                onClick={handleToggleFavourite}\r\n                variant={isFavourited ? \"primary\" : \"outline\"}\r\n                style={{ width: '100%' }}\r\n              >\r\n                {isFavourited ? '★ Remove from Saved' : '☆ Save for Later'}\r\n              </Button>\r\n              {projectId && (\r\n                <>\r\n                  <div>\r\n                    <label style={{ \r\n                      display: 'block', \r\n                      marginBottom: theme.spacing.xs,\r\n                      fontWeight: theme.typography.fontWeight.medium,\r\n                    }}>\r\n                      Notes (optional):\r\n                    </label>\r\n                    <Textarea\r\n                      value={enquiryNotes}\r\n                      onChange={(e) => setEnquiryNotes(e.target.value)}\r\n                      placeholder=\"Add any notes or questions for the lender...\"\r\n                      rows={4}\r\n                    />\r\n                  </div>\r\n                  <Button\r\n                    onClick={handleApply}\r\n                    disabled={applying}\r\n                    variant=\"primary\"\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                    {applying ? 'Submitting...' : 'Apply Now'}\r\n                  </Button>\r\n                </>\r\n              )}\r\n              {!projectId && (\r\n                <p style={{ \r\n                  color: theme.colors.textSecondary, \r\n                  fontSize: theme.typography.fontSize.sm,\r\n                  margin: 0,\r\n                }}>\r\n                  Select a project from the Matches page to apply for this product.\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BorrowerProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}