{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paul-\\\\OneDrive - BARE Capital Ltd\\\\BARE Drive\\\\10.0 BUILDFUND\\\\1.0 Website Dev\\\\GitHub\\\\new_website\\\\src\\\\pages\\\\BorrowerProfileWizard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport { theme, commonStyles } from '../styles/theme';\nimport Wizard from '../components/Wizard';\nimport Input from '../components/Input';\nimport Select from '../components/Select';\nimport Textarea from '../components/Textarea';\nimport Checkbox from '../components/Checkbox';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport CompanyDetails from '../components/CompanyDetails';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BorrowerProfileWizard() {\n  _s();\n  var _step2Data$company_da;\n  const navigate = useNavigate();\n  const [step, setStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [profileStatus, setProfileStatus] = useState(null);\n  const [profileData, setProfileData] = useState(null); // Store full profile data including charges\n  const [stepUpAuth, setStepUpAuth] = useState({\n    required: false,\n    verified: false\n  });\n  const [stepUpPassword, setStepUpPassword] = useState('');\n  const fileInputRef = useRef(null);\n  const companyDetailsSaveRef = useRef(null);\n  const [selectedCompanyDocuments, setSelectedCompanyDocuments] = useState([]);\n  const [dragActive, setDragActive] = useState(false);\n\n  // Step 1: Account setup and consent\n  const [step1Data, setStep1Data] = useState({\n    email: '',\n    mobile_number: '',\n    mfa_enabled: false,\n    consent_privacy: false,\n    consent_terms: false,\n    consent_credit_search: false\n  });\n\n  // Step 2: Company verification\n  const [step2Data, setStep2Data] = useState({\n    company_number: '',\n    company_name: '',\n    company_search_type: 'number',\n    // 'number' or 'name'\n    company_data: null,\n    company_search_results: [],\n    // For storing search results when searching by name\n    show_search_results: false,\n    // Whether to show the search results list\n    trading_address: '',\n    primary_contact_email: '',\n    primary_contact_phone: '',\n    confirmed: false\n  });\n\n  // Step 3: Directors and shareholders\n  const [step3Data, setStep3Data] = useState({\n    directors: [],\n    shareholders: [],\n    applicants_required: []\n  });\n\n  // Step 4: Applicant personal details\n  const [step4Data, setStep4Data] = useState({\n    applicants: [] // Array of applicant objects\n  });\n\n  // Step 5: Financial snapshot\n  const [step5Data, setStep5Data] = useState({\n    mode: 'quick',\n    // 'quick' or 'detailed'\n    income_total: '',\n    expenditure_total: '',\n    assets_total: '',\n    liabilities_total: '',\n    income_breakdown: [],\n    expenditure_breakdown: [],\n    assets_breakdown: [],\n    liabilities_breakdown: []\n  });\n\n  // Step 6: Bank data\n  const [step6Data, setStep6Data] = useState({\n    method: 'open_banking',\n    // 'open_banking' or 'pdf_upload'\n    open_banking_connected: false,\n    open_banking_provider: '',\n    accounts: [],\n    pdf_statements: []\n  });\n\n  // Step 7: Documents\n  const [step7Data, setStep7Data] = useState({\n    company_documents: {\n      statutory_accounts: [],\n      management_accounts: []\n    },\n    personal_documents: {\n      photo_id: []\n    }\n  });\n  const steps = ['Account & Consent', 'Company Verification', 'Directors & Shareholders', 'Applicant Details', 'Financial Snapshot', 'Bank Data', 'Documents', 'Review & Submit'];\n  useEffect(() => {\n    loadProfileStatus();\n    loadProfileData();\n  }, []);\n  const loadProfileData = async () => {\n    try {\n      const res = await api.get('/api/borrowers/profiles/');\n      const data = Array.isArray(res.data) ? res.data[0] : res.data;\n      setProfileData(data);\n    } catch (err) {\n      console.error('Failed to load profile data:', err);\n    }\n  };\n  const loadProfileStatus = async () => {\n    try {\n      const res = await api.get('/api/borrowers/profiles/status/');\n      setProfileStatus(res.data);\n      if (res.data.status === 'approved') {\n        setMessage('Your profile has been approved. You can now create projects.');\n      } else if (res.data.status === 'under_review') {\n        setMessage('Your profile is under review. You will be notified when it is approved.');\n      } else if (res.data.status === 'changes_requested') {\n        setMessage('Changes have been requested. Please review and update your profile.');\n      }\n    } catch (err) {\n      console.error('Failed to load profile status:', err);\n    }\n  };\n  const checkStepUpAuth = async section => {\n    // Check if step-up auth is required and not recently verified\n    const lastAuth = localStorage.getItem('stepUpAuthTimestamp');\n    const now = Date.now();\n    const tenMinutes = 10 * 60 * 1000;\n    if (!lastAuth || now - parseInt(lastAuth) > tenMinutes) {\n      setStepUpAuth({\n        required: true,\n        verified: false,\n        section\n      });\n      return false;\n    }\n    return true;\n  };\n  const verifyStepUpAuth = async () => {\n    try {\n      const res = await api.post('/api/auth/verify-password/', {\n        password: stepUpPassword\n      });\n      if (res.data.verified) {\n        setStepUpAuth({\n          required: false,\n          verified: true\n        });\n        localStorage.setItem('stepUpAuthTimestamp', Date.now().toString());\n        setStepUpPassword('');\n        return true;\n      } else {\n        setError('Incorrect password. Please try again.');\n        return false;\n      }\n    } catch (err) {\n      setError('Password verification failed. Please try again.');\n      return false;\n    }\n  };\n  const handleCompanySearch = async () => {\n    if (step2Data.company_search_type === 'number') {\n      // Search by company number - direct lookup\n      if (!step2Data.company_number) {\n        setError('Please enter a company number');\n        return;\n      }\n      setLoading(true);\n      setError(null);\n      try {\n        const res = await api.get('/api/verification/company/get_full_company_details/', {\n          params: {\n            company_number: step2Data.company_number\n          }\n        });\n        if (res.data.error) {\n          setError(res.data.error);\n        } else {\n          setStep2Data({\n            ...step2Data,\n            company_data: res.data,\n            company_number: res.data.company_number || step2Data.company_number,\n            company_name: res.data.company_name || step2Data.company_name,\n            show_search_results: false\n          });\n          // Initialize step3Data with directors and PSCs from company data\n          const directors = (res.data.active_directors || res.data.directors || []).map(d => ({\n            ...d,\n            confirmed: false\n          }));\n          const pscs = (res.data.pscs || []).map(p => ({\n            ...p,\n            confirmed: false\n          }));\n          setStep3Data(prev => ({\n            ...prev,\n            directors: directors,\n            shareholders: pscs,\n            applicants_required: []\n          }));\n          setMessage('Company found! Please review and confirm the details.');\n        }\n      } catch (err) {\n        var _err$response, _err$response$data;\n        console.error('Company search error:', err);\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to search company. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      // Search by company name - show list of matches\n      if (!step2Data.company_name) {\n        setError('Please enter a company name');\n        return;\n      }\n      setLoading(true);\n      setError(null);\n      try {\n        const res = await api.get('/api/verification/company/search_companies/', {\n          params: {\n            company_name: step2Data.company_name\n          }\n        });\n        if (res.data.error) {\n          setError(res.data.error);\n        } else if (res.data.companies && res.data.companies.length > 0) {\n          if (res.data.companies.length === 1) {\n            // Only one result - automatically select it\n            await handleSelectCompany(res.data.companies[0].company_number);\n          } else {\n            // Multiple results - show list\n            setStep2Data({\n              ...step2Data,\n              company_search_results: res.data.companies,\n              show_search_results: true\n            });\n            setMessage(`Found ${res.data.companies.length} matching companies. Please select one:`);\n          }\n        } else {\n          setError('No companies found matching that name. Please try a different search term.');\n        }\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        console.error('Company search error:', err);\n        setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to search company. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  const handleSelectCompany = async companyNumber => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await api.get('/api/verification/company/get_full_company_details/', {\n        params: {\n          company_number: companyNumber\n        }\n      });\n      if (res.data.error) {\n        setError(res.data.error);\n      } else {\n        setStep2Data({\n          ...step2Data,\n          company_data: res.data,\n          company_number: res.data.company_number,\n          company_name: res.data.company_name,\n          company_search_results: [],\n          show_search_results: false\n        });\n        // Initialize step3Data with directors and PSCs from company data\n        const directors = (res.data.active_directors || res.data.directors || []).map(d => ({\n          ...d,\n          confirmed: false\n        }));\n        const pscs = (res.data.pscs || []).map(p => ({\n          ...p,\n          confirmed: false\n        }));\n        setStep3Data(prev => ({\n          ...prev,\n          directors: directors,\n          shareholders: pscs,\n          applicants_required: []\n        }));\n        setMessage('Company found! Please review and confirm the details.');\n      }\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Failed to load company details:', err);\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to load company details. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleConfirmCompany = () => {\n    setStep2Data({\n      ...step2Data,\n      confirmed: true\n    });\n    setMessage('Company details confirmed');\n  };\n\n  // Helper function to normalize names for matching\n  const normalizeName = name => {\n    if (!name) return '';\n    return name.toLowerCase().trim().replace(/\\s+/g, ' ');\n  };\n\n  // Helper function to check if two names match (fuzzy matching)\n  const namesMatch = (name1, name2) => {\n    const n1 = normalizeName(name1);\n    const n2 = normalizeName(name2);\n    // Exact match\n    if (n1 === n2) return true;\n    // Check if one contains the other (for cases like \"John Smith\" vs \"John A Smith\")\n    if (n1.includes(n2) || n2.includes(n1)) {\n      // Only match if the shorter name is at least 10 characters or if it's a clear substring\n      const shorter = n1.length < n2.length ? n1 : n2;\n      const longer = n1.length >= n2.length ? n1 : n2;\n      // Split into words and check if all words from shorter are in longer\n      const shorterWords = shorter.split(' ').filter(w => w.length > 2); // Ignore initials\n      const longerWords = longer.split(' ');\n      return shorterWords.every(word => longerWords.some(lw => lw.includes(word) || word.includes(lw)));\n    }\n    return false;\n  };\n  const handleDirectorsUpdate = (directors, shareholders) => {\n    // Auto-flag applicants required\n    const applicantsRequired = [];\n    const matchedPscIds = new Set(); // Track which PSCs have been matched to directors\n\n    // Process directors first\n    directors.forEach(dir => {\n      if (!dir.resigned_on && dir.confirmed) {\n        // Check if this director is also a PSC\n        let matchedPsc = null;\n        let ownershipPercentage = null;\n        shareholders.forEach((psc, pscIndex) => {\n          if (namesMatch(dir.name, psc.name)) {\n            var _psc$natures_of_contr, _psc$natures_of_contr2;\n            matchedPsc = psc;\n            matchedPscIds.add(pscIndex);\n            // Get ownership percentage\n            ownershipPercentage = parseFloat(psc.ownership_percentage || ((_psc$natures_of_contr = psc.natures_of_control) === null || _psc$natures_of_contr === void 0 ? void 0 : (_psc$natures_of_contr2 = _psc$natures_of_contr[0]) === null || _psc$natures_of_contr2 === void 0 ? void 0 : _psc$natures_of_contr2.percentage) || 0);\n          }\n        });\n\n        // Create applicant entry (one per person, even if director + PSC)\n        applicantsRequired.push({\n          person_id: dir.id || dir.name,\n          name: dir.name,\n          role: matchedPsc ? 'Director & Shareholder' : 'Director',\n          ownership_percentage: ownershipPercentage,\n          is_director: true,\n          is_psc: !!matchedPsc,\n          required: true\n        });\n      }\n    });\n\n    // Process unmatched PSCs (those not matched to directors)\n    shareholders.forEach((psc, pscIndex) => {\n      var _psc$natures_of_contr3, _psc$natures_of_contr4;\n      if (matchedPscIds.has(pscIndex)) {\n        return; // Skip if already matched to a director\n      }\n\n      // Check if PSC is confirmed and has >=25% ownership\n      const ownership = parseFloat(psc.ownership_percentage || ((_psc$natures_of_contr3 = psc.natures_of_control) === null || _psc$natures_of_contr3 === void 0 ? void 0 : (_psc$natures_of_contr4 = _psc$natures_of_contr3[0]) === null || _psc$natures_of_contr4 === void 0 ? void 0 : _psc$natures_of_contr4.percentage) || 0);\n      if (psc.confirmed && ownership >= 25) {\n        // Check if this PSC matches any director (shouldn't happen, but double-check)\n        const matchesDirector = directors.some(dir => !dir.resigned_on && namesMatch(dir.name, psc.name));\n        if (!matchesDirector) {\n          // This is a PSC-only person (not a director)\n          applicantsRequired.push({\n            person_id: psc.id || psc.name,\n            name: psc.name,\n            role: 'Shareholder/PSC',\n            ownership_percentage: ownership,\n            is_director: false,\n            is_psc: true,\n            required: true\n          });\n        }\n      }\n    });\n    setStep3Data({\n      directors: directors,\n      shareholders: shareholders,\n      applicants_required: applicantsRequired\n    });\n  };\n  const handleConnectOpenBanking = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // This would integrate with Open Banking provider\n      // For now, simulate the connection\n      const res = await api.post('/api/borrowers/profiles/connect-open-banking/', {\n        provider: step6Data.open_banking_provider\n      });\n      setStep6Data({\n        ...step6Data,\n        open_banking_connected: true,\n        accounts: res.data.accounts || [],\n        method: 'open_banking'\n      });\n      setMessage('Open Banking connected successfully');\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error('Open Banking connection error:', err);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || 'Failed to connect Open Banking. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFileUpload = async (files, documentType, category) => {\n    if (!files || files.length === 0) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const formData = new FormData();\n      Array.from(files).forEach(file => {\n        formData.append('files', file);\n      });\n      formData.append('document_type', documentType);\n      formData.append('category', category);\n      const res = await api.post('/api/borrowers/profiles/documents/upload/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Update step 7 data\n      const updatedDocs = {\n        ...step7Data\n      };\n      if (category === 'company') {\n        if (documentType === 'statutory_accounts') {\n          updatedDocs.company_documents.statutory_accounts = [...updatedDocs.company_documents.statutory_accounts, ...res.data.documents];\n        } else if (documentType === 'management_accounts') {\n          updatedDocs.company_documents.management_accounts = [...updatedDocs.company_documents.management_accounts, ...res.data.documents];\n        }\n      } else if (category === 'personal' && documentType === 'photo_id') {\n        updatedDocs.personal_documents.photo_id = [...updatedDocs.personal_documents.photo_id, ...res.data.documents];\n      }\n      setStep7Data(updatedDocs);\n      setMessage(`Successfully uploaded ${files.length} file(s)`);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      console.error('File upload error:', err);\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || 'Failed to upload files');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSubmitForReview = async () => {\n    // Validate all required consents before submission\n    if (!step1Data.consent_privacy) {\n      setError('You must consent to the Privacy Policy to submit your profile.');\n      setStep(1); // Navigate back to consent step\n      return;\n    }\n    if (!step1Data.consent_terms) {\n      setError('You must accept the Terms and Conditions to submit your profile.');\n      setStep(1); // Navigate back to consent step\n      return;\n    }\n    if (!step1Data.consent_credit_search) {\n      setError('You must consent to credit search permission to submit your profile.');\n      setStep(1); // Navigate back to consent step\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const payload = {\n        step1: step1Data,\n        step2: step2Data,\n        step3: step3Data,\n        step4: step4Data,\n        step5: step5Data,\n        step6: step6Data,\n        step7: step7Data\n      };\n      const res = await api.post('/api/borrowers/profiles/submit-for-review/', payload);\n      setMessage('Profile submitted for review successfully!');\n      await loadProfileStatus();\n      // Don't navigate away - keep wizard open so user can see confirmation\n    } catch (err) {\n      var _err$response6, _err$response6$data;\n      console.error('Submit error:', err);\n      setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.error) || 'Failed to submit profile for review');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const nextStep = async () => {\n    if (step < steps.length) {\n      // If on step 2 (company verification) and there are selected documents, save them\n      if (step === 2 && companyDetailsSaveRef.current && selectedCompanyDocuments.length > 0) {\n        setLoading(true);\n        try {\n          const docResults = await companyDetailsSaveRef.current();\n          if (docResults.failed > 0) {\n            // Show warning but allow progression\n            setMessage(`Note: ${docResults.saved} document(s) saved. ${docResults.failed} document(s) could not be saved but you can continue.`);\n            setTimeout(() => setMessage(null), 5000);\n          } else if (docResults.saved > 0) {\n            setMessage(`${docResults.saved} document(s) saved to your profile.`);\n            setTimeout(() => setMessage(null), 3000);\n          }\n        } catch (err) {\n          console.error('Error saving documents:', err);\n          // Don't block progression - just log the error\n          setMessage('Some documents could not be saved, but you can continue. You can try saving them again later.');\n          setTimeout(() => setMessage(null), 5000);\n        } finally {\n          setLoading(false);\n        }\n      }\n      setStep(step + 1);\n      setError(null);\n      // Don't clear message immediately - let it show for a bit\n      setTimeout(() => setMessage(null), 3000);\n      saveProgress(); // Auto-save when moving forward\n    }\n  };\n  const prevStep = () => {\n    if (step > 1) {\n      setStep(step - 1);\n      setError(null);\n      setMessage(null);\n    }\n  };\n  const handleStepClick = stepNumber => {\n    // Allow navigation to any completed step or the next step\n    if (stepNumber <= step + 1) {\n      setStep(stepNumber);\n      setError(null);\n      setMessage(null);\n      if (stepNumber > step) {\n        saveProgress(); // Auto-save when moving forward\n      }\n    }\n  };\n  const canNavigateToStep = stepNumber => {\n    // Allow navigation to any step up to the current step + 1\n    return stepNumber <= step + 1;\n  };\n  const saveProgress = async () => {\n    try {\n      // Save all step data to backend\n      const profileData = {\n        email: step1Data.email,\n        mobile_number: step1Data.mobile_number,\n        mfa_enabled: step1Data.mfa_enabled,\n        consent_privacy: step1Data.consent_privacy,\n        consent_terms: step1Data.consent_terms,\n        consent_credit_search: step1Data.consent_credit_search,\n        company_registration_number: step2Data.company_number,\n        organisation_name: step2Data.company_name,\n        trading_address: step2Data.trading_address,\n        primary_contact_email: step2Data.primary_contact_email,\n        primary_contact_phone: step2Data.primary_contact_phone,\n        company_data: step2Data.company_data,\n        directors_data: step3Data.directors,\n        shareholders_data: step3Data.shareholders,\n        applicants_data: step4Data.applicants,\n        financial_data: step5Data,\n        bank_data: step6Data,\n        company_documents: step7Data.company_documents,\n        personal_documents: step7Data.personal_documents\n      };\n      await api.patch('/api/borrowers/profiles/me/', profileData);\n      // Don't show message for auto-save to avoid UI clutter\n    } catch (err) {\n      console.error('Failed to save progress:', err);\n      // Don't show error to user for auto-save, only log it\n    }\n  };\n  const handleSaveProgress = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Save selected company documents if any\n      if (companyDetailsSaveRef.current && selectedCompanyDocuments.length > 0) {\n        const docResults = await companyDetailsSaveRef.current();\n        if (docResults.failed > 0) {\n          const errorMsg = `${docResults.saved} document(s) saved successfully. ${docResults.failed} document(s) failed to save: ${docResults.errors.map(e => e.document).join(', ')}`;\n          setMessage(errorMsg);\n          setTimeout(() => setMessage(null), 5000);\n        } else if (docResults.saved > 0) {\n          setMessage(`${docResults.saved} document(s) saved to your profile.`);\n          setTimeout(() => setMessage(null), 3000);\n        }\n      }\n      await saveProgress();\n      setMessage(prev => prev ? prev + ' Progress saved successfully!' : 'Progress saved successfully!');\n      setTimeout(() => setMessage(null), 3000);\n    } catch (err) {\n      setError('Failed to save progress. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Step-up authentication modal\n  if (stepUpAuth.required && !stepUpAuth.verified) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          maxWidth: '400px',\n          padding: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: \"Step-Up Authentication Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: theme.colors.textSecondary,\n            marginBottom: theme.spacing.lg\n          },\n          children: \"Please enter your password to access this section.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          label: \"Password\",\n          value: stepUpPassword,\n          onChange: e => setStepUpPassword(e.target.value),\n          style: {\n            marginBottom: theme.spacing.md\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: theme.colors.error,\n            fontSize: theme.typography.fontSize.sm,\n            marginBottom: theme.spacing.md\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: theme.spacing.sm\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: async () => {\n              const verified = await verifyStepUpAuth();\n              if (verified) {\n                setError(null);\n              }\n            },\n            children: \"Verify\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            onClick: () => {\n              setStepUpAuth({\n                required: false,\n                verified: false\n              });\n              setStepUpPassword('');\n              prevStep();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Wizard, {\n    steps: steps,\n    currentStep: step,\n    onStepClick: handleStepClick,\n    canNavigateToStep: canNavigateToStep,\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.errorLight,\n        color: theme.colors.errorDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg,\n        border: `1px solid ${theme.colors.error}`\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 709,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: theme.colors.successLight,\n        color: theme.colors.successDark,\n        padding: theme.spacing.md,\n        borderRadius: theme.borderRadius.md,\n        marginBottom: theme.spacing.lg,\n        border: `1px solid ${theme.colors.success}`\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 9\n    }, this), step === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Account Setup & Consent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Please provide your contact details and confirm your consents.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: theme.spacing.lg,\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          label: \"Email Address\",\n          type: \"email\",\n          value: step1Data.email,\n          onChange: e => setStep1Data({\n            ...step1Data,\n            email: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Mobile Number\",\n          type: \"tel\",\n          value: step1Data.mobile_number,\n          onChange: e => setStep1Data({\n            ...step1Data,\n            mobile_number: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Checkbox, {\n          label: \"Enable Multi-Factor Authentication (MFA)\",\n          checked: step1Data.mfa_enabled,\n          onChange: e => setStep1Data({\n            ...step1Data,\n            mfa_enabled: e.target.checked\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          padding: theme.spacing.lg,\n          marginBottom: theme.spacing.xl,\n          background: theme.colors.gray50,\n          border: `2px solid ${!step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search ? theme.colors.warning : theme.colors.gray200}`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: \"Required Consents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 777,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: theme.typography.fontSize.sm,\n            color: theme.colors.textSecondary,\n            marginBottom: theme.spacing.md\n          },\n          children: \"You must agree to all of the following to proceed with your profile setup.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: theme.spacing.md\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'start',\n              gap: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n              label: \"\",\n              checked: step1Data.consent_privacy,\n              onChange: e => setStep1Data({\n                ...step1Data,\n                consent_privacy: e.target.checked\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  cursor: 'pointer',\n                  fontWeight: step1Data.consent_privacy ? theme.typography.fontWeight.normal : theme.typography.fontWeight.medium\n                },\n                children: [\"I consent to the\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/privacy-policy\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  style: {\n                    color: theme.colors.primary,\n                    textDecoration: 'underline'\n                  },\n                  onClick: e => e.stopPropagation(),\n                  children: \"Privacy Policy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 799,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 19\n              }, this), !step1Data.consent_privacy && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0 0 0`,\n                  fontSize: theme.typography.fontSize.xs,\n                  color: theme.colors.error\n                },\n                children: \"This consent is required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 810,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 793,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'start',\n              gap: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n              label: \"\",\n              checked: step1Data.consent_terms,\n              onChange: e => setStep1Data({\n                ...step1Data,\n                consent_terms: e.target.checked\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  cursor: 'pointer',\n                  fontWeight: step1Data.consent_terms ? theme.typography.fontWeight.normal : theme.typography.fontWeight.medium\n                },\n                children: [\"I accept the\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/terms-and-conditions\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  style: {\n                    color: theme.colors.primary,\n                    textDecoration: 'underline'\n                  },\n                  onClick: e => e.stopPropagation(),\n                  children: \"Terms and Conditions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 834,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 829,\n                columnNumber: 19\n              }, this), !step1Data.consent_terms && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0 0 0`,\n                  fontSize: theme.typography.fontSize.xs,\n                  color: theme.colors.error\n                },\n                children: \"This consent is required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 845,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 821,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'start',\n              gap: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n              label: \"\",\n              checked: step1Data.consent_credit_search,\n              onChange: e => setStep1Data({\n                ...step1Data,\n                consent_credit_search: e.target.checked\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  cursor: 'pointer'\n                },\n                children: \"I consent to credit search permission\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0 0 0`,\n                  fontSize: theme.typography.fontSize.xs,\n                  color: theme.colors.textSecondary\n                },\n                children: \"We may perform credit checks as part of the application process\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 19\n              }, this), !step1Data.consent_credit_search && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0 0 0`,\n                  fontSize: theme.typography.fontSize.xs,\n                  color: theme.colors.error\n                },\n                children: \"This consent is required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 875,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 863,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-end',\n          marginTop: theme.spacing.xl\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          disabled: !step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search,\n          children: \"Next: Company Verification\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 888,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 9\n    }, this), step === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Company Verification (UK Only)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 903,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Search for your company using Companies House.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.lg\n        },\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          label: \"Search By\",\n          value: step2Data.company_search_type,\n          onChange: e => setStep2Data({\n            ...step2Data,\n            company_search_type: e.target.value\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"number\",\n            children: \"Company Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 920,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"name\",\n            children: \"Company Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 915,\n          columnNumber: 13\n        }, this), step2Data.company_search_type === 'number' ? /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Company Number\",\n          value: step2Data.company_number,\n          onChange: e => setStep2Data({\n            ...step2Data,\n            company_number: e.target.value\n          }),\n          placeholder: \"e.g., 12345678\",\n          style: {\n            marginTop: theme.spacing.md\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Company Name\",\n          value: step2Data.company_name,\n          onChange: e => setStep2Data({\n            ...step2Data,\n            company_name: e.target.value\n          }),\n          placeholder: \"e.g., Example Company Ltd\",\n          style: {\n            marginTop: theme.spacing.md\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 933,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleCompanySearch,\n          loading: loading,\n          style: {\n            marginTop: theme.spacing.md\n          },\n          children: \"Search Company\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 914,\n        columnNumber: 11\n      }, this), step2Data.show_search_results && step2Data.company_search_results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: theme.typography.fontSize.lg,\n            fontWeight: theme.typography.fontWeight.semibold,\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: [\"Select Company (\", step2Data.company_search_results.length, \" found)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: theme.spacing.sm,\n            maxHeight: '400px',\n            overflowY: 'auto',\n            border: `1px solid ${theme.colors.gray200}`,\n            borderRadius: theme.borderRadius.md,\n            padding: theme.spacing.md,\n            background: theme.colors.gray50\n          },\n          children: step2Data.company_search_results.map(company => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => handleSelectCompany(company.company_number),\n            style: {\n              padding: theme.spacing.md,\n              border: `1px solid ${theme.colors.gray200}`,\n              borderRadius: theme.borderRadius.md,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              background: theme.colors.white\n            },\n            onMouseEnter: e => {\n              e.currentTarget.style.background = theme.colors.primaryLight;\n              e.currentTarget.style.borderColor = theme.colors.primary;\n            },\n            onMouseLeave: e => {\n              e.currentTarget.style.background = theme.colors.white;\n              e.currentTarget.style.borderColor = theme.colors.gray200;\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    fontWeight: theme.typography.fontWeight.semibold,\n                    fontSize: theme.typography.fontSize.base,\n                    color: theme.colors.textPrimary\n                  },\n                  children: company.company_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 996,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: `${theme.spacing.xs} 0 0 0`,\n                    fontSize: theme.typography.fontSize.sm,\n                    color: theme.colors.textSecondary\n                  },\n                  children: [\"Company Number: \", company.company_number]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1004,\n                  columnNumber: 25\n                }, this), company.address_snippet && /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: `${theme.spacing.xs} 0 0 0`,\n                    fontSize: theme.typography.fontSize.sm,\n                    color: theme.colors.textSecondary\n                  },\n                  children: company.address_snippet\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1012,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: theme.spacing.sm,\n                    marginTop: theme.spacing.xs,\n                    flexWrap: 'wrap',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Badge, {\n                    variant: company.company_status === 'active' ? 'success' : company.company_status === 'dissolved' ? 'warning' : 'error',\n                    children: company.company_status || 'Unknown'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1021,\n                    columnNumber: 27\n                  }, this), company.company_type && /*#__PURE__*/_jsxDEV(Badge, {\n                    variant: \"info\",\n                    children: company.company_type\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1025,\n                    columnNumber: 29\n                  }, this), company.date_of_creation && /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: theme.typography.fontSize.xs,\n                      color: theme.colors.textSecondary\n                    },\n                    children: [\"Incorporated: \", new Date(company.date_of_creation).toLocaleDateString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1030,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1020,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 995,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                size: \"sm\",\n                onClick: e => {\n                  e.stopPropagation();\n                  handleSelectCompany(company.company_number);\n                },\n                style: {\n                  marginLeft: theme.spacing.md\n                },\n                children: \"Select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1039,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 994,\n              columnNumber: 21\n            }, this)\n          }, company.company_number, false, {\n            fileName: _jsxFileName,\n            lineNumber: 974,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 962,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 954,\n        columnNumber: 13\n      }, this), step2Data.company_data && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(CompanyDetails, {\n          companyNumber: step2Data.company_data.company_number,\n          saveSelectedDocumentsRef: companyDetailsSaveRef,\n          onSelectedDocumentsChange: documents => {\n            setSelectedCompanyDocuments(documents);\n          },\n          onAutoImport: async result => {\n            // Refresh profile status and data after auto-import\n            await loadProfileStatus();\n            await loadProfileData(); // Refresh to get charges_summary\n            setMessage('Company data imported successfully! Directors, shareholders, accounts, and charges have been automatically saved.');\n            // Update step2Data with imported data\n            if (result && result.results) {\n              setStep2Data(prev => {\n                var _prev$company_data;\n                return {\n                  ...prev,\n                  confirmed: true,\n                  company_data: {\n                    ...prev.company_data,\n                    charges_summary: result.results.charges_summary || ((_prev$company_data = prev.company_data) === null || _prev$company_data === void 0 ? void 0 : _prev$company_data.charges_summary)\n                  }\n                };\n              });\n              // Update step3Data with imported directors and shareholders\n              try {\n                const profileRes = await api.get('/api/borrowers/profiles/');\n                const profileData = Array.isArray(profileRes.data) ? profileRes.data[0] : profileRes.data;\n                if (profileData) {\n                  setProfileData(profileData); // Update profileData state\n                  setStep3Data({\n                    directors: profileData.directors_data || [],\n                    shareholders: profileData.shareholders_data || [],\n                    applicants_required: profileData.applicants_required || []\n                  });\n                }\n              } catch (err) {\n                console.error('Failed to refresh profile data:', err);\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1059,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: theme.spacing.lg\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Additional Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1100,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"Trading Address (if different)\",\n            value: step2Data.trading_address,\n            onChange: e => setStep2Data({\n              ...step2Data,\n              trading_address: e.target.value\n            }),\n            style: {\n              marginBottom: theme.spacing.md\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"Primary Contact Email\",\n            type: \"email\",\n            value: step2Data.primary_contact_email,\n            onChange: e => setStep2Data({\n              ...step2Data,\n              primary_contact_email: e.target.value\n            }),\n            style: {\n              marginBottom: theme.spacing.md\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1107,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: \"Primary Contact Phone\",\n            type: \"tel\",\n            value: step2Data.primary_contact_phone,\n            onChange: e => setStep2Data({\n              ...step2Data,\n              primary_contact_phone: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1099,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: theme.spacing.lg\n          },\n          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n            label: \"I confirm these company details are correct\",\n            checked: step2Data.confirmed,\n            onChange: e => setStep2Data({\n              ...step2Data,\n              confirmed: e.target.checked\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1123,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1122,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => {\n            if (step2Data.confirmed) {\n              nextStep();\n            } else {\n              setError('Please confirm the company details before proceeding');\n            }\n          },\n          disabled: !step2Data.confirmed,\n          children: \"Next: Directors & Shareholders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1136,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1132,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 902,\n      columnNumber: 9\n    }, this), step === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Directors & Shareholders (>=25%)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Review and confirm directors and persons with significant control. All directors and shareholders with 25%+ ownership will be required to complete applicant details.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1163,\n        columnNumber: 11\n      }, this), step2Data.company_data && (() => {\n        // Match PSCs with directors\n        // API returns 'active_directors' and 'pscs'\n        const directors = step2Data.company_data.active_directors || step2Data.company_data.directors || [];\n        const pscs = step2Data.company_data.pscs || [];\n        const matchedPscIndices = new Set();\n\n        // Find which PSCs match directors\n        directors.forEach((director, dirIndex) => {\n          pscs.forEach((psc, pscIndex) => {\n            if (namesMatch(director.name, psc.name)) {\n              matchedPscIndices.add(pscIndex);\n            }\n          });\n        });\n\n        // Separate matched and unmatched PSCs\n        const matchedPscs = pscs.filter((_, index) => matchedPscIndices.has(index));\n        const unmatchedPscs = pscs.filter((_, index) => !matchedPscIndices.has(index));\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [directors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: theme.spacing.xl\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: `0 0 ${theme.spacing.md} 0`\n              },\n              children: \"Directors\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1192,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: theme.typography.fontSize.sm,\n                color: theme.colors.textSecondary,\n                marginBottom: theme.spacing.md\n              },\n              children: \"All directors are required to complete applicant details. If a director is also a shareholder, please confirm their shareholding percentage.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1193,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gap: theme.spacing.md\n              },\n              children: directors.map((director, index) => {\n                var _matchingPsc$natures_, _matchingPsc$natures_2;\n                // Find matching PSC for this director\n                const matchingPsc = matchedPscs.find(psc => namesMatch(director.name, psc.name));\n                const ownershipPercentage = matchingPsc ? parseFloat(matchingPsc.ownership_percentage || ((_matchingPsc$natures_ = matchingPsc.natures_of_control) === null || _matchingPsc$natures_ === void 0 ? void 0 : (_matchingPsc$natures_2 = _matchingPsc$natures_[0]) === null || _matchingPsc$natures_2 === void 0 ? void 0 : _matchingPsc$natures_2.percentage) || 0) : null;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    ...commonStyles.card,\n                    padding: theme.spacing.md,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: theme.spacing.sm\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'flex-start'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        flex: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          margin: 0,\n                          fontWeight: theme.typography.fontWeight.medium\n                        },\n                        children: director.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1218,\n                        columnNumber: 33\n                      }, this), director.nationality && /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          margin: `${theme.spacing.xs} 0 0 0`,\n                          fontSize: theme.typography.fontSize.sm,\n                          color: theme.colors.textSecondary\n                        },\n                        children: [\"Nationality: \", director.nationality]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1222,\n                        columnNumber: 35\n                      }, this), matchingPsc && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          marginTop: theme.spacing.xs\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Badge, {\n                          variant: \"info\",\n                          style: {\n                            marginRight: theme.spacing.xs\n                          },\n                          children: \"Also a Shareholder\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1228,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1227,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                        variant: \"warning\",\n                        style: {\n                          marginTop: theme.spacing.xs\n                        },\n                        children: \"Applicant Required\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1233,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1217,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(Checkbox, {\n                      label: \"Confirm\",\n                      checked: director.confirmed || false,\n                      onChange: e => {\n                        const updated = [...directors];\n                        updated[index].confirmed = e.target.checked;\n                        setStep2Data({\n                          ...step2Data,\n                          company_data: {\n                            ...step2Data.company_data,\n                            directors: updated\n                          }\n                        });\n                        handleDirectorsUpdate(updated, pscs);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1237,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1216,\n                    columnNumber: 29\n                  }, this), matchingPsc && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      marginTop: theme.spacing.sm,\n                      padding: theme.spacing.sm,\n                      background: theme.colors.gray50,\n                      borderRadius: theme.borderRadius.md\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        fontSize: theme.typography.fontSize.sm,\n                        fontWeight: theme.typography.fontWeight.medium,\n                        display: 'block',\n                        marginBottom: theme.spacing.xs\n                      },\n                      children: \"Shareholding Percentage:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1260,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      type: \"number\",\n                      min: \"0\",\n                      max: \"100\",\n                      step: \"0.1\",\n                      placeholder: \"Enter %\",\n                      value: matchingPsc.ownership_percentage || ownershipPercentage || '',\n                      onChange: e => {\n                        const updatedPscs = [...pscs];\n                        const pscIndex = pscs.findIndex(p => namesMatch(p.name, director.name));\n                        if (pscIndex >= 0) {\n                          updatedPscs[pscIndex].ownership_percentage = parseFloat(e.target.value) || 0;\n                          // Update both step2Data and step3Data\n                          setStep2Data({\n                            ...step2Data,\n                            company_data: {\n                              ...step2Data.company_data,\n                              pscs: updatedPscs\n                            }\n                          });\n                          setStep3Data(prev => ({\n                            ...prev,\n                            shareholders: updatedPscs\n                          }));\n                          handleDirectorsUpdate(directors, updatedPscs);\n                        }\n                      },\n                      style: {\n                        width: '150px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1268,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: `${theme.spacing.xs} 0 0 0`,\n                        fontSize: theme.typography.fontSize.xs,\n                        color: theme.colors.textSecondary\n                      },\n                      children: \"This person will be required to complete applicant details as both Director and Shareholder.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1294,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1254,\n                    columnNumber: 31\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1209,\n                  columnNumber: 27\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1200,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1191,\n            columnNumber: 19\n          }, this), unmatchedPscs.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: theme.spacing.xl\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: `0 0 ${theme.spacing.md} 0`\n              },\n              children: \"Additional Shareholders (Not Directors)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1313,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: theme.typography.fontSize.sm,\n                color: theme.colors.textSecondary,\n                marginBottom: theme.spacing.md\n              },\n              children: \"The following persons have significant control but are not directors. If they own 25% or more, you can choose to add them as applicants.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1314,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gap: theme.spacing.md\n              },\n              children: unmatchedPscs.map((psc, index) => {\n                var _psc$natures_of_contr5, _psc$natures_of_contr6;\n                // Find the original index in the full pscs array\n                const originalIndex = pscs.findIndex(p => p.name === psc.name);\n                const ownership = parseFloat(psc.ownership_percentage || ((_psc$natures_of_contr5 = psc.natures_of_control) === null || _psc$natures_of_contr5 === void 0 ? void 0 : (_psc$natures_of_contr6 = _psc$natures_of_contr5[0]) === null || _psc$natures_of_contr6 === void 0 ? void 0 : _psc$natures_of_contr6.percentage) || 0);\n                const isRequired = ownership >= 25;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    ...commonStyles.card,\n                    padding: theme.spacing.md,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: theme.spacing.sm\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'flex-start'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        flex: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          margin: 0,\n                          fontWeight: theme.typography.fontWeight.medium\n                        },\n                        children: psc.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1342,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          margin: `${theme.spacing.xs} 0 0 0`,\n                          fontSize: theme.typography.fontSize.sm,\n                          color: theme.colors.textSecondary\n                        },\n                        children: [\"Current Ownership: \", ownership, \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1345,\n                        columnNumber: 33\n                      }, this), isRequired && /*#__PURE__*/_jsxDEV(Badge, {\n                        variant: \"warning\",\n                        style: {\n                          marginTop: theme.spacing.xs\n                        },\n                        children: \"Applicant Required (>=25%)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1349,\n                        columnNumber: 35\n                      }, this), !isRequired && ownership > 0 && /*#__PURE__*/_jsxDEV(Badge, {\n                        variant: \"info\",\n                        style: {\n                          marginTop: theme.spacing.xs\n                        },\n                        children: [\"Ownership: \", ownership, \"% (below 25% threshold)\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1354,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1341,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(Checkbox, {\n                      label: \"Add as Applicant\",\n                      checked: psc.confirmed || false,\n                      onChange: e => {\n                        const updated = [...pscs];\n                        updated[originalIndex].confirmed = e.target.checked;\n                        // Update both step2Data and step3Data\n                        setStep2Data({\n                          ...step2Data,\n                          company_data: {\n                            ...step2Data.company_data,\n                            pscs: updated\n                          }\n                        });\n                        setStep3Data(prev => ({\n                          ...prev,\n                          shareholders: updated\n                        }));\n                        handleDirectorsUpdate(directors, updated);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1359,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1340,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      marginTop: theme.spacing.sm,\n                      padding: theme.spacing.sm,\n                      background: theme.colors.gray50,\n                      borderRadius: theme.borderRadius.md\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        fontSize: theme.typography.fontSize.sm,\n                        fontWeight: theme.typography.fontWeight.medium,\n                        display: 'block',\n                        marginBottom: theme.spacing.xs\n                      },\n                      children: \"Shareholding Percentage:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1386,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      type: \"number\",\n                      min: \"0\",\n                      max: \"100\",\n                      step: \"0.1\",\n                      placeholder: \"Enter %\",\n                      value: psc.ownership_percentage || ownership || '',\n                      onChange: e => {\n                        const updated = [...pscs];\n                        updated[originalIndex].ownership_percentage = parseFloat(e.target.value) || 0;\n                        // Update both step2Data and step3Data\n                        setStep2Data({\n                          ...step2Data,\n                          company_data: {\n                            ...step2Data.company_data,\n                            pscs: updated\n                          }\n                        });\n                        setStep3Data(prev => ({\n                          ...prev,\n                          shareholders: updated\n                        }));\n                        handleDirectorsUpdate(directors, updated);\n                      },\n                      style: {\n                        width: '150px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1394,\n                      columnNumber: 31\n                    }, this), parseFloat(psc.ownership_percentage || ownership || 0) >= 25 && /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: `${theme.spacing.xs} 0 0 0`,\n                        fontSize: theme.typography.fontSize.xs,\n                        color: theme.colors.warning,\n                        fontWeight: theme.typography.fontWeight.medium\n                      },\n                      children: \"This person owns 25% or more and will be required to complete applicant details.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1418,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1380,\n                    columnNumber: 29\n                  }, this)]\n                }, originalIndex, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1333,\n                  columnNumber: 27\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1321,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1312,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true);\n      })(), step3Data.applicants_required.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          padding: theme.spacing.md,\n          background: theme.colors.warningLight,\n          marginBottom: theme.spacing.lg\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `0 0 ${theme.spacing.sm} 0`\n          },\n          children: \"Applicants Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1446,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: theme.typography.fontSize.sm\n          },\n          children: [\"The following \", step3Data.applicants_required.length, \" person(s) will need to complete applicant details in the next step:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1447,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            margin: `${theme.spacing.sm} 0 0 0`,\n            paddingLeft: theme.spacing.lg\n          },\n          children: step3Data.applicants_required.map((app, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: theme.spacing.xs\n            },\n            children: [app.name, \" (\", app.role, \")\"]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1452,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1450,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1440,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1461,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          disabled: step3Data.applicants_required.length === 0,\n          children: \"Next: Applicant Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1464,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1460,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1155,\n      columnNumber: 9\n    }, this), step === 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Applicant Personal Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1478,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Complete details for each required applicant.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1485,\n        columnNumber: 11\n      }, this), step3Data.applicants_required.map((applicant, applicantIndex) => {\n        const applicantData = step4Data.applicants[applicantIndex] || {\n          person_id: applicant.person_id,\n          name: applicant.name,\n          role: applicant.role,\n          first_name: '',\n          last_name: '',\n          date_of_birth: '',\n          nationality: '',\n          email: '',\n          phone: '',\n          current_address: '',\n          previous_address: '',\n          employment_status: '',\n          occupation: '',\n          employment_start_date: '',\n          net_monthly_income: '',\n          experience_tier: '',\n          adverse_credit_band: '',\n          source_of_deposit: '',\n          exit_strategy: ''\n        };\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...commonStyles.card,\n            padding: theme.spacing.xl,\n            marginBottom: theme.spacing.xl\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.lg} 0`\n            },\n            children: [applicant.name, \" - \", applicant.role]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1518,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: theme.spacing.md,\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              label: \"First Name\",\n              value: applicantData.first_name,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  first_name: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1523,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Last Name\",\n              value: applicantData.last_name,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  last_name: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1533,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Date of Birth\",\n              type: \"date\",\n              value: applicantData.date_of_birth,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  date_of_birth: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1543,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Nationality\",\n              value: applicantData.nationality,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  nationality: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1554,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Email\",\n              type: \"email\",\n              value: applicantData.email,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  email: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1563,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Phone\",\n              type: \"tel\",\n              value: applicantData.phone,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  phone: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1573,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1522,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n            },\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1585,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(Textarea, {\n              label: \"Current Address\",\n              value: applicantData.current_address,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  current_address: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              rows: 3,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1587,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n              label: \"Previous Address (only if current address < 3 years)\",\n              value: applicantData.previous_address,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  previous_address: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              rows: 3,\n              style: {\n                marginTop: theme.spacing.md\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1598,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1586,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n            },\n            children: \"Employment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1611,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: theme.spacing.md,\n              marginBottom: theme.spacing.lg\n            },\n            children: [/*#__PURE__*/_jsxDEV(Select, {\n              label: \"Employment Status\",\n              value: applicantData.employment_status,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  employment_status: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1622,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"employed\",\n                children: \"Employed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1623,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"self_employed\",\n                children: \"Self-Employed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1624,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"retired\",\n                children: \"Retired\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1625,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"unemployed\",\n                children: \"Unemployed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1626,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1613,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Occupation\",\n              value: applicantData.occupation,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  occupation: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1628,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Employment Start Date\",\n              type: \"date\",\n              value: applicantData.employment_start_date,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  employment_start_date: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1637,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              label: \"Net Monthly Income\",\n              type: \"number\",\n              value: applicantData.net_monthly_income,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  net_monthly_income: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1647,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1612,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n            },\n            children: \"Underwriting Flags\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1659,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(Select, {\n              label: \"Borrower Experience Tier\",\n              value: applicantData.experience_tier,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  experience_tier: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1670,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"0\",\n                children: \"0 deals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1671,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1-3\",\n                children: \"1-3 deals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1672,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"4-10\",\n                children: \"4-10 deals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1673,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"10+\",\n                children: \"10+ deals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1674,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1661,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              label: \"Adverse Credit Band\",\n              value: applicantData.adverse_credit_band,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  adverse_credit_band: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1685,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"none\",\n                children: \"None\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1686,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"minor\",\n                children: \"Minor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1687,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"significant\",\n                children: \"Significant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1688,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1676,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              label: \"Source of Deposit\",\n              value: applicantData.source_of_deposit,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  source_of_deposit: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1699,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"savings\",\n                children: \"Savings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1700,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sale_of_property\",\n                children: \"Sale of Property\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1701,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"gift\",\n                children: \"Gift\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1702,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"inheritance\",\n                children: \"Inheritance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1703,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1704,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1690,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              label: \"Intended Exit Strategy\",\n              value: applicantData.exit_strategy,\n              onChange: e => {\n                const updated = [...step4Data.applicants];\n                updated[applicantIndex] = {\n                  ...applicantData,\n                  exit_strategy: e.target.value\n                };\n                setStep4Data({\n                  ...step4Data,\n                  applicants: updated\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1715,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sale\",\n                children: \"Sale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1716,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"refinance\",\n                children: \"Refinance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1717,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"rental_income\",\n                children: \"Rental Income\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1718,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1719,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1706,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1660,\n            columnNumber: 17\n          }, this)]\n        }, applicantIndex, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1727,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          children: \"Next: Financial Snapshot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1730,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1726,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1477,\n      columnNumber: 9\n    }, this), step === 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Financial Snapshot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1740,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Provide your financial information. You can choose quick mode (totals only) or detailed mode (line-item breakdown).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1747,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.lg\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          label: \"Mode\",\n          value: step5Data.mode,\n          onChange: e => setStep5Data({\n            ...step5Data,\n            mode: e.target.value\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"quick\",\n            children: \"Quick Mode (Totals Only)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1757,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"detailed\",\n            children: \"Detailed Mode (Line-Item Breakdown)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1758,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1752,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1751,\n        columnNumber: 11\n      }, this), step5Data.mode === 'quick' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n          gap: theme.spacing.lg\n        },\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          label: \"Total Income\",\n          type: \"number\",\n          value: step5Data.income_total,\n          onChange: e => setStep5Data({\n            ...step5Data,\n            income_total: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1764,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Total Expenditure\",\n          type: \"number\",\n          value: step5Data.expenditure_total,\n          onChange: e => setStep5Data({\n            ...step5Data,\n            expenditure_total: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1770,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Total Assets\",\n          type: \"number\",\n          value: step5Data.assets_total,\n          onChange: e => setStep5Data({\n            ...step5Data,\n            assets_total: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1776,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          label: \"Total Liabilities\",\n          type: \"number\",\n          value: step5Data.liabilities_total,\n          onChange: e => setStep5Data({\n            ...step5Data,\n            liabilities_total: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1782,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1763,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: \"Income Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1791,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: theme.spacing.lg\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => {\n              setStep5Data({\n                ...step5Data,\n                income_breakdown: [...step5Data.income_breakdown, {\n                  description: '',\n                  amount: ''\n                }]\n              });\n            },\n            children: \"+ Add Income Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1793,\n            columnNumber: 17\n          }, this), step5Data.income_breakdown.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: theme.spacing.sm,\n              marginTop: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Description\",\n              value: item.description,\n              onChange: e => {\n                const updated = [...step5Data.income_breakdown];\n                updated[index].description = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  income_breakdown: updated\n                });\n              },\n              style: {\n                flex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1807,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              placeholder: \"Amount\",\n              value: item.amount,\n              onChange: e => {\n                const updated = [...step5Data.income_breakdown];\n                updated[index].amount = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  income_breakdown: updated\n                });\n              },\n              style: {\n                width: '150px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1817,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                setStep5Data({\n                  ...step5Data,\n                  income_breakdown: step5Data.income_breakdown.filter((_, i) => i !== index)\n                });\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1828,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1806,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1792,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n          },\n          children: \"Expenditure Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1844,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: theme.spacing.lg\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => {\n              setStep5Data({\n                ...step5Data,\n                expenditure_breakdown: [...step5Data.expenditure_breakdown, {\n                  description: '',\n                  amount: ''\n                }]\n              });\n            },\n            children: \"+ Add Expenditure Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1846,\n            columnNumber: 17\n          }, this), step5Data.expenditure_breakdown.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: theme.spacing.sm,\n              marginTop: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Description\",\n              value: item.description,\n              onChange: e => {\n                const updated = [...step5Data.expenditure_breakdown];\n                updated[index].description = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  expenditure_breakdown: updated\n                });\n              },\n              style: {\n                flex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1860,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              placeholder: \"Amount\",\n              value: item.amount,\n              onChange: e => {\n                const updated = [...step5Data.expenditure_breakdown];\n                updated[index].amount = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  expenditure_breakdown: updated\n                });\n              },\n              style: {\n                width: '150px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1870,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                setStep5Data({\n                  ...step5Data,\n                  expenditure_breakdown: step5Data.expenditure_breakdown.filter((_, i) => i !== index)\n                });\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1881,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1859,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1845,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n          },\n          children: \"Assets Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1897,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: theme.spacing.lg\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => {\n              setStep5Data({\n                ...step5Data,\n                assets_breakdown: [...step5Data.assets_breakdown, {\n                  description: '',\n                  amount: ''\n                }]\n              });\n            },\n            children: \"+ Add Asset Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1899,\n            columnNumber: 17\n          }, this), step5Data.assets_breakdown.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: theme.spacing.sm,\n              marginTop: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Description\",\n              value: item.description,\n              onChange: e => {\n                const updated = [...step5Data.assets_breakdown];\n                updated[index].description = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  assets_breakdown: updated\n                });\n              },\n              style: {\n                flex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1913,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              placeholder: \"Amount\",\n              value: item.amount,\n              onChange: e => {\n                const updated = [...step5Data.assets_breakdown];\n                updated[index].amount = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  assets_breakdown: updated\n                });\n              },\n              style: {\n                width: '150px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1923,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                setStep5Data({\n                  ...step5Data,\n                  assets_breakdown: step5Data.assets_breakdown.filter((_, i) => i !== index)\n                });\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1934,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1912,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1898,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0`\n          },\n          children: \"Liabilities Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1950,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => {\n              setStep5Data({\n                ...step5Data,\n                liabilities_breakdown: [...step5Data.liabilities_breakdown, {\n                  description: '',\n                  amount: ''\n                }]\n              });\n            },\n            children: \"+ Add Liability Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1952,\n            columnNumber: 17\n          }, this), step5Data.liabilities_breakdown.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: theme.spacing.sm,\n              marginTop: theme.spacing.sm\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Description\",\n              value: item.description,\n              onChange: e => {\n                const updated = [...step5Data.liabilities_breakdown];\n                updated[index].description = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  liabilities_breakdown: updated\n                });\n              },\n              style: {\n                flex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1966,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              placeholder: \"Amount\",\n              value: item.amount,\n              onChange: e => {\n                const updated = [...step5Data.liabilities_breakdown];\n                updated[index].amount = e.target.value;\n                setStep5Data({\n                  ...step5Data,\n                  liabilities_breakdown: updated\n                });\n              },\n              style: {\n                width: '150px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1976,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                setStep5Data({\n                  ...step5Data,\n                  liabilities_breakdown: step5Data.liabilities_breakdown.filter((_, i) => i !== index)\n                });\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1987,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1965,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1951,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1790,\n        columnNumber: 13\n      }, this), ((profileData === null || profileData === void 0 ? void 0 : profileData.charges_summary) && profileData.charges_summary.total_charges > 0 || ((_step2Data$company_da = step2Data.company_data) === null || _step2Data$company_da === void 0 ? void 0 : _step2Data$company_da.charges_summary) && step2Data.company_data.charges_summary.total_charges > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          marginTop: theme.spacing.xl,\n          padding: theme.spacing.lg,\n          background: theme.colors.gray50\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: theme.typography.fontSize.lg,\n            fontWeight: theme.typography.fontWeight.semibold,\n            marginBottom: theme.spacing.md\n          },\n          children: \"Company Charges (from Companies House)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2014,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: theme.typography.fontSize.sm,\n            color: theme.colors.textSecondary,\n            marginBottom: theme.spacing.md\n          },\n          children: \"The following charges are registered against your company. These are automatically included in your financial profile and will be visible to lenders when you submit applications.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2021,\n          columnNumber: 15\n        }, this), (_step2Data$company_da2 => {\n          const charges = (profileData === null || profileData === void 0 ? void 0 : profileData.charges_summary) || ((_step2Data$company_da2 = step2Data.company_data) === null || _step2Data$company_da2 === void 0 ? void 0 : _step2Data$company_da2.charges_summary) || {};\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n              gap: theme.spacing.md,\n              marginBottom: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.sm,\n                  color: theme.colors.textSecondary\n                },\n                children: \"Total Charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2033,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.lg,\n                  fontWeight: theme.typography.fontWeight.semibold\n                },\n                children: charges.total_charges || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2034,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2032,\n              columnNumber: 21\n            }, this), charges.active_charges > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.sm,\n                  color: theme.colors.textSecondary\n                },\n                children: \"Active Charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2040,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.lg,\n                  fontWeight: theme.typography.fontWeight.semibold,\n                  color: theme.colors.warning\n                },\n                children: charges.active_charges || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2041,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2039,\n              columnNumber: 23\n            }, this), charges.satisfied_charges > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.sm,\n                  color: theme.colors.textSecondary\n                },\n                children: \"Satisfied Charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2048,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: theme.typography.fontSize.lg,\n                  fontWeight: theme.typography.fontWeight.semibold,\n                  color: theme.colors.success\n                },\n                children: charges.satisfied_charges || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2049,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2047,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2031,\n            columnNumber: 19\n          }, this);\n        })(), ((_step2Data$company_da3, _charges$charges_summ) => {\n          const charges = (profileData === null || profileData === void 0 ? void 0 : profileData.charges_summary) || ((_step2Data$company_da3 = step2Data.company_data) === null || _step2Data$company_da3 === void 0 ? void 0 : _step2Data$company_da3.charges_summary) || {};\n          if ((_charges$charges_summ = charges.charges_summary) !== null && _charges$charges_summ !== void 0 && _charges$charges_summ.active && charges.charges_summary.active.length > 0) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: theme.spacing.md\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontSize: theme.typography.fontSize.base,\n                  fontWeight: theme.typography.fontWeight.semibold,\n                  marginBottom: theme.spacing.sm,\n                  color: theme.colors.warning\n                },\n                children: \"Active Charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2062,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gap: theme.spacing.sm\n                },\n                children: [charges.charges_summary.active.slice(0, 3).map((charge, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: theme.spacing.sm,\n                    background: theme.colors.white,\n                    borderRadius: theme.borderRadius.md,\n                    borderLeft: `3px solid ${theme.colors.warning}`\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0,\n                      fontWeight: theme.typography.fontWeight.medium,\n                      fontSize: theme.typography.fontSize.sm\n                    },\n                    children: charge.charge_code || charge.charge_number || `Charge ${idx + 1}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2078,\n                    columnNumber: 29\n                  }, this), charge.created_on && /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: `${theme.spacing.xs} 0 0 0`,\n                      fontSize: theme.typography.fontSize.xs,\n                      color: theme.colors.textSecondary\n                    },\n                    children: [\"Created: \", new Date(charge.created_on).toLocaleDateString('en-GB')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2082,\n                    columnNumber: 31\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2072,\n                  columnNumber: 27\n                }, this)), charges.charges_summary.active.length > 3 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: `${theme.spacing.xs} 0 0 0`,\n                    fontSize: theme.typography.fontSize.xs,\n                    color: theme.colors.textSecondary,\n                    fontStyle: 'italic'\n                  },\n                  children: [\"... and \", charges.charges_summary.active.length - 3, \" more active charge(s)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2089,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2070,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2061,\n              columnNumber: 21\n            }, this);\n          }\n          return null;\n        })()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2008,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          children: \"Next: Bank Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2111,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1739,\n      columnNumber: 9\n    }, this), step === 6 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Bank Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Connect your bank account via Open Banking or upload PDF statements.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2128,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.xl\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          label: \"Method\",\n          value: step6Data.method,\n          onChange: e => setStep6Data({\n            ...step6Data,\n            method: e.target.value\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"open_banking\",\n            children: \"Open Banking (Recommended)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pdf_upload\",\n            children: \"Upload PDF Statements\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2133,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2132,\n        columnNumber: 11\n      }, this), step6Data.method === 'open_banking' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: !step6Data.open_banking_connected ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginBottom: theme.spacing.md\n            },\n            children: \"Connect your business bank account via Open Banking. We support business accounts first, with personal accounts as an option if business accounts are unavailable.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2147,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            label: \"Bank Provider\",\n            value: step6Data.open_banking_provider,\n            onChange: e => setStep6Data({\n              ...step6Data,\n              open_banking_provider: e.target.value\n            }),\n            style: {\n              marginBottom: theme.spacing.md\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select your bank...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2156,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"barclays\",\n              children: \"Barclays\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2157,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hsbc\",\n              children: \"HSBC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2158,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"lloyds\",\n              children: \"Lloyds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2159,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"natwest\",\n              children: \"NatWest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2160,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"santander\",\n              children: \"Santander\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2161,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"other\",\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2162,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2150,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleConnectOpenBanking,\n            loading: loading,\n            disabled: !step6Data.open_banking_provider,\n            children: \"Connect Open Banking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2164,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2146,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...commonStyles.card,\n            padding: theme.spacing.lg,\n            background: theme.colors.successLight\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontWeight: theme.typography.fontWeight.medium\n            },\n            children: \"\\u2713 Open Banking Connected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2179,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: `${theme.spacing.sm} 0 0 0`,\n              fontSize: theme.typography.fontSize.sm\n            },\n            children: [step6Data.accounts.length, \" account(s) connected\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2182,\n            columnNumber: 19\n          }, this), step6Data.accounts.map((account, index) => {\n            var _account$account_numb;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: theme.spacing.md,\n                padding: theme.spacing.md,\n                background: theme.colors.white,\n                borderRadius: theme.borderRadius.md\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontWeight: theme.typography.fontWeight.medium\n                },\n                children: [account.account_name || 'Account', \" - ****\", ((_account$account_numb = account.account_number) === null || _account$account_numb === void 0 ? void 0 : _account$account_numb.slice(-4)) || '****']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2192,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: `${theme.spacing.xs} 0 0 0`,\n                  fontSize: theme.typography.fontSize.sm,\n                  color: theme.colors.textSecondary\n                },\n                children: [\"Balance: \\xA3\", parseFloat(account.balance || 0).toLocaleString('en-GB')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2195,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2186,\n              columnNumber: 21\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2174,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2144,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginBottom: theme.spacing.md\n          },\n          children: \"Upload your last 3 months of bank statements (PDF format only).\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2205,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onDragEnter: e => {\n            e.preventDefault();\n            e.stopPropagation();\n            setDragActive(true);\n          },\n          onDragLeave: e => {\n            e.preventDefault();\n            e.stopPropagation();\n            setDragActive(false);\n          },\n          onDragOver: e => {\n            e.preventDefault();\n            e.stopPropagation();\n          },\n          onDrop: e => {\n            e.preventDefault();\n            e.stopPropagation();\n            setDragActive(false);\n            if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n              handleFileUpload(e.dataTransfer.files, 'bank_statement', 'bank');\n            }\n          },\n          style: {\n            padding: theme.spacing.xl,\n            border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\n            borderRadius: theme.borderRadius.md,\n            textAlign: 'center',\n            background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\n            cursor: 'pointer',\n            marginBottom: theme.spacing.md\n          },\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            multiple: true,\n            accept: \".pdf\",\n            style: {\n              display: 'none'\n            },\n            onChange: e => {\n              if (e.target.files && e.target.files.length > 0) {\n                handleFileUpload(e.target.files, 'bank_statement', 'bank');\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2242,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '48px',\n              marginBottom: theme.spacing.sm\n            },\n            children: \"\\uD83D\\uDCC4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2254,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontSize: theme.typography.fontSize.lg,\n              fontWeight: theme.typography.fontWeight.semibold\n            },\n            children: \"Drag and drop PDF statements here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2255,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              color: theme.colors.textSecondary\n            },\n            children: \"or click to browse \\u2022 PDF only \\u2022 Max 10MB per file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2258,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2208,\n          columnNumber: 15\n        }, this), step6Data.pdf_statements.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginBottom: theme.spacing.sm\n            },\n            children: \"Uploaded Statements:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2264,\n            columnNumber: 19\n          }, this), step6Data.pdf_statements.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: theme.spacing.sm,\n              background: theme.colors.gray50,\n              borderRadius: theme.borderRadius.md,\n              marginBottom: theme.spacing.xs,\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: file.name || `Statement ${index + 1}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2275,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                setStep6Data({\n                  ...step6Data,\n                  pdf_statements: step6Data.pdf_statements.filter((_, i) => i !== index)\n                });\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2276,\n              columnNumber: 23\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2266,\n            columnNumber: 21\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2263,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2204,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2296,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          children: \"Next: Documents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2299,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2295,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2120,\n      columnNumber: 9\n    }, this), step === 7 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Documents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2309,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Upload required company and personal documents. You can mark documents as \\\"not available yet\\\" with a reason.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2316,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: \"Company Documents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2322,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: theme.spacing.lg\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `0 0 ${theme.spacing.sm} 0`,\n              fontSize: theme.typography.fontSize.base\n            },\n            children: \"Statutory Accounts (Last 2 Years)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onDragEnter: e => {\n              e.preventDefault();\n              setDragActive(true);\n            },\n            onDragLeave: e => {\n              e.preventDefault();\n              setDragActive(false);\n            },\n            onDragOver: e => e.preventDefault(),\n            onDrop: e => {\n              e.preventDefault();\n              setDragActive(false);\n              if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n                handleFileUpload(e.dataTransfer.files, 'statutory_accounts', 'company');\n              }\n            },\n            style: {\n              padding: theme.spacing.lg,\n              border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\n              borderRadius: theme.borderRadius.md,\n              textAlign: 'center',\n              background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\n              cursor: 'pointer',\n              marginBottom: theme.spacing.sm\n            },\n            onClick: () => {\n              const input = document.createElement('input');\n              input.type = 'file';\n              input.multiple = true;\n              input.accept = '.pdf,.jpg,.jpeg,.png';\n              input.onchange = e => {\n                if (e.target.files && e.target.files.length > 0) {\n                  handleFileUpload(e.target.files, 'statutory_accounts', 'company');\n                }\n              };\n              input.click();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '32px',\n                marginBottom: theme.spacing.xs\n              },\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                fontSize: theme.typography.fontSize.sm\n              },\n              children: \"Drag and drop or click to upload \\u2022 PDF, JPG, PNG \\u2022 Max 10MB per file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2368,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2328,\n            columnNumber: 15\n          }, this), step7Data.company_documents.statutory_accounts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: theme.spacing.sm\n            },\n            children: step7Data.company_documents.statutory_accounts.map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: theme.spacing.sm,\n                background: theme.colors.gray50,\n                borderRadius: theme.borderRadius.md,\n                marginBottom: theme.spacing.xs,\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: theme.typography.fontSize.sm\n                },\n                children: doc.file_name || `Document ${index + 1}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2384,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                size: \"sm\",\n                onClick: () => {\n                  const updated = {\n                    ...step7Data\n                  };\n                  updated.company_documents.statutory_accounts = updated.company_documents.statutory_accounts.filter((_, i) => i !== index);\n                  setStep7Data(updated);\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2387,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2375,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2373,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `0 0 ${theme.spacing.sm} 0`,\n              fontSize: theme.typography.fontSize.base\n            },\n            children: \"Management Accounts (if available)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onDragEnter: e => {\n              e.preventDefault();\n              setDragActive(true);\n            },\n            onDragLeave: e => {\n              e.preventDefault();\n              setDragActive(false);\n            },\n            onDragOver: e => e.preventDefault(),\n            onDrop: e => {\n              e.preventDefault();\n              setDragActive(false);\n              if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n                handleFileUpload(e.dataTransfer.files, 'management_accounts', 'company');\n              }\n            },\n            style: {\n              padding: theme.spacing.lg,\n              border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\n              borderRadius: theme.borderRadius.md,\n              textAlign: 'center',\n              background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\n              cursor: 'pointer',\n              marginBottom: theme.spacing.sm\n            },\n            onClick: () => {\n              const input = document.createElement('input');\n              input.type = 'file';\n              input.multiple = true;\n              input.accept = '.pdf,.jpg,.jpeg,.png';\n              input.onchange = e => {\n                if (e.target.files && e.target.files.length > 0) {\n                  handleFileUpload(e.target.files, 'management_accounts', 'company');\n                }\n              };\n              input.click();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '32px',\n                marginBottom: theme.spacing.xs\n              },\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2447,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                fontSize: theme.typography.fontSize.sm\n              },\n              children: \"Drag and drop or click to upload \\u2022 PDF, JPG, PNG \\u2022 Max 10MB per file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2448,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2408,\n            columnNumber: 15\n          }, this), step7Data.company_documents.management_accounts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: theme.spacing.sm\n            },\n            children: step7Data.company_documents.management_accounts.map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: theme.spacing.sm,\n                background: theme.colors.gray50,\n                borderRadius: theme.borderRadius.md,\n                marginBottom: theme.spacing.xs,\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: theme.typography.fontSize.sm\n                },\n                children: doc.file_name || `Document ${index + 1}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2464,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                size: \"sm\",\n                onClick: () => {\n                  const updated = {\n                    ...step7Data\n                  };\n                  updated.company_documents.management_accounts = updated.company_documents.management_accounts.filter((_, i) => i !== index);\n                  setStep7Data(updated);\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2467,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2455,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2453,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2404,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2321,\n        columnNumber: 11\n      }, this), step4Data.applicants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: `0 0 ${theme.spacing.md} 0`\n          },\n          children: \"Personal Documents (Applicants)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2488,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: `0 0 ${theme.spacing.sm} 0`,\n              fontSize: theme.typography.fontSize.base\n            },\n            children: \"Photo ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2490,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onDragEnter: e => {\n              e.preventDefault();\n              setDragActive(true);\n            },\n            onDragLeave: e => {\n              e.preventDefault();\n              setDragActive(false);\n            },\n            onDragOver: e => e.preventDefault(),\n            onDrop: e => {\n              e.preventDefault();\n              setDragActive(false);\n              if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n                handleFileUpload(e.dataTransfer.files, 'photo_id', 'personal');\n              }\n            },\n            style: {\n              padding: theme.spacing.lg,\n              border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\n              borderRadius: theme.borderRadius.md,\n              textAlign: 'center',\n              background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\n              cursor: 'pointer',\n              marginBottom: theme.spacing.sm\n            },\n            onClick: () => {\n              const input = document.createElement('input');\n              input.type = 'file';\n              input.multiple = true;\n              input.accept = '.pdf,.jpg,.jpeg,.png';\n              input.onchange = e => {\n                if (e.target.files && e.target.files.length > 0) {\n                  handleFileUpload(e.target.files, 'photo_id', 'personal');\n                }\n              };\n              input.click();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '32px',\n                marginBottom: theme.spacing.xs\n              },\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2532,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                fontSize: theme.typography.fontSize.sm\n              },\n              children: \"Drag and drop or click to upload \\u2022 PDF, JPG, PNG \\u2022 Max 10MB per file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2533,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2493,\n            columnNumber: 17\n          }, this), step7Data.personal_documents.photo_id.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: theme.spacing.sm\n            },\n            children: step7Data.personal_documents.photo_id.map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: theme.spacing.sm,\n                background: theme.colors.gray50,\n                borderRadius: theme.borderRadius.md,\n                marginBottom: theme.spacing.xs,\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: theme.typography.fontSize.sm\n                },\n                children: doc.file_name || `Document ${index + 1}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2549,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                size: \"sm\",\n                onClick: () => {\n                  const updated = {\n                    ...step7Data\n                  };\n                  updated.personal_documents.photo_id = updated.personal_documents.photo_id.filter((_, i) => i !== index);\n                  setStep7Data(updated);\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2552,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2540,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2538,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2489,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2487,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2572,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: nextStep,\n          children: \"Next: Review & Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2575,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2571,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2308,\n      columnNumber: 9\n    }, this), step === 8 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: theme.typography.fontSize['2xl'],\n          fontWeight: theme.typography.fontWeight.semibold,\n          margin: `0 0 ${theme.spacing.lg} 0`\n        },\n        children: \"Review & Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2585,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: theme.colors.textSecondary,\n          marginBottom: theme.spacing.lg\n        },\n        children: \"Please review all information before submitting your borrower profile for review.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2592,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: theme.spacing.lg,\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Account & Consent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2599,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2600,\n              columnNumber: 18\n            }, this), \" \", step1Data.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Mobile:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2601,\n              columnNumber: 18\n            }, this), \" \", step1Data.mobile_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2601,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"MFA Enabled:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2602,\n              columnNumber: 18\n            }, this), \" \", step1Data.mfa_enabled ? 'Yes' : 'No']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2602,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Consents:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2603,\n              columnNumber: 18\n            }, this), \" All confirmed\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2603,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2598,\n          columnNumber: 13\n        }, this), step2Data.company_data && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Company\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2609,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Company Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2610,\n              columnNumber: 20\n            }, this), \" \", step2Data.company_data.company_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2610,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Company Number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2611,\n              columnNumber: 20\n            }, this), \" \", step2Data.company_data.company_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2611,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2612,\n              columnNumber: 20\n            }, this), \" \", step2Data.company_data.company_status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2612,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2608,\n          columnNumber: 15\n        }, this), step3Data.applicants_required.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Applicants Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2619,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [step3Data.applicants_required.length, \" applicant(s) will need to complete details\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2620,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2618,\n          columnNumber: 15\n        }, this), step4Data.applicants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Applicants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2627,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [step4Data.applicants.length, \" applicant(s) details completed\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2628,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2626,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Financial Snapshot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2634,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Mode:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2635,\n              columnNumber: 18\n            }, this), \" \", step5Data.mode === 'quick' ? 'Quick (Totals Only)' : 'Detailed (Line-Item)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2635,\n            columnNumber: 15\n          }, this), step5Data.mode === 'quick' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Income:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2638,\n                columnNumber: 22\n              }, this), \" \\xA3\", parseFloat(step5Data.income_total || 0).toLocaleString('en-GB')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2638,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Expenditure:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2639,\n                columnNumber: 22\n              }, this), \" \\xA3\", parseFloat(step5Data.expenditure_total || 0).toLocaleString('en-GB')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2639,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Assets:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2640,\n                columnNumber: 22\n              }, this), \" \\xA3\", parseFloat(step5Data.assets_total || 0).toLocaleString('en-GB')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2640,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Liabilities:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2641,\n                columnNumber: 22\n              }, this), \" \\xA3\", parseFloat(step5Data.liabilities_total || 0).toLocaleString('en-GB')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2641,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Detailed breakdown provided\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2644,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2633,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Bank Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2650,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Method:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2651,\n              columnNumber: 18\n            }, this), \" \", step6Data.method === 'open_banking' ? 'Open Banking' : 'PDF Upload']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2651,\n            columnNumber: 15\n          }, this), step6Data.open_banking_connected && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Accounts Connected:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2653,\n              columnNumber: 20\n            }, this), \" \", step6Data.accounts.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2653,\n            columnNumber: 17\n          }, this), step6Data.pdf_statements.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"PDF Statements:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2656,\n              columnNumber: 20\n            }, this), \" \", step6Data.pdf_statements.length, \" file(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2656,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2649,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: commonStyles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: `0 0 ${theme.spacing.md} 0`\n            },\n            children: \"Documents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2662,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Statutory Accounts:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2663,\n              columnNumber: 18\n            }, this), \" \", step7Data.company_documents.statutory_accounts.length, \" file(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2663,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Management Accounts:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2664,\n              columnNumber: 18\n            }, this), \" \", step7Data.company_documents.management_accounts.length, \" file(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2664,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Photo ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2665,\n              columnNumber: 18\n            }, this), \" \", step7Data.personal_documents.photo_id.length, \" file(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2665,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2661,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2596,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyles.card,\n          padding: theme.spacing.lg,\n          background: theme.colors.warningLight,\n          marginBottom: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontWeight: theme.typography.fontWeight.medium\n          },\n          children: \"\\u26A0\\uFE0F Once submitted, your profile will be locked for editing until admin review is complete.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2675,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: `${theme.spacing.sm} 0 0 0`,\n            fontSize: theme.typography.fontSize.sm\n          },\n          children: \"You will be able to make changes only if admin requests them.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2678,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2669,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: theme.spacing.xl\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: prevStep,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2684,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleSubmitForReview,\n          loading: loading,\n          disabled: !step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search,\n          children: \"Submit for Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2687,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2683,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2584,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 702,\n    columnNumber: 5\n  }, this);\n}\n_s(BorrowerProfileWizard, \"RW9d0VgEh2XnLiNbm9GwDLPWAIw=\", false, function () {\n  return [useNavigate];\n});\n_c = BorrowerProfileWizard;\nexport default BorrowerProfileWizard;\nvar _c;\n$RefreshReg$(_c, \"BorrowerProfileWizard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","api","theme","commonStyles","Wizard","Input","Select","Textarea","Checkbox","Button","Badge","CompanyDetails","jsxDEV","_jsxDEV","Fragment","_Fragment","BorrowerProfileWizard","_s","_step2Data$company_da","navigate","step","setStep","loading","setLoading","error","setError","message","setMessage","profileStatus","setProfileStatus","profileData","setProfileData","stepUpAuth","setStepUpAuth","required","verified","stepUpPassword","setStepUpPassword","fileInputRef","companyDetailsSaveRef","selectedCompanyDocuments","setSelectedCompanyDocuments","dragActive","setDragActive","step1Data","setStep1Data","email","mobile_number","mfa_enabled","consent_privacy","consent_terms","consent_credit_search","step2Data","setStep2Data","company_number","company_name","company_search_type","company_data","company_search_results","show_search_results","trading_address","primary_contact_email","primary_contact_phone","confirmed","step3Data","setStep3Data","directors","shareholders","applicants_required","step4Data","setStep4Data","applicants","step5Data","setStep5Data","mode","income_total","expenditure_total","assets_total","liabilities_total","income_breakdown","expenditure_breakdown","assets_breakdown","liabilities_breakdown","step6Data","setStep6Data","method","open_banking_connected","open_banking_provider","accounts","pdf_statements","step7Data","setStep7Data","company_documents","statutory_accounts","management_accounts","personal_documents","photo_id","steps","loadProfileStatus","loadProfileData","res","get","data","Array","isArray","err","console","status","checkStepUpAuth","section","lastAuth","localStorage","getItem","now","Date","tenMinutes","parseInt","verifyStepUpAuth","post","password","setItem","toString","handleCompanySearch","params","active_directors","map","d","pscs","p","prev","_err$response","_err$response$data","response","companies","length","handleSelectCompany","_err$response2","_err$response2$data","companyNumber","_err$response3","_err$response3$data","handleConfirmCompany","normalizeName","name","toLowerCase","trim","replace","namesMatch","name1","name2","n1","n2","includes","shorter","longer","shorterWords","split","filter","w","longerWords","every","word","some","lw","handleDirectorsUpdate","applicantsRequired","matchedPscIds","Set","forEach","dir","resigned_on","matchedPsc","ownershipPercentage","psc","pscIndex","_psc$natures_of_contr","_psc$natures_of_contr2","add","parseFloat","ownership_percentage","natures_of_control","percentage","push","person_id","id","role","is_director","is_psc","_psc$natures_of_contr3","_psc$natures_of_contr4","has","ownership","matchesDirector","handleConnectOpenBanking","provider","_err$response4","_err$response4$data","handleFileUpload","files","documentType","category","formData","FormData","from","file","append","headers","updatedDocs","documents","_err$response5","_err$response5$data","handleSubmitForReview","payload","step1","step2","step3","step4","step5","step6","step7","_err$response6","_err$response6$data","nextStep","current","docResults","failed","saved","setTimeout","saveProgress","prevStep","handleStepClick","stepNumber","canNavigateToStep","company_registration_number","organisation_name","directors_data","shareholders_data","applicants_data","financial_data","bank_data","patch","handleSaveProgress","errorMsg","errors","e","document","join","style","position","top","left","right","bottom","background","display","alignItems","justifyContent","zIndex","children","card","maxWidth","padding","spacing","xl","margin","md","fileName","_jsxFileName","lineNumber","columnNumber","color","colors","textSecondary","marginBottom","lg","type","label","value","onChange","target","fontSize","typography","sm","gap","variant","onClick","currentStep","onStepClick","errorLight","errorDark","borderRadius","border","successLight","successDark","success","fontWeight","semibold","checked","gray50","warning","gray200","flexDirection","flex","cursor","normal","medium","href","rel","primary","textDecoration","stopPropagation","xs","marginTop","disabled","placeholder","maxHeight","overflowY","company","transition","white","onMouseEnter","currentTarget","primaryLight","borderColor","onMouseLeave","base","textPrimary","address_snippet","flexWrap","company_status","company_type","date_of_creation","toLocaleDateString","size","marginLeft","saveSelectedDocumentsRef","onSelectedDocumentsChange","onAutoImport","result","results","_prev$company_data","charges_summary","profileRes","matchedPscIndices","director","dirIndex","matchedPscs","_","index","unmatchedPscs","_matchingPsc$natures_","_matchingPsc$natures_2","matchingPsc","find","nationality","marginRight","updated","min","max","updatedPscs","findIndex","width","_psc$natures_of_contr5","_psc$natures_of_contr6","originalIndex","isRequired","warningLight","paddingLeft","app","idx","applicant","applicantIndex","applicantData","first_name","last_name","date_of_birth","phone","current_address","previous_address","employment_status","occupation","employment_start_date","net_monthly_income","experience_tier","adverse_credit_band","source_of_deposit","exit_strategy","gridTemplateColumns","rows","description","amount","item","i","total_charges","_step2Data$company_da2","charges","active_charges","satisfied_charges","_step2Data$company_da3","_charges$charges_summ","active","slice","charge","borderLeft","charge_code","charge_number","created_on","fontStyle","account","_account$account_numb","account_name","account_number","balance","toLocaleString","onDragEnter","preventDefault","onDragLeave","onDragOver","onDrop","dataTransfer","gray300","textAlign","_fileInputRef$current","click","ref","multiple","accept","input","createElement","onchange","doc","file_name","_c","$RefreshReg$"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/BorrowerProfileWizard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport Wizard from '../components/Wizard';\r\nimport Input from '../components/Input';\r\nimport Select from '../components/Select';\r\nimport Textarea from '../components/Textarea';\r\nimport Checkbox from '../components/Checkbox';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport CompanyDetails from '../components/CompanyDetails';\r\n\r\nfunction BorrowerProfileWizard() {\r\n  const navigate = useNavigate();\r\n  const [step, setStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n  const [profileStatus, setProfileStatus] = useState(null);\r\n  const [profileData, setProfileData] = useState(null); // Store full profile data including charges\r\n  const [stepUpAuth, setStepUpAuth] = useState({ required: false, verified: false });\r\n  const [stepUpPassword, setStepUpPassword] = useState('');\r\n  const fileInputRef = useRef(null);\r\n  const companyDetailsSaveRef = useRef(null);\r\n  const [selectedCompanyDocuments, setSelectedCompanyDocuments] = useState([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n\r\n  // Step 1: Account setup and consent\r\n  const [step1Data, setStep1Data] = useState({\r\n    email: '',\r\n    mobile_number: '',\r\n    mfa_enabled: false,\r\n    consent_privacy: false,\r\n    consent_terms: false,\r\n    consent_credit_search: false,\r\n  });\r\n\r\n  // Step 2: Company verification\r\n  const [step2Data, setStep2Data] = useState({\r\n    company_number: '',\r\n    company_name: '',\r\n    company_search_type: 'number', // 'number' or 'name'\r\n    company_data: null,\r\n    company_search_results: [], // For storing search results when searching by name\r\n    show_search_results: false, // Whether to show the search results list\r\n    trading_address: '',\r\n    primary_contact_email: '',\r\n    primary_contact_phone: '',\r\n    confirmed: false,\r\n  });\r\n\r\n  // Step 3: Directors and shareholders\r\n  const [step3Data, setStep3Data] = useState({\r\n    directors: [],\r\n    shareholders: [],\r\n    applicants_required: [],\r\n  });\r\n\r\n  // Step 4: Applicant personal details\r\n  const [step4Data, setStep4Data] = useState({\r\n    applicants: [], // Array of applicant objects\r\n  });\r\n\r\n  // Step 5: Financial snapshot\r\n  const [step5Data, setStep5Data] = useState({\r\n    mode: 'quick', // 'quick' or 'detailed'\r\n    income_total: '',\r\n    expenditure_total: '',\r\n    assets_total: '',\r\n    liabilities_total: '',\r\n    income_breakdown: [],\r\n    expenditure_breakdown: [],\r\n    assets_breakdown: [],\r\n    liabilities_breakdown: [],\r\n  });\r\n\r\n  // Step 6: Bank data\r\n  const [step6Data, setStep6Data] = useState({\r\n    method: 'open_banking', // 'open_banking' or 'pdf_upload'\r\n    open_banking_connected: false,\r\n    open_banking_provider: '',\r\n    accounts: [],\r\n    pdf_statements: [],\r\n  });\r\n\r\n  // Step 7: Documents\r\n  const [step7Data, setStep7Data] = useState({\r\n    company_documents: {\r\n      statutory_accounts: [],\r\n      management_accounts: [],\r\n    },\r\n    personal_documents: {\r\n      photo_id: [],\r\n    },\r\n  });\r\n\r\n  const steps = [\r\n    'Account & Consent',\r\n    'Company Verification',\r\n    'Directors & Shareholders',\r\n    'Applicant Details',\r\n    'Financial Snapshot',\r\n    'Bank Data',\r\n    'Documents',\r\n    'Review & Submit',\r\n  ];\r\n\r\n  useEffect(() => {\r\n    loadProfileStatus();\r\n    loadProfileData();\r\n  }, []);\r\n\r\n  const loadProfileData = async () => {\r\n    try {\r\n      const res = await api.get('/api/borrowers/profiles/');\r\n      const data = Array.isArray(res.data) ? res.data[0] : res.data;\r\n      setProfileData(data);\r\n    } catch (err) {\r\n      console.error('Failed to load profile data:', err);\r\n    }\r\n  };\r\n\r\n  const loadProfileStatus = async () => {\r\n    try {\r\n      const res = await api.get('/api/borrowers/profiles/status/');\r\n      setProfileStatus(res.data);\r\n      if (res.data.status === 'approved') {\r\n        setMessage('Your profile has been approved. You can now create projects.');\r\n      } else if (res.data.status === 'under_review') {\r\n        setMessage('Your profile is under review. You will be notified when it is approved.');\r\n      } else if (res.data.status === 'changes_requested') {\r\n        setMessage('Changes have been requested. Please review and update your profile.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load profile status:', err);\r\n    }\r\n  };\r\n\r\n  const checkStepUpAuth = async (section) => {\r\n    // Check if step-up auth is required and not recently verified\r\n    const lastAuth = localStorage.getItem('stepUpAuthTimestamp');\r\n    const now = Date.now();\r\n    const tenMinutes = 10 * 60 * 1000;\r\n\r\n    if (!lastAuth || (now - parseInt(lastAuth)) > tenMinutes) {\r\n      setStepUpAuth({ required: true, verified: false, section });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const verifyStepUpAuth = async () => {\r\n    try {\r\n      const res = await api.post('/api/auth/verify-password/', {\r\n        password: stepUpPassword,\r\n      });\r\n      if (res.data.verified) {\r\n        setStepUpAuth({ required: false, verified: true });\r\n        localStorage.setItem('stepUpAuthTimestamp', Date.now().toString());\r\n        setStepUpPassword('');\r\n        return true;\r\n      } else {\r\n        setError('Incorrect password. Please try again.');\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      setError('Password verification failed. Please try again.');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleCompanySearch = async () => {\r\n    if (step2Data.company_search_type === 'number') {\r\n      // Search by company number - direct lookup\r\n      if (!step2Data.company_number) {\r\n        setError('Please enter a company number');\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await api.get('/api/verification/company/get_full_company_details/', {\r\n          params: { company_number: step2Data.company_number },\r\n        });\r\n\r\n        if (res.data.error) {\r\n          setError(res.data.error);\r\n        } else {\r\n          setStep2Data({\r\n            ...step2Data,\r\n            company_data: res.data,\r\n            company_number: res.data.company_number || step2Data.company_number,\r\n            company_name: res.data.company_name || step2Data.company_name,\r\n            show_search_results: false,\r\n          });\r\n          // Initialize step3Data with directors and PSCs from company data\r\n          const directors = (res.data.active_directors || res.data.directors || []).map(d => ({ ...d, confirmed: false }));\r\n          const pscs = (res.data.pscs || []).map(p => ({ ...p, confirmed: false }));\r\n          setStep3Data(prev => ({\r\n            ...prev,\r\n            directors: directors,\r\n            shareholders: pscs,\r\n            applicants_required: [],\r\n          }));\r\n          setMessage('Company found! Please review and confirm the details.');\r\n        }\r\n      } catch (err) {\r\n        console.error('Company search error:', err);\r\n        setError(err.response?.data?.error || 'Failed to search company. Please try again.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      // Search by company name - show list of matches\r\n      if (!step2Data.company_name) {\r\n        setError('Please enter a company name');\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await api.get('/api/verification/company/search_companies/', {\r\n          params: { company_name: step2Data.company_name },\r\n        });\r\n\r\n        if (res.data.error) {\r\n          setError(res.data.error);\r\n        } else if (res.data.companies && res.data.companies.length > 0) {\r\n          if (res.data.companies.length === 1) {\r\n            // Only one result - automatically select it\r\n            await handleSelectCompany(res.data.companies[0].company_number);\r\n          } else {\r\n            // Multiple results - show list\r\n            setStep2Data({\r\n              ...step2Data,\r\n              company_search_results: res.data.companies,\r\n              show_search_results: true,\r\n            });\r\n            setMessage(`Found ${res.data.companies.length} matching companies. Please select one:`);\r\n          }\r\n        } else {\r\n          setError('No companies found matching that name. Please try a different search term.');\r\n        }\r\n      } catch (err) {\r\n        console.error('Company search error:', err);\r\n        setError(err.response?.data?.error || 'Failed to search company. Please try again.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSelectCompany = async (companyNumber) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await api.get('/api/verification/company/get_full_company_details/', {\r\n        params: { company_number: companyNumber },\r\n      });\r\n\r\n      if (res.data.error) {\r\n        setError(res.data.error);\r\n      } else {\r\n        setStep2Data({\r\n          ...step2Data,\r\n          company_data: res.data,\r\n          company_number: res.data.company_number,\r\n          company_name: res.data.company_name,\r\n          company_search_results: [],\r\n          show_search_results: false,\r\n        });\r\n        // Initialize step3Data with directors and PSCs from company data\r\n        const directors = (res.data.active_directors || res.data.directors || []).map(d => ({ ...d, confirmed: false }));\r\n        const pscs = (res.data.pscs || []).map(p => ({ ...p, confirmed: false }));\r\n        setStep3Data(prev => ({\r\n          ...prev,\r\n          directors: directors,\r\n          shareholders: pscs,\r\n          applicants_required: [],\r\n        }));\r\n        setMessage('Company found! Please review and confirm the details.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load company details:', err);\r\n      setError(err.response?.data?.error || 'Failed to load company details. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmCompany = () => {\r\n    setStep2Data({ ...step2Data, confirmed: true });\r\n    setMessage('Company details confirmed');\r\n  };\r\n\r\n  // Helper function to normalize names for matching\r\n  const normalizeName = (name) => {\r\n    if (!name) return '';\r\n    return name.toLowerCase().trim().replace(/\\s+/g, ' ');\r\n  };\r\n\r\n  // Helper function to check if two names match (fuzzy matching)\r\n  const namesMatch = (name1, name2) => {\r\n    const n1 = normalizeName(name1);\r\n    const n2 = normalizeName(name2);\r\n    // Exact match\r\n    if (n1 === n2) return true;\r\n    // Check if one contains the other (for cases like \"John Smith\" vs \"John A Smith\")\r\n    if (n1.includes(n2) || n2.includes(n1)) {\r\n      // Only match if the shorter name is at least 10 characters or if it's a clear substring\r\n      const shorter = n1.length < n2.length ? n1 : n2;\r\n      const longer = n1.length >= n2.length ? n1 : n2;\r\n      // Split into words and check if all words from shorter are in longer\r\n      const shorterWords = shorter.split(' ').filter(w => w.length > 2); // Ignore initials\r\n      const longerWords = longer.split(' ');\r\n      return shorterWords.every(word => longerWords.some(lw => lw.includes(word) || word.includes(lw)));\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const handleDirectorsUpdate = (directors, shareholders) => {\r\n    // Auto-flag applicants required\r\n    const applicantsRequired = [];\r\n    const matchedPscIds = new Set(); // Track which PSCs have been matched to directors\r\n    \r\n    // Process directors first\r\n    directors.forEach(dir => {\r\n      if (!dir.resigned_on && dir.confirmed) {\r\n        // Check if this director is also a PSC\r\n        let matchedPsc = null;\r\n        let ownershipPercentage = null;\r\n        \r\n        shareholders.forEach((psc, pscIndex) => {\r\n          if (namesMatch(dir.name, psc.name)) {\r\n            matchedPsc = psc;\r\n            matchedPscIds.add(pscIndex);\r\n            // Get ownership percentage\r\n            ownershipPercentage = parseFloat(\r\n              psc.ownership_percentage || \r\n              psc.natures_of_control?.[0]?.percentage || \r\n              0\r\n            );\r\n          }\r\n        });\r\n\r\n        // Create applicant entry (one per person, even if director + PSC)\r\n        applicantsRequired.push({\r\n          person_id: dir.id || dir.name,\r\n          name: dir.name,\r\n          role: matchedPsc ? 'Director & Shareholder' : 'Director',\r\n          ownership_percentage: ownershipPercentage,\r\n          is_director: true,\r\n          is_psc: !!matchedPsc,\r\n          required: true,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Process unmatched PSCs (those not matched to directors)\r\n    shareholders.forEach((psc, pscIndex) => {\r\n      if (matchedPscIds.has(pscIndex)) {\r\n        return; // Skip if already matched to a director\r\n      }\r\n\r\n      // Check if PSC is confirmed and has >=25% ownership\r\n      const ownership = parseFloat(\r\n        psc.ownership_percentage || \r\n        psc.natures_of_control?.[0]?.percentage || \r\n        0\r\n      );\r\n      \r\n      if (psc.confirmed && ownership >= 25) {\r\n        // Check if this PSC matches any director (shouldn't happen, but double-check)\r\n        const matchesDirector = directors.some(dir => \r\n          !dir.resigned_on && namesMatch(dir.name, psc.name)\r\n        );\r\n\r\n        if (!matchesDirector) {\r\n          // This is a PSC-only person (not a director)\r\n          applicantsRequired.push({\r\n            person_id: psc.id || psc.name,\r\n            name: psc.name,\r\n            role: 'Shareholder/PSC',\r\n            ownership_percentage: ownership,\r\n            is_director: false,\r\n            is_psc: true,\r\n            required: true,\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    setStep3Data({\r\n      directors: directors,\r\n      shareholders: shareholders,\r\n      applicants_required: applicantsRequired,\r\n    });\r\n  };\r\n\r\n  const handleConnectOpenBanking = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      // This would integrate with Open Banking provider\r\n      // For now, simulate the connection\r\n      const res = await api.post('/api/borrowers/profiles/connect-open-banking/', {\r\n        provider: step6Data.open_banking_provider,\r\n      });\r\n      \r\n      setStep6Data({\r\n        ...step6Data,\r\n        open_banking_connected: true,\r\n        accounts: res.data.accounts || [],\r\n        method: 'open_banking',\r\n      });\r\n      setMessage('Open Banking connected successfully');\r\n    } catch (err) {\r\n      console.error('Open Banking connection error:', err);\r\n      setError(err.response?.data?.error || 'Failed to connect Open Banking. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (files, documentType, category) => {\r\n    if (!files || files.length === 0) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const formData = new FormData();\r\n      Array.from(files).forEach(file => {\r\n        formData.append('files', file);\r\n      });\r\n      formData.append('document_type', documentType);\r\n      formData.append('category', category);\r\n\r\n      const res = await api.post('/api/borrowers/profiles/documents/upload/', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      // Update step 7 data\r\n      const updatedDocs = { ...step7Data };\r\n      if (category === 'company') {\r\n        if (documentType === 'statutory_accounts') {\r\n          updatedDocs.company_documents.statutory_accounts = [\r\n            ...updatedDocs.company_documents.statutory_accounts,\r\n            ...res.data.documents,\r\n          ];\r\n        } else if (documentType === 'management_accounts') {\r\n          updatedDocs.company_documents.management_accounts = [\r\n            ...updatedDocs.company_documents.management_accounts,\r\n            ...res.data.documents,\r\n          ];\r\n        }\r\n      } else if (category === 'personal' && documentType === 'photo_id') {\r\n        updatedDocs.personal_documents.photo_id = [\r\n          ...updatedDocs.personal_documents.photo_id,\r\n          ...res.data.documents,\r\n        ];\r\n      }\r\n\r\n      setStep7Data(updatedDocs);\r\n      setMessage(`Successfully uploaded ${files.length} file(s)`);\r\n    } catch (err) {\r\n      console.error('File upload error:', err);\r\n      setError(err.response?.data?.error || 'Failed to upload files');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmitForReview = async () => {\r\n    // Validate all required consents before submission\r\n    if (!step1Data.consent_privacy) {\r\n      setError('You must consent to the Privacy Policy to submit your profile.');\r\n      setStep(1); // Navigate back to consent step\r\n      return;\r\n    }\r\n    if (!step1Data.consent_terms) {\r\n      setError('You must accept the Terms and Conditions to submit your profile.');\r\n      setStep(1); // Navigate back to consent step\r\n      return;\r\n    }\r\n    if (!step1Data.consent_credit_search) {\r\n      setError('You must consent to credit search permission to submit your profile.');\r\n      setStep(1); // Navigate back to consent step\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const payload = {\r\n        step1: step1Data,\r\n        step2: step2Data,\r\n        step3: step3Data,\r\n        step4: step4Data,\r\n        step5: step5Data,\r\n        step6: step6Data,\r\n        step7: step7Data,\r\n      };\r\n\r\n      const res = await api.post('/api/borrowers/profiles/submit-for-review/', payload);\r\n      setMessage('Profile submitted for review successfully!');\r\n      await loadProfileStatus();\r\n      // Don't navigate away - keep wizard open so user can see confirmation\r\n    } catch (err) {\r\n      console.error('Submit error:', err);\r\n      setError(err.response?.data?.error || 'Failed to submit profile for review');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const nextStep = async () => {\r\n    if (step < steps.length) {\r\n      // If on step 2 (company verification) and there are selected documents, save them\r\n      if (step === 2 && companyDetailsSaveRef.current && selectedCompanyDocuments.length > 0) {\r\n        setLoading(true);\r\n        try {\r\n          const docResults = await companyDetailsSaveRef.current();\r\n          if (docResults.failed > 0) {\r\n            // Show warning but allow progression\r\n            setMessage(`Note: ${docResults.saved} document(s) saved. ${docResults.failed} document(s) could not be saved but you can continue.`);\r\n            setTimeout(() => setMessage(null), 5000);\r\n          } else if (docResults.saved > 0) {\r\n            setMessage(`${docResults.saved} document(s) saved to your profile.`);\r\n            setTimeout(() => setMessage(null), 3000);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error saving documents:', err);\r\n          // Don't block progression - just log the error\r\n          setMessage('Some documents could not be saved, but you can continue. You can try saving them again later.');\r\n          setTimeout(() => setMessage(null), 5000);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n      \r\n      setStep(step + 1);\r\n      setError(null);\r\n      // Don't clear message immediately - let it show for a bit\r\n      setTimeout(() => setMessage(null), 3000);\r\n      saveProgress(); // Auto-save when moving forward\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    if (step > 1) {\r\n      setStep(step - 1);\r\n      setError(null);\r\n      setMessage(null);\r\n    }\r\n  };\r\n\r\n  const handleStepClick = (stepNumber) => {\r\n    // Allow navigation to any completed step or the next step\r\n    if (stepNumber <= step + 1) {\r\n      setStep(stepNumber);\r\n      setError(null);\r\n      setMessage(null);\r\n      if (stepNumber > step) {\r\n        saveProgress(); // Auto-save when moving forward\r\n      }\r\n    }\r\n  };\r\n\r\n  const canNavigateToStep = (stepNumber) => {\r\n    // Allow navigation to any step up to the current step + 1\r\n    return stepNumber <= step + 1;\r\n  };\r\n\r\n  const saveProgress = async () => {\r\n    try {\r\n      // Save all step data to backend\r\n      const profileData = {\r\n        email: step1Data.email,\r\n        mobile_number: step1Data.mobile_number,\r\n        mfa_enabled: step1Data.mfa_enabled,\r\n        consent_privacy: step1Data.consent_privacy,\r\n        consent_terms: step1Data.consent_terms,\r\n        consent_credit_search: step1Data.consent_credit_search,\r\n        company_registration_number: step2Data.company_number,\r\n        organisation_name: step2Data.company_name,\r\n        trading_address: step2Data.trading_address,\r\n        primary_contact_email: step2Data.primary_contact_email,\r\n        primary_contact_phone: step2Data.primary_contact_phone,\r\n        company_data: step2Data.company_data,\r\n        directors_data: step3Data.directors,\r\n        shareholders_data: step3Data.shareholders,\r\n        applicants_data: step4Data.applicants,\r\n        financial_data: step5Data,\r\n        bank_data: step6Data,\r\n        company_documents: step7Data.company_documents,\r\n        personal_documents: step7Data.personal_documents,\r\n      };\r\n\r\n      await api.patch('/api/borrowers/profiles/me/', profileData);\r\n      // Don't show message for auto-save to avoid UI clutter\r\n    } catch (err) {\r\n      console.error('Failed to save progress:', err);\r\n      // Don't show error to user for auto-save, only log it\r\n    }\r\n  };\r\n\r\n  const handleSaveProgress = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      // Save selected company documents if any\r\n      if (companyDetailsSaveRef.current && selectedCompanyDocuments.length > 0) {\r\n        const docResults = await companyDetailsSaveRef.current();\r\n        if (docResults.failed > 0) {\r\n          const errorMsg = `${docResults.saved} document(s) saved successfully. ${docResults.failed} document(s) failed to save: ${docResults.errors.map(e => e.document).join(', ')}`;\r\n          setMessage(errorMsg);\r\n          setTimeout(() => setMessage(null), 5000);\r\n        } else if (docResults.saved > 0) {\r\n          setMessage(`${docResults.saved} document(s) saved to your profile.`);\r\n          setTimeout(() => setMessage(null), 3000);\r\n        }\r\n      }\r\n      \r\n      await saveProgress();\r\n      setMessage(prev => prev ? prev + ' Progress saved successfully!' : 'Progress saved successfully!');\r\n      setTimeout(() => setMessage(null), 3000);\r\n    } catch (err) {\r\n      setError('Failed to save progress. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Step-up authentication modal\r\n  if (stepUpAuth.required && !stepUpAuth.verified) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n      }}>\r\n        <div style={{\r\n          ...commonStyles.card,\r\n          maxWidth: '400px',\r\n          padding: theme.spacing.xl,\r\n        }}>\r\n          <h2 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Step-Up Authentication Required</h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Please enter your password to access this section.\r\n          </p>\r\n          <Input\r\n            type=\"password\"\r\n            label=\"Password\"\r\n            value={stepUpPassword}\r\n            onChange={(e) => setStepUpPassword(e.target.value)}\r\n            style={{ marginBottom: theme.spacing.md }}\r\n          />\r\n          {error && (\r\n            <p style={{ color: theme.colors.error, fontSize: theme.typography.fontSize.sm, marginBottom: theme.spacing.md }}>\r\n              {error}\r\n            </p>\r\n          )}\r\n          <div style={{ display: 'flex', gap: theme.spacing.sm }}>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={async () => {\r\n                const verified = await verifyStepUpAuth();\r\n                if (verified) {\r\n                  setError(null);\r\n                }\r\n              }}\r\n            >\r\n              Verify\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setStepUpAuth({ required: false, verified: false });\r\n                setStepUpPassword('');\r\n                prevStep();\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Wizard \r\n      steps={steps} \r\n      currentStep={step}\r\n      onStepClick={handleStepClick}\r\n      canNavigateToStep={canNavigateToStep}\r\n    >\r\n      {error && (\r\n        <div style={{\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.error}`,\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {message && (\r\n        <div style={{\r\n          background: theme.colors.successLight,\r\n          color: theme.colors.successDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.success}`,\r\n        }}>\r\n          {message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 1: Account setup and consent */}\r\n      {step === 1 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Account Setup & Consent\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Please provide your contact details and confirm your consents.\r\n          </p>\r\n\r\n          <div style={{ display: 'grid', gap: theme.spacing.lg, marginBottom: theme.spacing.xl }}>\r\n            <Input\r\n              label=\"Email Address\"\r\n              type=\"email\"\r\n              value={step1Data.email}\r\n              onChange={(e) => setStep1Data({ ...step1Data, email: e.target.value })}\r\n              required\r\n            />\r\n            <Input\r\n              label=\"Mobile Number\"\r\n              type=\"tel\"\r\n              value={step1Data.mobile_number}\r\n              onChange={(e) => setStep1Data({ ...step1Data, mobile_number: e.target.value })}\r\n              required\r\n            />\r\n            <Checkbox\r\n              label=\"Enable Multi-Factor Authentication (MFA)\"\r\n              checked={step1Data.mfa_enabled}\r\n              onChange={(e) => setStep1Data({ ...step1Data, mfa_enabled: e.target.checked })}\r\n            />\r\n          </div>\r\n\r\n          <div style={{\r\n            ...commonStyles.card,\r\n            padding: theme.spacing.lg,\r\n            marginBottom: theme.spacing.xl,\r\n            background: theme.colors.gray50,\r\n            border: `2px solid ${(!step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search) ? theme.colors.warning : theme.colors.gray200}`,\r\n          }}>\r\n            <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Required Consents</h3>\r\n            <p style={{ \r\n              fontSize: theme.typography.fontSize.sm, \r\n              color: theme.colors.textSecondary,\r\n              marginBottom: theme.spacing.md,\r\n            }}>\r\n              You must agree to all of the following to proceed with your profile setup.\r\n            </p>\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.md }}>\r\n              <div style={{ display: 'flex', alignItems: 'start', gap: theme.spacing.sm }}>\r\n                <Checkbox\r\n                  label=\"\"\r\n                  checked={step1Data.consent_privacy}\r\n                  onChange={(e) => setStep1Data({ ...step1Data, consent_privacy: e.target.checked })}\r\n                  required\r\n                />\r\n                <div style={{ flex: 1 }}>\r\n                  <label style={{ \r\n                    cursor: 'pointer',\r\n                    fontWeight: step1Data.consent_privacy ? theme.typography.fontWeight.normal : theme.typography.fontWeight.medium,\r\n                  }}>\r\n                    I consent to the{' '}\r\n                    <a \r\n                      href=\"/privacy-policy\" \r\n                      target=\"_blank\" \r\n                      rel=\"noopener noreferrer\"\r\n                      style={{ color: theme.colors.primary, textDecoration: 'underline' }}\r\n                      onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                      Privacy Policy\r\n                    </a>\r\n                  </label>\r\n                  {!step1Data.consent_privacy && (\r\n                    <p style={{ \r\n                      margin: `${theme.spacing.xs} 0 0 0`, \r\n                      fontSize: theme.typography.fontSize.xs, \r\n                      color: theme.colors.error \r\n                    }}>\r\n                      This consent is required\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', alignItems: 'start', gap: theme.spacing.sm }}>\r\n                <Checkbox\r\n                  label=\"\"\r\n                  checked={step1Data.consent_terms}\r\n                  onChange={(e) => setStep1Data({ ...step1Data, consent_terms: e.target.checked })}\r\n                  required\r\n                />\r\n                <div style={{ flex: 1 }}>\r\n                  <label style={{ \r\n                    cursor: 'pointer',\r\n                    fontWeight: step1Data.consent_terms ? theme.typography.fontWeight.normal : theme.typography.fontWeight.medium,\r\n                  }}>\r\n                    I accept the{' '}\r\n                    <a \r\n                      href=\"/terms-and-conditions\" \r\n                      target=\"_blank\" \r\n                      rel=\"noopener noreferrer\"\r\n                      style={{ color: theme.colors.primary, textDecoration: 'underline' }}\r\n                      onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                      Terms and Conditions\r\n                    </a>\r\n                  </label>\r\n                  {!step1Data.consent_terms && (\r\n                    <p style={{ \r\n                      margin: `${theme.spacing.xs} 0 0 0`, \r\n                      fontSize: theme.typography.fontSize.xs, \r\n                      color: theme.colors.error \r\n                    }}>\r\n                      This consent is required\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', alignItems: 'start', gap: theme.spacing.sm }}>\r\n                <Checkbox\r\n                  label=\"\"\r\n                  checked={step1Data.consent_credit_search}\r\n                  onChange={(e) => setStep1Data({ ...step1Data, consent_credit_search: e.target.checked })}\r\n                  required\r\n                />\r\n                <div style={{ flex: 1 }}>\r\n                  <label style={{ cursor: 'pointer' }}>\r\n                    I consent to credit search permission\r\n                  </label>\r\n                  <p style={{ \r\n                    margin: `${theme.spacing.xs} 0 0 0`, \r\n                    fontSize: theme.typography.fontSize.xs, \r\n                    color: theme.colors.textSecondary \r\n                  }}>\r\n                    We may perform credit checks as part of the application process\r\n                  </p>\r\n                  {!step1Data.consent_credit_search && (\r\n                    <p style={{ \r\n                      margin: `${theme.spacing.xs} 0 0 0`, \r\n                      fontSize: theme.typography.fontSize.xs, \r\n                      color: theme.colors.error \r\n                    }}>\r\n                      This consent is required\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: theme.spacing.xl }}>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={nextStep}\r\n              disabled={!step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search}\r\n            >\r\n              Next: Company Verification\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 2: Company verification */}\r\n      {step === 2 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Company Verification (UK Only)\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Search for your company using Companies House.\r\n          </p>\r\n\r\n          <div style={{ marginBottom: theme.spacing.lg }}>\r\n            <Select\r\n              label=\"Search By\"\r\n              value={step2Data.company_search_type}\r\n              onChange={(e) => setStep2Data({ ...step2Data, company_search_type: e.target.value })}\r\n            >\r\n              <option value=\"number\">Company Number</option>\r\n              <option value=\"name\">Company Name</option>\r\n            </Select>\r\n\r\n            {step2Data.company_search_type === 'number' ? (\r\n              <Input\r\n                label=\"Company Number\"\r\n                value={step2Data.company_number}\r\n                onChange={(e) => setStep2Data({ ...step2Data, company_number: e.target.value })}\r\n                placeholder=\"e.g., 12345678\"\r\n                style={{ marginTop: theme.spacing.md }}\r\n              />\r\n            ) : (\r\n              <Input\r\n                label=\"Company Name\"\r\n                value={step2Data.company_name}\r\n                onChange={(e) => setStep2Data({ ...step2Data, company_name: e.target.value })}\r\n                placeholder=\"e.g., Example Company Ltd\"\r\n                style={{ marginTop: theme.spacing.md }}\r\n              />\r\n            )}\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={handleCompanySearch}\r\n              loading={loading}\r\n              style={{ marginTop: theme.spacing.md }}\r\n            >\r\n              Search Company\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Search Results List - shown when searching by name and multiple matches found */}\r\n          {step2Data.show_search_results && step2Data.company_search_results.length > 0 && (\r\n            <div style={{ marginBottom: theme.spacing.xl }}>\r\n              <h3 style={{\r\n                fontSize: theme.typography.fontSize.lg,\r\n                fontWeight: theme.typography.fontWeight.semibold,\r\n                margin: `0 0 ${theme.spacing.md} 0`,\r\n              }}>\r\n                Select Company ({step2Data.company_search_results.length} found)\r\n              </h3>\r\n              <div style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: theme.spacing.sm,\r\n                maxHeight: '400px',\r\n                overflowY: 'auto',\r\n                border: `1px solid ${theme.colors.gray200}`,\r\n                borderRadius: theme.borderRadius.md,\r\n                padding: theme.spacing.md,\r\n                background: theme.colors.gray50,\r\n              }}>\r\n                {step2Data.company_search_results.map((company) => (\r\n                  <div\r\n                    key={company.company_number}\r\n                    onClick={() => handleSelectCompany(company.company_number)}\r\n                    style={{\r\n                      padding: theme.spacing.md,\r\n                      border: `1px solid ${theme.colors.gray200}`,\r\n                      borderRadius: theme.borderRadius.md,\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.2s',\r\n                      background: theme.colors.white,\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = theme.colors.primaryLight;\r\n                      e.currentTarget.style.borderColor = theme.colors.primary;\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = theme.colors.white;\r\n                      e.currentTarget.style.borderColor = theme.colors.gray200;\r\n                    }}\r\n                  >\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                      <div style={{ flex: 1 }}>\r\n                        <p style={{\r\n                          margin: 0,\r\n                          fontWeight: theme.typography.fontWeight.semibold,\r\n                          fontSize: theme.typography.fontSize.base,\r\n                          color: theme.colors.textPrimary,\r\n                        }}>\r\n                          {company.company_name}\r\n                        </p>\r\n                        <p style={{\r\n                          margin: `${theme.spacing.xs} 0 0 0`,\r\n                          fontSize: theme.typography.fontSize.sm,\r\n                          color: theme.colors.textSecondary,\r\n                        }}>\r\n                          Company Number: {company.company_number}\r\n                        </p>\r\n                        {company.address_snippet && (\r\n                          <p style={{\r\n                            margin: `${theme.spacing.xs} 0 0 0`,\r\n                            fontSize: theme.typography.fontSize.sm,\r\n                            color: theme.colors.textSecondary,\r\n                          }}>\r\n                            {company.address_snippet}\r\n                          </p>\r\n                        )}\r\n                        <div style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.xs, flexWrap: 'wrap', alignItems: 'center' }}>\r\n                          <Badge variant={company.company_status === 'active' ? 'success' : company.company_status === 'dissolved' ? 'warning' : 'error'}>\r\n                            {company.company_status || 'Unknown'}\r\n                          </Badge>\r\n                          {company.company_type && (\r\n                            <Badge variant=\"info\">\r\n                              {company.company_type}\r\n                            </Badge>\r\n                          )}\r\n                          {company.date_of_creation && (\r\n                            <span style={{\r\n                              fontSize: theme.typography.fontSize.xs,\r\n                              color: theme.colors.textSecondary,\r\n                            }}>\r\n                              Incorporated: {new Date(company.date_of_creation).toLocaleDateString()}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleSelectCompany(company.company_number);\r\n                        }}\r\n                        style={{ marginLeft: theme.spacing.md }}\r\n                      >\r\n                        Select\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {step2Data.company_data && (\r\n            <div style={{ marginBottom: theme.spacing.xl }}>\r\n              <CompanyDetails \r\n                companyNumber={step2Data.company_data.company_number}\r\n                saveSelectedDocumentsRef={companyDetailsSaveRef}\r\n                onSelectedDocumentsChange={(documents) => {\r\n                  setSelectedCompanyDocuments(documents);\r\n                }}\r\n                onAutoImport={async (result) => {\r\n                  // Refresh profile status and data after auto-import\r\n                  await loadProfileStatus();\r\n                  await loadProfileData(); // Refresh to get charges_summary\r\n                  setMessage('Company data imported successfully! Directors, shareholders, accounts, and charges have been automatically saved.');\r\n                  // Update step2Data with imported data\r\n                  if (result && result.results) {\r\n                    setStep2Data(prev => ({\r\n                      ...prev,\r\n                      confirmed: true,\r\n                      company_data: {\r\n                        ...prev.company_data,\r\n                        charges_summary: result.results.charges_summary || prev.company_data?.charges_summary,\r\n                      },\r\n                    }));\r\n                    // Update step3Data with imported directors and shareholders\r\n                    try {\r\n                      const profileRes = await api.get('/api/borrowers/profiles/');\r\n                      const profileData = Array.isArray(profileRes.data) ? profileRes.data[0] : profileRes.data;\r\n                      if (profileData) {\r\n                        setProfileData(profileData); // Update profileData state\r\n                        setStep3Data({\r\n                          directors: profileData.directors_data || [],\r\n                          shareholders: profileData.shareholders_data || [],\r\n                          applicants_required: profileData.applicants_required || [],\r\n                        });\r\n                      }\r\n                    } catch (err) {\r\n                      console.error('Failed to refresh profile data:', err);\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n              \r\n              <div style={{ marginTop: theme.spacing.lg }}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Additional Information</h3>\r\n                <Input\r\n                  label=\"Trading Address (if different)\"\r\n                  value={step2Data.trading_address}\r\n                  onChange={(e) => setStep2Data({ ...step2Data, trading_address: e.target.value })}\r\n                  style={{ marginBottom: theme.spacing.md }}\r\n                />\r\n                <Input\r\n                  label=\"Primary Contact Email\"\r\n                  type=\"email\"\r\n                  value={step2Data.primary_contact_email}\r\n                  onChange={(e) => setStep2Data({ ...step2Data, primary_contact_email: e.target.value })}\r\n                  style={{ marginBottom: theme.spacing.md }}\r\n                />\r\n                <Input\r\n                  label=\"Primary Contact Phone\"\r\n                  type=\"tel\"\r\n                  value={step2Data.primary_contact_phone}\r\n                  onChange={(e) => setStep2Data({ ...step2Data, primary_contact_phone: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginTop: theme.spacing.lg }}>\r\n                <Checkbox\r\n                  label=\"I confirm these company details are correct\"\r\n                  checked={step2Data.confirmed}\r\n                  onChange={(e) => setStep2Data({ ...step2Data, confirmed: e.target.checked })}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => {\r\n                if (step2Data.confirmed) {\r\n                  nextStep();\r\n                } else {\r\n                  setError('Please confirm the company details before proceeding');\r\n                }\r\n              }}\r\n              disabled={!step2Data.confirmed}\r\n            >\r\n              Next: Directors & Shareholders\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 3: Directors and shareholders */}\r\n      {step === 3 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Directors & Shareholders (>=25%)\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Review and confirm directors and persons with significant control. All directors and shareholders with 25%+ ownership will be required to complete applicant details.\r\n          </p>\r\n\r\n          {step2Data.company_data && (() => {\r\n            // Match PSCs with directors\r\n            // API returns 'active_directors' and 'pscs'\r\n            const directors = step2Data.company_data.active_directors || step2Data.company_data.directors || [];\r\n            const pscs = step2Data.company_data.pscs || [];\r\n            const matchedPscIndices = new Set();\r\n            \r\n            // Find which PSCs match directors\r\n            directors.forEach((director, dirIndex) => {\r\n              pscs.forEach((psc, pscIndex) => {\r\n                if (namesMatch(director.name, psc.name)) {\r\n                  matchedPscIndices.add(pscIndex);\r\n                }\r\n              });\r\n            });\r\n\r\n            // Separate matched and unmatched PSCs\r\n            const matchedPscs = pscs.filter((_, index) => matchedPscIndices.has(index));\r\n            const unmatchedPscs = pscs.filter((_, index) => !matchedPscIndices.has(index));\r\n\r\n            return (\r\n              <>\r\n                {/* Directors (with shareholding if they're also PSCs) */}\r\n                {directors.length > 0 && (\r\n                  <div style={{ marginBottom: theme.spacing.xl }}>\r\n                    <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Directors</h3>\r\n                    <p style={{ \r\n                      fontSize: theme.typography.fontSize.sm, \r\n                      color: theme.colors.textSecondary,\r\n                      marginBottom: theme.spacing.md,\r\n                    }}>\r\n                      All directors are required to complete applicant details. If a director is also a shareholder, please confirm their shareholding percentage.\r\n                    </p>\r\n                    <div style={{ display: 'grid', gap: theme.spacing.md }}>\r\n                      {directors.map((director, index) => {\r\n                        // Find matching PSC for this director\r\n                        const matchingPsc = matchedPscs.find(psc => namesMatch(director.name, psc.name));\r\n                        const ownershipPercentage = matchingPsc \r\n                          ? parseFloat(matchingPsc.ownership_percentage || matchingPsc.natures_of_control?.[0]?.percentage || 0)\r\n                          : null;\r\n\r\n                        return (\r\n                          <div key={index} style={{\r\n                            ...commonStyles.card,\r\n                            padding: theme.spacing.md,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: theme.spacing.sm,\r\n                          }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                              <div style={{ flex: 1 }}>\r\n                                <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium }}>\r\n                                  {director.name}\r\n                                </p>\r\n                                {director.nationality && (\r\n                                  <p style={{ margin: `${theme.spacing.xs} 0 0 0`, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                                    Nationality: {director.nationality}\r\n                                  </p>\r\n                                )}\r\n                                {matchingPsc && (\r\n                                  <div style={{ marginTop: theme.spacing.xs }}>\r\n                                    <Badge variant=\"info\" style={{ marginRight: theme.spacing.xs }}>\r\n                                      Also a Shareholder\r\n                                    </Badge>\r\n                                  </div>\r\n                                )}\r\n                                <Badge variant=\"warning\" style={{ marginTop: theme.spacing.xs }}>\r\n                                  Applicant Required\r\n                                </Badge>\r\n                              </div>\r\n                              <Checkbox\r\n                                label=\"Confirm\"\r\n                                checked={director.confirmed || false}\r\n                                onChange={(e) => {\r\n                                  const updated = [...directors];\r\n                                  updated[index].confirmed = e.target.checked;\r\n                                  setStep2Data({\r\n                                    ...step2Data,\r\n                                    company_data: { ...step2Data.company_data, directors: updated },\r\n                                  });\r\n                                  handleDirectorsUpdate(updated, pscs);\r\n                                }}\r\n                              />\r\n                            </div>\r\n                            \r\n                            {/* Show shareholding input if director is also a PSC */}\r\n                            {matchingPsc && (\r\n                              <div style={{ \r\n                                marginTop: theme.spacing.sm, \r\n                                padding: theme.spacing.sm, \r\n                                background: theme.colors.gray50,\r\n                                borderRadius: theme.borderRadius.md,\r\n                              }}>\r\n                                <label style={{ \r\n                                  fontSize: theme.typography.fontSize.sm, \r\n                                  fontWeight: theme.typography.fontWeight.medium,\r\n                                  display: 'block',\r\n                                  marginBottom: theme.spacing.xs,\r\n                                }}>\r\n                                  Shareholding Percentage:\r\n                                </label>\r\n                                <Input\r\n                                  type=\"number\"\r\n                                  min=\"0\"\r\n                                  max=\"100\"\r\n                                  step=\"0.1\"\r\n                                  placeholder=\"Enter %\"\r\n                                  value={matchingPsc.ownership_percentage || ownershipPercentage || ''}\r\n                                  onChange={(e) => {\r\n                                    const updatedPscs = [...pscs];\r\n                                    const pscIndex = pscs.findIndex(p => namesMatch(p.name, director.name));\r\n                                    if (pscIndex >= 0) {\r\n                                      updatedPscs[pscIndex].ownership_percentage = parseFloat(e.target.value) || 0;\r\n                                      // Update both step2Data and step3Data\r\n                                      setStep2Data({\r\n                                        ...step2Data,\r\n                                        company_data: { ...step2Data.company_data, pscs: updatedPscs },\r\n                                      });\r\n                                      setStep3Data(prev => ({\r\n                                        ...prev,\r\n                                        shareholders: updatedPscs,\r\n                                      }));\r\n                                      handleDirectorsUpdate(directors, updatedPscs);\r\n                                    }\r\n                                  }}\r\n                                  style={{ width: '150px' }}\r\n                                />\r\n                                <p style={{ \r\n                                  margin: `${theme.spacing.xs} 0 0 0`, \r\n                                  fontSize: theme.typography.fontSize.xs, \r\n                                  color: theme.colors.textSecondary,\r\n                                }}>\r\n                                  This person will be required to complete applicant details as both Director and Shareholder.\r\n                                </p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Unmatched PSCs (those who are not directors) */}\r\n                {unmatchedPscs.length > 0 && (\r\n                  <div style={{ marginBottom: theme.spacing.xl }}>\r\n                    <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Additional Shareholders (Not Directors)</h3>\r\n                    <p style={{ \r\n                      fontSize: theme.typography.fontSize.sm, \r\n                      color: theme.colors.textSecondary,\r\n                      marginBottom: theme.spacing.md,\r\n                    }}>\r\n                      The following persons have significant control but are not directors. If they own 25% or more, you can choose to add them as applicants.\r\n                    </p>\r\n                    <div style={{ display: 'grid', gap: theme.spacing.md }}>\r\n                      {unmatchedPscs.map((psc, index) => {\r\n                        // Find the original index in the full pscs array\r\n                        const originalIndex = pscs.findIndex(p => p.name === psc.name);\r\n                        const ownership = parseFloat(\r\n                          psc.ownership_percentage || \r\n                          psc.natures_of_control?.[0]?.percentage || \r\n                          0\r\n                        );\r\n                        const isRequired = ownership >= 25;\r\n                        \r\n                        return (\r\n                          <div key={originalIndex} style={{\r\n                            ...commonStyles.card,\r\n                            padding: theme.spacing.md,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: theme.spacing.sm,\r\n                          }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                              <div style={{ flex: 1 }}>\r\n                                <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium }}>\r\n                                  {psc.name}\r\n                                </p>\r\n                                <p style={{ margin: `${theme.spacing.xs} 0 0 0`, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                                  Current Ownership: {ownership}%\r\n                                </p>\r\n                                {isRequired && (\r\n                                  <Badge variant=\"warning\" style={{ marginTop: theme.spacing.xs }}>\r\n                                    Applicant Required (>=25%)\r\n                                  </Badge>\r\n                                )}\r\n                                {!isRequired && ownership > 0 && (\r\n                                  <Badge variant=\"info\" style={{ marginTop: theme.spacing.xs }}>\r\n                                    Ownership: {ownership}% (below 25% threshold)\r\n                                  </Badge>\r\n                                )}\r\n                              </div>\r\n                              <Checkbox\r\n                                label=\"Add as Applicant\"\r\n                                checked={psc.confirmed || false}\r\n                                onChange={(e) => {\r\n                                  const updated = [...pscs];\r\n                                  updated[originalIndex].confirmed = e.target.checked;\r\n                                  // Update both step2Data and step3Data\r\n                                  setStep2Data({\r\n                                    ...step2Data,\r\n                                    company_data: { ...step2Data.company_data, pscs: updated },\r\n                                  });\r\n                                  setStep3Data(prev => ({\r\n                                    ...prev,\r\n                                    shareholders: updated,\r\n                                  }));\r\n                                  handleDirectorsUpdate(directors, updated);\r\n                                }}\r\n                              />\r\n                            </div>\r\n                            \r\n                            {/* Ownership percentage input */}\r\n                            <div style={{ \r\n                              marginTop: theme.spacing.sm, \r\n                              padding: theme.spacing.sm, \r\n                              background: theme.colors.gray50,\r\n                              borderRadius: theme.borderRadius.md,\r\n                            }}>\r\n                              <label style={{ \r\n                                fontSize: theme.typography.fontSize.sm, \r\n                                fontWeight: theme.typography.fontWeight.medium,\r\n                                display: 'block',\r\n                                marginBottom: theme.spacing.xs,\r\n                              }}>\r\n                                Shareholding Percentage:\r\n                              </label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                max=\"100\"\r\n                                step=\"0.1\"\r\n                                placeholder=\"Enter %\"\r\n                                value={psc.ownership_percentage || ownership || ''}\r\n                                onChange={(e) => {\r\n                                  const updated = [...pscs];\r\n                                  updated[originalIndex].ownership_percentage = parseFloat(e.target.value) || 0;\r\n                                  // Update both step2Data and step3Data\r\n                                  setStep2Data({\r\n                                    ...step2Data,\r\n                                    company_data: { ...step2Data.company_data, pscs: updated },\r\n                                  });\r\n                                  setStep3Data(prev => ({\r\n                                    ...prev,\r\n                                    shareholders: updated,\r\n                                  }));\r\n                                  handleDirectorsUpdate(directors, updated);\r\n                                }}\r\n                                style={{ width: '150px' }}\r\n                              />\r\n                              {parseFloat(psc.ownership_percentage || ownership || 0) >= 25 && (\r\n                                <p style={{ \r\n                                  margin: `${theme.spacing.xs} 0 0 0`, \r\n                                  fontSize: theme.typography.fontSize.xs, \r\n                                  color: theme.colors.warning,\r\n                                  fontWeight: theme.typography.fontWeight.medium,\r\n                                }}>\r\n                                  This person owns 25% or more and will be required to complete applicant details.\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            );\r\n          })()}\r\n\r\n          {/* Applicants Required Summary */}\r\n          {step3Data.applicants_required.length > 0 && (\r\n            <div style={{\r\n              ...commonStyles.card,\r\n              padding: theme.spacing.md,\r\n              background: theme.colors.warningLight,\r\n              marginBottom: theme.spacing.lg,\r\n            }}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.sm} 0` }}>Applicants Required</h3>\r\n              <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm }}>\r\n                The following {step3Data.applicants_required.length} person(s) will need to complete applicant details in the next step:\r\n              </p>\r\n              <ul style={{ margin: `${theme.spacing.sm} 0 0 0`, paddingLeft: theme.spacing.lg }}>\r\n                {step3Data.applicants_required.map((app, idx) => (\r\n                  <li key={idx} style={{ marginBottom: theme.spacing.xs }}>\r\n                    {app.name} ({app.role})\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={nextStep}\r\n              disabled={step3Data.applicants_required.length === 0}\r\n            >\r\n              Next: Applicant Details\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 4: Applicant personal details */}\r\n      {step === 4 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Applicant Personal Details\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Complete details for each required applicant.\r\n          </p>\r\n\r\n          {step3Data.applicants_required.map((applicant, applicantIndex) => {\r\n            const applicantData = step4Data.applicants[applicantIndex] || {\r\n              person_id: applicant.person_id,\r\n              name: applicant.name,\r\n              role: applicant.role,\r\n              first_name: '',\r\n              last_name: '',\r\n              date_of_birth: '',\r\n              nationality: '',\r\n              email: '',\r\n              phone: '',\r\n              current_address: '',\r\n              previous_address: '',\r\n              employment_status: '',\r\n              occupation: '',\r\n              employment_start_date: '',\r\n              net_monthly_income: '',\r\n              experience_tier: '',\r\n              adverse_credit_band: '',\r\n              source_of_deposit: '',\r\n              exit_strategy: '',\r\n            };\r\n\r\n            return (\r\n              <div key={applicantIndex} style={{\r\n                ...commonStyles.card,\r\n                padding: theme.spacing.xl,\r\n                marginBottom: theme.spacing.xl,\r\n              }}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.lg} 0` }}>\r\n                  {applicant.name} - {applicant.role}\r\n                </h3>\r\n\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.md, marginBottom: theme.spacing.lg }}>\r\n                  <Input\r\n                    label=\"First Name\"\r\n                    value={applicantData.first_name}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, first_name: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                    required\r\n                  />\r\n                  <Input\r\n                    label=\"Last Name\"\r\n                    value={applicantData.last_name}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, last_name: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                    required\r\n                  />\r\n                  <Input\r\n                    label=\"Date of Birth\"\r\n                    type=\"date\"\r\n                    value={applicantData.date_of_birth}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, date_of_birth: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                    required\r\n                  />\r\n                  <Input\r\n                    label=\"Nationality\"\r\n                    value={applicantData.nationality}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, nationality: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                  <Input\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    value={applicantData.email}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, email: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                  <Input\r\n                    label=\"Phone\"\r\n                    type=\"tel\"\r\n                    value={applicantData.phone}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, phone: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <h4 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Address</h4>\r\n                <div style={{ marginBottom: theme.spacing.lg }}>\r\n                  <Textarea\r\n                    label=\"Current Address\"\r\n                    value={applicantData.current_address}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, current_address: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                    rows={3}\r\n                    required\r\n                  />\r\n                  <Textarea\r\n                    label=\"Previous Address (only if current address < 3 years)\"\r\n                    value={applicantData.previous_address}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, previous_address: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                    rows={3}\r\n                    style={{ marginTop: theme.spacing.md }}\r\n                  />\r\n                </div>\r\n\r\n                <h4 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Employment</h4>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.md, marginBottom: theme.spacing.lg }}>\r\n                  <Select\r\n                    label=\"Employment Status\"\r\n                    value={applicantData.employment_status}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, employment_status: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Select...</option>\r\n                    <option value=\"employed\">Employed</option>\r\n                    <option value=\"self_employed\">Self-Employed</option>\r\n                    <option value=\"retired\">Retired</option>\r\n                    <option value=\"unemployed\">Unemployed</option>\r\n                  </Select>\r\n                  <Input\r\n                    label=\"Occupation\"\r\n                    value={applicantData.occupation}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, occupation: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                  <Input\r\n                    label=\"Employment Start Date\"\r\n                    type=\"date\"\r\n                    value={applicantData.employment_start_date}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, employment_start_date: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                  <Input\r\n                    label=\"Net Monthly Income\"\r\n                    type=\"number\"\r\n                    value={applicantData.net_monthly_income}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, net_monthly_income: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <h4 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Underwriting Flags</h4>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.md }}>\r\n                  <Select\r\n                    label=\"Borrower Experience Tier\"\r\n                    value={applicantData.experience_tier}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, experience_tier: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Select...</option>\r\n                    <option value=\"0\">0 deals</option>\r\n                    <option value=\"1-3\">1-3 deals</option>\r\n                    <option value=\"4-10\">4-10 deals</option>\r\n                    <option value=\"10+\">10+ deals</option>\r\n                  </Select>\r\n                  <Select\r\n                    label=\"Adverse Credit Band\"\r\n                    value={applicantData.adverse_credit_band}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, adverse_credit_band: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Select...</option>\r\n                    <option value=\"none\">None</option>\r\n                    <option value=\"minor\">Minor</option>\r\n                    <option value=\"significant\">Significant</option>\r\n                  </Select>\r\n                  <Select\r\n                    label=\"Source of Deposit\"\r\n                    value={applicantData.source_of_deposit}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, source_of_deposit: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Select...</option>\r\n                    <option value=\"savings\">Savings</option>\r\n                    <option value=\"sale_of_property\">Sale of Property</option>\r\n                    <option value=\"gift\">Gift</option>\r\n                    <option value=\"inheritance\">Inheritance</option>\r\n                    <option value=\"other\">Other</option>\r\n                  </Select>\r\n                  <Select\r\n                    label=\"Intended Exit Strategy\"\r\n                    value={applicantData.exit_strategy}\r\n                    onChange={(e) => {\r\n                      const updated = [...step4Data.applicants];\r\n                      updated[applicantIndex] = { ...applicantData, exit_strategy: e.target.value };\r\n                      setStep4Data({ ...step4Data, applicants: updated });\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Select...</option>\r\n                    <option value=\"sale\">Sale</option>\r\n                    <option value=\"refinance\">Refinance</option>\r\n                    <option value=\"rental_income\">Rental Income</option>\r\n                    <option value=\"other\">Other</option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={nextStep}>\r\n              Next: Financial Snapshot\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 5: Financial snapshot */}\r\n      {step === 5 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Financial Snapshot\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Provide your financial information. You can choose quick mode (totals only) or detailed mode (line-item breakdown).\r\n          </p>\r\n\r\n          <div style={{ marginBottom: theme.spacing.lg }}>\r\n            <Select\r\n              label=\"Mode\"\r\n              value={step5Data.mode}\r\n              onChange={(e) => setStep5Data({ ...step5Data, mode: e.target.value })}\r\n            >\r\n              <option value=\"quick\">Quick Mode (Totals Only)</option>\r\n              <option value=\"detailed\">Detailed Mode (Line-Item Breakdown)</option>\r\n            </Select>\r\n          </div>\r\n\r\n          {step5Data.mode === 'quick' ? (\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: theme.spacing.lg }}>\r\n              <Input\r\n                label=\"Total Income\"\r\n                type=\"number\"\r\n                value={step5Data.income_total}\r\n                onChange={(e) => setStep5Data({ ...step5Data, income_total: e.target.value })}\r\n              />\r\n              <Input\r\n                label=\"Total Expenditure\"\r\n                type=\"number\"\r\n                value={step5Data.expenditure_total}\r\n                onChange={(e) => setStep5Data({ ...step5Data, expenditure_total: e.target.value })}\r\n              />\r\n              <Input\r\n                label=\"Total Assets\"\r\n                type=\"number\"\r\n                value={step5Data.assets_total}\r\n                onChange={(e) => setStep5Data({ ...step5Data, assets_total: e.target.value })}\r\n              />\r\n              <Input\r\n                label=\"Total Liabilities\"\r\n                type=\"number\"\r\n                value={step5Data.liabilities_total}\r\n                onChange={(e) => setStep5Data({ ...step5Data, liabilities_total: e.target.value })}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Income Breakdown</h3>\r\n              <div style={{ marginBottom: theme.spacing.lg }}>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setStep5Data({\r\n                      ...step5Data,\r\n                      income_breakdown: [...step5Data.income_breakdown, { description: '', amount: '' }],\r\n                    });\r\n                  }}\r\n                >\r\n                  + Add Income Item\r\n                </Button>\r\n                {step5Data.income_breakdown.map((item, index) => (\r\n                  <div key={index} style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.sm }}>\r\n                    <Input\r\n                      placeholder=\"Description\"\r\n                      value={item.description}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.income_breakdown];\r\n                        updated[index].description = e.target.value;\r\n                        setStep5Data({ ...step5Data, income_breakdown: updated });\r\n                      }}\r\n                      style={{ flex: 1 }}\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Amount\"\r\n                      value={item.amount}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.income_breakdown];\r\n                        updated[index].amount = e.target.value;\r\n                        setStep5Data({ ...step5Data, income_breakdown: updated });\r\n                      }}\r\n                      style={{ width: '150px' }}\r\n                    />\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setStep5Data({\r\n                          ...step5Data,\r\n                          income_breakdown: step5Data.income_breakdown.filter((_, i) => i !== index),\r\n                        });\r\n                      }}\r\n                    >\r\n                      Remove\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <h3 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Expenditure Breakdown</h3>\r\n              <div style={{ marginBottom: theme.spacing.lg }}>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setStep5Data({\r\n                      ...step5Data,\r\n                      expenditure_breakdown: [...step5Data.expenditure_breakdown, { description: '', amount: '' }],\r\n                    });\r\n                  }}\r\n                >\r\n                  + Add Expenditure Item\r\n                </Button>\r\n                {step5Data.expenditure_breakdown.map((item, index) => (\r\n                  <div key={index} style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.sm }}>\r\n                    <Input\r\n                      placeholder=\"Description\"\r\n                      value={item.description}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.expenditure_breakdown];\r\n                        updated[index].description = e.target.value;\r\n                        setStep5Data({ ...step5Data, expenditure_breakdown: updated });\r\n                      }}\r\n                      style={{ flex: 1 }}\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Amount\"\r\n                      value={item.amount}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.expenditure_breakdown];\r\n                        updated[index].amount = e.target.value;\r\n                        setStep5Data({ ...step5Data, expenditure_breakdown: updated });\r\n                      }}\r\n                      style={{ width: '150px' }}\r\n                    />\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setStep5Data({\r\n                          ...step5Data,\r\n                          expenditure_breakdown: step5Data.expenditure_breakdown.filter((_, i) => i !== index),\r\n                        });\r\n                      }}\r\n                    >\r\n                      Remove\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <h3 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Assets Breakdown</h3>\r\n              <div style={{ marginBottom: theme.spacing.lg }}>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setStep5Data({\r\n                      ...step5Data,\r\n                      assets_breakdown: [...step5Data.assets_breakdown, { description: '', amount: '' }],\r\n                    });\r\n                  }}\r\n                >\r\n                  + Add Asset Item\r\n                </Button>\r\n                {step5Data.assets_breakdown.map((item, index) => (\r\n                  <div key={index} style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.sm }}>\r\n                    <Input\r\n                      placeholder=\"Description\"\r\n                      value={item.description}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.assets_breakdown];\r\n                        updated[index].description = e.target.value;\r\n                        setStep5Data({ ...step5Data, assets_breakdown: updated });\r\n                      }}\r\n                      style={{ flex: 1 }}\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Amount\"\r\n                      value={item.amount}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.assets_breakdown];\r\n                        updated[index].amount = e.target.value;\r\n                        setStep5Data({ ...step5Data, assets_breakdown: updated });\r\n                      }}\r\n                      style={{ width: '150px' }}\r\n                    />\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setStep5Data({\r\n                          ...step5Data,\r\n                          assets_breakdown: step5Data.assets_breakdown.filter((_, i) => i !== index),\r\n                        });\r\n                      }}\r\n                    >\r\n                      Remove\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <h3 style={{ margin: `${theme.spacing.lg} 0 ${theme.spacing.md} 0` }}>Liabilities Breakdown</h3>\r\n              <div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setStep5Data({\r\n                      ...step5Data,\r\n                      liabilities_breakdown: [...step5Data.liabilities_breakdown, { description: '', amount: '' }],\r\n                    });\r\n                  }}\r\n                >\r\n                  + Add Liability Item\r\n                </Button>\r\n                {step5Data.liabilities_breakdown.map((item, index) => (\r\n                  <div key={index} style={{ display: 'flex', gap: theme.spacing.sm, marginTop: theme.spacing.sm }}>\r\n                    <Input\r\n                      placeholder=\"Description\"\r\n                      value={item.description}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.liabilities_breakdown];\r\n                        updated[index].description = e.target.value;\r\n                        setStep5Data({ ...step5Data, liabilities_breakdown: updated });\r\n                      }}\r\n                      style={{ flex: 1 }}\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Amount\"\r\n                      value={item.amount}\r\n                      onChange={(e) => {\r\n                        const updated = [...step5Data.liabilities_breakdown];\r\n                        updated[index].amount = e.target.value;\r\n                        setStep5Data({ ...step5Data, liabilities_breakdown: updated });\r\n                      }}\r\n                      style={{ width: '150px' }}\r\n                    />\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setStep5Data({\r\n                          ...step5Data,\r\n                          liabilities_breakdown: step5Data.liabilities_breakdown.filter((_, i) => i !== index),\r\n                        });\r\n                      }}\r\n                    >\r\n                      Remove\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Company Charges Display */}\r\n          {((profileData?.charges_summary && profileData.charges_summary.total_charges > 0) || \r\n           (step2Data.company_data?.charges_summary && step2Data.company_data.charges_summary.total_charges > 0)) && (\r\n            <div style={{\r\n              ...commonStyles.card,\r\n              marginTop: theme.spacing.xl,\r\n              padding: theme.spacing.lg,\r\n              background: theme.colors.gray50,\r\n            }}>\r\n              <h3 style={{\r\n                fontSize: theme.typography.fontSize.lg,\r\n                fontWeight: theme.typography.fontWeight.semibold,\r\n                marginBottom: theme.spacing.md,\r\n              }}>\r\n                Company Charges (from Companies House)\r\n              </h3>\r\n              <p style={{\r\n                fontSize: theme.typography.fontSize.sm,\r\n                color: theme.colors.textSecondary,\r\n                marginBottom: theme.spacing.md,\r\n              }}>\r\n                The following charges are registered against your company. These are automatically included in your financial profile and will be visible to lenders when you submit applications.\r\n              </p>\r\n              {(() => {\r\n                const charges = profileData?.charges_summary || step2Data.company_data?.charges_summary || {};\r\n                return (\r\n                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: theme.spacing.md, marginBottom: theme.spacing.md }}>\r\n                    <div>\r\n                      <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Total Charges</p>\r\n                      <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                        {charges.total_charges || 0}\r\n                      </p>\r\n                    </div>\r\n                    {charges.active_charges > 0 && (\r\n                      <div>\r\n                        <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Active Charges</p>\r\n                        <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold, color: theme.colors.warning }}>\r\n                          {charges.active_charges || 0}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {charges.satisfied_charges > 0 && (\r\n                      <div>\r\n                        <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>Satisfied Charges</p>\r\n                        <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold, color: theme.colors.success }}>\r\n                          {charges.satisfied_charges || 0}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })()}\r\n              {(() => {\r\n                const charges = profileData?.charges_summary || step2Data.company_data?.charges_summary || {};\r\n                if (charges.charges_summary?.active && charges.charges_summary.active.length > 0) {\r\n                  return (\r\n                    <div style={{ marginTop: theme.spacing.md }}>\r\n                      <h4 style={{\r\n                        fontSize: theme.typography.fontSize.base,\r\n                        fontWeight: theme.typography.fontWeight.semibold,\r\n                        marginBottom: theme.spacing.sm,\r\n                        color: theme.colors.warning,\r\n                      }}>\r\n                        Active Charges\r\n                      </h4>\r\n                      <div style={{ display: 'grid', gap: theme.spacing.sm }}>\r\n                        {charges.charges_summary.active.slice(0, 3).map((charge, idx) => (\r\n                          <div key={idx} style={{\r\n                            padding: theme.spacing.sm,\r\n                            background: theme.colors.white,\r\n                            borderRadius: theme.borderRadius.md,\r\n                            borderLeft: `3px solid ${theme.colors.warning}`,\r\n                          }}>\r\n                            <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium, fontSize: theme.typography.fontSize.sm }}>\r\n                              {charge.charge_code || charge.charge_number || `Charge ${idx + 1}`}\r\n                            </p>\r\n                            {charge.created_on && (\r\n                              <p style={{ margin: `${theme.spacing.xs} 0 0 0`, fontSize: theme.typography.fontSize.xs, color: theme.colors.textSecondary }}>\r\n                                Created: {new Date(charge.created_on).toLocaleDateString('en-GB')}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                        {charges.charges_summary.active.length > 3 && (\r\n                          <p style={{ \r\n                            margin: `${theme.spacing.xs} 0 0 0`, \r\n                            fontSize: theme.typography.fontSize.xs, \r\n                            color: theme.colors.textSecondary,\r\n                            fontStyle: 'italic',\r\n                          }}>\r\n                            ... and {charges.charges_summary.active.length - 3} more active charge(s)\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                }\r\n                return null;\r\n              })()}\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={nextStep}>\r\n              Next: Bank Data\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 6: Bank data */}\r\n      {step === 6 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Bank Data\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Connect your bank account via Open Banking or upload PDF statements.\r\n          </p>\r\n\r\n          <div style={{ marginBottom: theme.spacing.xl }}>\r\n            <Select\r\n              label=\"Method\"\r\n              value={step6Data.method}\r\n              onChange={(e) => setStep6Data({ ...step6Data, method: e.target.value })}\r\n            >\r\n              <option value=\"open_banking\">Open Banking (Recommended)</option>\r\n              <option value=\"pdf_upload\">Upload PDF Statements</option>\r\n            </Select>\r\n          </div>\r\n\r\n          {step6Data.method === 'open_banking' ? (\r\n            <div>\r\n              {!step6Data.open_banking_connected ? (\r\n                <div>\r\n                  <p style={{ marginBottom: theme.spacing.md }}>\r\n                    Connect your business bank account via Open Banking. We support business accounts first, with personal accounts as an option if business accounts are unavailable.\r\n                  </p>\r\n                  <Select\r\n                    label=\"Bank Provider\"\r\n                    value={step6Data.open_banking_provider}\r\n                    onChange={(e) => setStep6Data({ ...step6Data, open_banking_provider: e.target.value })}\r\n                    style={{ marginBottom: theme.spacing.md }}\r\n                  >\r\n                    <option value=\"\">Select your bank...</option>\r\n                    <option value=\"barclays\">Barclays</option>\r\n                    <option value=\"hsbc\">HSBC</option>\r\n                    <option value=\"lloyds\">Lloyds</option>\r\n                    <option value=\"natwest\">NatWest</option>\r\n                    <option value=\"santander\">Santander</option>\r\n                    <option value=\"other\">Other</option>\r\n                  </Select>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleConnectOpenBanking}\r\n                    loading={loading}\r\n                    disabled={!step6Data.open_banking_provider}\r\n                  >\r\n                    Connect Open Banking\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div style={{\r\n                  ...commonStyles.card,\r\n                  padding: theme.spacing.lg,\r\n                  background: theme.colors.successLight,\r\n                }}>\r\n                  <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium }}>\r\n                     Open Banking Connected\r\n                  </p>\r\n                  <p style={{ margin: `${theme.spacing.sm} 0 0 0`, fontSize: theme.typography.fontSize.sm }}>\r\n                    {step6Data.accounts.length} account(s) connected\r\n                  </p>\r\n                  {step6Data.accounts.map((account, index) => (\r\n                    <div key={index} style={{\r\n                      marginTop: theme.spacing.md,\r\n                      padding: theme.spacing.md,\r\n                      background: theme.colors.white,\r\n                      borderRadius: theme.borderRadius.md,\r\n                    }}>\r\n                      <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium }}>\r\n                        {account.account_name || 'Account'} - ****{account.account_number?.slice(-4) || '****'}\r\n                      </p>\r\n                      <p style={{ margin: `${theme.spacing.xs} 0 0 0`, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                        Balance: {parseFloat(account.balance || 0).toLocaleString('en-GB')}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <p style={{ marginBottom: theme.spacing.md }}>\r\n                Upload your last 3 months of bank statements (PDF format only).\r\n              </p>\r\n              <div\r\n                onDragEnter={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  setDragActive(true);\r\n                }}\r\n                onDragLeave={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  setDragActive(false);\r\n                }}\r\n                onDragOver={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                }}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  setDragActive(false);\r\n                  if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n                    handleFileUpload(e.dataTransfer.files, 'bank_statement', 'bank');\r\n                  }\r\n                }}\r\n                style={{\r\n                  padding: theme.spacing.xl,\r\n                  border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n                  borderRadius: theme.borderRadius.md,\r\n                  textAlign: 'center',\r\n                  background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n                  cursor: 'pointer',\r\n                  marginBottom: theme.spacing.md,\r\n                }}\r\n                onClick={() => fileInputRef.current?.click()}\r\n              >\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\".pdf\"\r\n                  style={{ display: 'none' }}\r\n                  onChange={(e) => {\r\n                    if (e.target.files && e.target.files.length > 0) {\r\n                      handleFileUpload(e.target.files, 'bank_statement', 'bank');\r\n                    }\r\n                  }}\r\n                />\r\n                <div style={{ fontSize: '48px', marginBottom: theme.spacing.sm }}></div>\r\n                <p style={{ margin: 0, fontSize: theme.typography.fontSize.lg, fontWeight: theme.typography.fontWeight.semibold }}>\r\n                  Drag and drop PDF statements here\r\n                </p>\r\n                <p style={{ margin: 0, color: theme.colors.textSecondary }}>\r\n                  or click to browse  PDF only  Max 10MB per file\r\n                </p>\r\n              </div>\r\n              {step6Data.pdf_statements.length > 0 && (\r\n                <div>\r\n                  <p style={{ marginBottom: theme.spacing.sm }}>Uploaded Statements:</p>\r\n                  {step6Data.pdf_statements.map((file, index) => (\r\n                    <div key={index} style={{\r\n                      padding: theme.spacing.sm,\r\n                      background: theme.colors.gray50,\r\n                      borderRadius: theme.borderRadius.md,\r\n                      marginBottom: theme.spacing.xs,\r\n                      display: 'flex',\r\n                      justifyContent: 'space-between',\r\n                      alignItems: 'center',\r\n                    }}>\r\n                      <span>{file.name || `Statement ${index + 1}`}</span>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setStep6Data({\r\n                            ...step6Data,\r\n                            pdf_statements: step6Data.pdf_statements.filter((_, i) => i !== index),\r\n                          });\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={nextStep}>\r\n              Next: Documents\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 7: Documents */}\r\n      {step === 7 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Documents\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Upload required company and personal documents. You can mark documents as \"not available yet\" with a reason.\r\n          </p>\r\n\r\n          {/* Company Documents */}\r\n          <div style={{ marginBottom: theme.spacing.xl }}>\r\n            <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Company Documents</h3>\r\n            \r\n            <div style={{ marginBottom: theme.spacing.lg }}>\r\n              <h4 style={{ margin: `0 0 ${theme.spacing.sm} 0`, fontSize: theme.typography.fontSize.base }}>\r\n                Statutory Accounts (Last 2 Years)\r\n              </h4>\r\n              <div\r\n                onDragEnter={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(true);\r\n                }}\r\n                onDragLeave={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(false);\r\n                }}\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(false);\r\n                  if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n                    handleFileUpload(e.dataTransfer.files, 'statutory_accounts', 'company');\r\n                  }\r\n                }}\r\n                style={{\r\n                  padding: theme.spacing.lg,\r\n                  border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n                  borderRadius: theme.borderRadius.md,\r\n                  textAlign: 'center',\r\n                  background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n                  cursor: 'pointer',\r\n                  marginBottom: theme.spacing.sm,\r\n                }}\r\n                onClick={() => {\r\n                  const input = document.createElement('input');\r\n                  input.type = 'file';\r\n                  input.multiple = true;\r\n                  input.accept = '.pdf,.jpg,.jpeg,.png';\r\n                  input.onchange = (e) => {\r\n                    if (e.target.files && e.target.files.length > 0) {\r\n                      handleFileUpload(e.target.files, 'statutory_accounts', 'company');\r\n                    }\r\n                  };\r\n                  input.click();\r\n                }}\r\n              >\r\n                <div style={{ fontSize: '32px', marginBottom: theme.spacing.xs }}></div>\r\n                <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm }}>\r\n                  Drag and drop or click to upload  PDF, JPG, PNG  Max 10MB per file\r\n                </p>\r\n              </div>\r\n              {step7Data.company_documents.statutory_accounts.length > 0 && (\r\n                <div style={{ marginTop: theme.spacing.sm }}>\r\n                  {step7Data.company_documents.statutory_accounts.map((doc, index) => (\r\n                    <div key={index} style={{\r\n                      padding: theme.spacing.sm,\r\n                      background: theme.colors.gray50,\r\n                      borderRadius: theme.borderRadius.md,\r\n                      marginBottom: theme.spacing.xs,\r\n                      display: 'flex',\r\n                      justifyContent: 'space-between',\r\n                      alignItems: 'center',\r\n                    }}>\r\n                      <span style={{ fontSize: theme.typography.fontSize.sm }}>\r\n                        {doc.file_name || `Document ${index + 1}`}\r\n                      </span>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          const updated = { ...step7Data };\r\n                          updated.company_documents.statutory_accounts = updated.company_documents.statutory_accounts.filter((_, i) => i !== index);\r\n                          setStep7Data(updated);\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <h4 style={{ margin: `0 0 ${theme.spacing.sm} 0`, fontSize: theme.typography.fontSize.base }}>\r\n                Management Accounts (if available)\r\n              </h4>\r\n              <div\r\n                onDragEnter={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(true);\r\n                }}\r\n                onDragLeave={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(false);\r\n                }}\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  setDragActive(false);\r\n                  if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n                    handleFileUpload(e.dataTransfer.files, 'management_accounts', 'company');\r\n                  }\r\n                }}\r\n                style={{\r\n                  padding: theme.spacing.lg,\r\n                  border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n                  borderRadius: theme.borderRadius.md,\r\n                  textAlign: 'center',\r\n                  background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n                  cursor: 'pointer',\r\n                  marginBottom: theme.spacing.sm,\r\n                }}\r\n                onClick={() => {\r\n                  const input = document.createElement('input');\r\n                  input.type = 'file';\r\n                  input.multiple = true;\r\n                  input.accept = '.pdf,.jpg,.jpeg,.png';\r\n                  input.onchange = (e) => {\r\n                    if (e.target.files && e.target.files.length > 0) {\r\n                      handleFileUpload(e.target.files, 'management_accounts', 'company');\r\n                    }\r\n                  };\r\n                  input.click();\r\n                }}\r\n              >\r\n                <div style={{ fontSize: '32px', marginBottom: theme.spacing.xs }}></div>\r\n                <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm }}>\r\n                  Drag and drop or click to upload  PDF, JPG, PNG  Max 10MB per file\r\n                </p>\r\n              </div>\r\n              {step7Data.company_documents.management_accounts.length > 0 && (\r\n                <div style={{ marginTop: theme.spacing.sm }}>\r\n                  {step7Data.company_documents.management_accounts.map((doc, index) => (\r\n                    <div key={index} style={{\r\n                      padding: theme.spacing.sm,\r\n                      background: theme.colors.gray50,\r\n                      borderRadius: theme.borderRadius.md,\r\n                      marginBottom: theme.spacing.xs,\r\n                      display: 'flex',\r\n                      justifyContent: 'space-between',\r\n                      alignItems: 'center',\r\n                    }}>\r\n                      <span style={{ fontSize: theme.typography.fontSize.sm }}>\r\n                        {doc.file_name || `Document ${index + 1}`}\r\n                      </span>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          const updated = { ...step7Data };\r\n                          updated.company_documents.management_accounts = updated.company_documents.management_accounts.filter((_, i) => i !== index);\r\n                          setStep7Data(updated);\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Personal Documents (for applicants) */}\r\n          {step4Data.applicants.length > 0 && (\r\n            <div>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Personal Documents (Applicants)</h3>\r\n              <div>\r\n                <h4 style={{ margin: `0 0 ${theme.spacing.sm} 0`, fontSize: theme.typography.fontSize.base }}>\r\n                  Photo ID\r\n                </h4>\r\n                <div\r\n                  onDragEnter={(e) => {\r\n                    e.preventDefault();\r\n                    setDragActive(true);\r\n                  }}\r\n                  onDragLeave={(e) => {\r\n                    e.preventDefault();\r\n                    setDragActive(false);\r\n                  }}\r\n                  onDragOver={(e) => e.preventDefault()}\r\n                  onDrop={(e) => {\r\n                    e.preventDefault();\r\n                    setDragActive(false);\r\n                    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n                      handleFileUpload(e.dataTransfer.files, 'photo_id', 'personal');\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    padding: theme.spacing.lg,\r\n                    border: `2px dashed ${dragActive ? theme.colors.primary : theme.colors.gray300}`,\r\n                    borderRadius: theme.borderRadius.md,\r\n                    textAlign: 'center',\r\n                    background: dragActive ? theme.colors.primaryLight : theme.colors.gray50,\r\n                    cursor: 'pointer',\r\n                    marginBottom: theme.spacing.sm,\r\n                  }}\r\n                  onClick={() => {\r\n                    const input = document.createElement('input');\r\n                    input.type = 'file';\r\n                    input.multiple = true;\r\n                    input.accept = '.pdf,.jpg,.jpeg,.png';\r\n                    input.onchange = (e) => {\r\n                      if (e.target.files && e.target.files.length > 0) {\r\n                        handleFileUpload(e.target.files, 'photo_id', 'personal');\r\n                      }\r\n                    };\r\n                    input.click();\r\n                  }}\r\n                >\r\n                  <div style={{ fontSize: '32px', marginBottom: theme.spacing.xs }}></div>\r\n                  <p style={{ margin: 0, fontSize: theme.typography.fontSize.sm }}>\r\n                    Drag and drop or click to upload  PDF, JPG, PNG  Max 10MB per file\r\n                  </p>\r\n                </div>\r\n                {step7Data.personal_documents.photo_id.length > 0 && (\r\n                  <div style={{ marginTop: theme.spacing.sm }}>\r\n                    {step7Data.personal_documents.photo_id.map((doc, index) => (\r\n                      <div key={index} style={{\r\n                        padding: theme.spacing.sm,\r\n                        background: theme.colors.gray50,\r\n                        borderRadius: theme.borderRadius.md,\r\n                        marginBottom: theme.spacing.xs,\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                      }}>\r\n                        <span style={{ fontSize: theme.typography.fontSize.sm }}>\r\n                          {doc.file_name || `Document ${index + 1}`}\r\n                        </span>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => {\r\n                            const updated = { ...step7Data };\r\n                            updated.personal_documents.photo_id = updated.personal_documents.photo_id.filter((_, i) => i !== index);\r\n                            setStep7Data(updated);\r\n                          }}\r\n                        >\r\n                          Remove\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={nextStep}>\r\n              Next: Review & Submit\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 8: Review and submit */}\r\n      {step === 8 && (\r\n        <div>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: `0 0 ${theme.spacing.lg} 0`,\r\n          }}>\r\n            Review & Submit\r\n          </h2>\r\n          <p style={{ color: theme.colors.textSecondary, marginBottom: theme.spacing.lg }}>\r\n            Please review all information before submitting your borrower profile for review.\r\n          </p>\r\n\r\n          <div style={{ display: 'grid', gap: theme.spacing.lg, marginBottom: theme.spacing.xl }}>\r\n            {/* Step 1 Summary */}\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Account & Consent</h3>\r\n              <p><strong>Email:</strong> {step1Data.email}</p>\r\n              <p><strong>Mobile:</strong> {step1Data.mobile_number}</p>\r\n              <p><strong>MFA Enabled:</strong> {step1Data.mfa_enabled ? 'Yes' : 'No'}</p>\r\n              <p><strong>Consents:</strong> All confirmed</p>\r\n            </div>\r\n\r\n            {/* Step 2 Summary */}\r\n            {step2Data.company_data && (\r\n              <div style={commonStyles.card}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Company</h3>\r\n                <p><strong>Company Name:</strong> {step2Data.company_data.company_name}</p>\r\n                <p><strong>Company Number:</strong> {step2Data.company_data.company_number}</p>\r\n                <p><strong>Status:</strong> {step2Data.company_data.company_status}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3 Summary */}\r\n            {step3Data.applicants_required.length > 0 && (\r\n              <div style={commonStyles.card}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Applicants Required</h3>\r\n                <p>{step3Data.applicants_required.length} applicant(s) will need to complete details</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 4 Summary */}\r\n            {step4Data.applicants.length > 0 && (\r\n              <div style={commonStyles.card}>\r\n                <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Applicants</h3>\r\n                <p>{step4Data.applicants.length} applicant(s) details completed</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 5 Summary */}\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Financial Snapshot</h3>\r\n              <p><strong>Mode:</strong> {step5Data.mode === 'quick' ? 'Quick (Totals Only)' : 'Detailed (Line-Item)'}</p>\r\n              {step5Data.mode === 'quick' ? (\r\n                <>\r\n                  <p><strong>Total Income:</strong> {parseFloat(step5Data.income_total || 0).toLocaleString('en-GB')}</p>\r\n                  <p><strong>Total Expenditure:</strong> {parseFloat(step5Data.expenditure_total || 0).toLocaleString('en-GB')}</p>\r\n                  <p><strong>Total Assets:</strong> {parseFloat(step5Data.assets_total || 0).toLocaleString('en-GB')}</p>\r\n                  <p><strong>Total Liabilities:</strong> {parseFloat(step5Data.liabilities_total || 0).toLocaleString('en-GB')}</p>\r\n                </>\r\n              ) : (\r\n                <p>Detailed breakdown provided</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Step 6 Summary */}\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Bank Data</h3>\r\n              <p><strong>Method:</strong> {step6Data.method === 'open_banking' ? 'Open Banking' : 'PDF Upload'}</p>\r\n              {step6Data.open_banking_connected && (\r\n                <p><strong>Accounts Connected:</strong> {step6Data.accounts.length}</p>\r\n              )}\r\n              {step6Data.pdf_statements.length > 0 && (\r\n                <p><strong>PDF Statements:</strong> {step6Data.pdf_statements.length} file(s)</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Step 7 Summary */}\r\n            <div style={commonStyles.card}>\r\n              <h3 style={{ margin: `0 0 ${theme.spacing.md} 0` }}>Documents</h3>\r\n              <p><strong>Statutory Accounts:</strong> {step7Data.company_documents.statutory_accounts.length} file(s)</p>\r\n              <p><strong>Management Accounts:</strong> {step7Data.company_documents.management_accounts.length} file(s)</p>\r\n              <p><strong>Photo ID:</strong> {step7Data.personal_documents.photo_id.length} file(s)</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            ...commonStyles.card,\r\n            padding: theme.spacing.lg,\r\n            background: theme.colors.warningLight,\r\n            marginBottom: theme.spacing.xl,\r\n          }}>\r\n            <p style={{ margin: 0, fontWeight: theme.typography.fontWeight.medium }}>\r\n               Once submitted, your profile will be locked for editing until admin review is complete.\r\n            </p>\r\n            <p style={{ margin: `${theme.spacing.sm} 0 0 0`, fontSize: theme.typography.fontSize.sm }}>\r\n              You will be able to make changes only if admin requests them.\r\n            </p>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: theme.spacing.xl }}>\r\n            <Button variant=\"outline\" onClick={prevStep}>\r\n              Previous\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={handleSubmitForReview}\r\n              loading={loading}\r\n              disabled={!step1Data.consent_privacy || !step1Data.consent_terms || !step1Data.consent_credit_search}\r\n            >\r\n              Submit for Review\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Wizard>\r\n  );\r\n}\r\n\r\nexport default BorrowerProfileWizard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}