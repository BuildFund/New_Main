{"ast":null,"code":"import _objectSpread from\"C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import api from'../api';import{theme,commonStyles}from'../styles/theme';import StatCard from'../components/StatCard';import Button from'../components/Button';import Badge from'../components/Badge';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BorrowerDashboard(_ref){let{onboardingProgress,onStartOnboarding}=_ref;const[stats,setStats]=useState({totalProjects:0,pendingProjects:0,approvedProjects:0,totalMatches:0,totalApplications:0,pendingApplications:0,privateEquityOpportunities:0});const[recentProjects,setRecentProjects]=useState([]);const[recentApplications,setRecentApplications]=useState([]);const[recentMessages,setRecentMessages]=useState([]);const[recentSavedProducts,setRecentSavedProducts]=useState([]);const[savedProductsCount,setSavedProductsCount]=useState(0);const[unreadCount,setUnreadCount]=useState(0);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{loadDashboardData();},[]);async function loadDashboardData(){setLoading(true);setError(null);try{// Load projects\nlet projects=[];try{const projectsRes=await api.get('/api/projects/');projects=projectsRes.data||[];}catch(err){console.error('Failed to load projects:',err);console.error('Error details:',{message:err.message,response:err.response,request:err.request,code:err.code});// Provide more specific error messages\nlet errorMessage='Failed to load projects';if(err.response){var _err$response$data,_err$response$data2;// Server responded with error\nif(err.response.status===401||err.response.status===403){errorMessage='Authentication failed. Please log in again.';// Clear invalid token\nlocalStorage.removeItem('token');localStorage.removeItem('role');// Redirect to login\nwindow.location.href='/login';return;}errorMessage=((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||((_err$response$data2=err.response.data)===null||_err$response$data2===void 0?void 0:_err$response$data2.error)||\"Server error: \".concat(err.response.status);}else if(err.request){// Request made but no response (network error, CORS, etc.)\nerrorMessage=\"Network Error: Cannot connect to backend server. Please check: 1) Backend is running on http://localhost:8000, 2) CORS is configured correctly, 3) You are logged in with a valid token.\";}else{// Error setting up request\nerrorMessage=err.message||'Unknown error';}throw new Error(errorMessage);}// Load applications\nlet applications=[];try{const applicationsRes=await api.get('/api/applications/');applications=applicationsRes.data||[];}catch(err){console.error('Failed to load applications:',err);// Don't fail completely if applications fail, just log it\nconsole.warn('Applications failed to load, continuing without them');}// Load private equity opportunities (optional)\nlet opportunities=[];try{const peRes=await api.get('/api/private-equity/opportunities/');opportunities=peRes.data||[];}catch(err){console.warn('Failed to load private equity opportunities:',err);// Don't fail completely if PE fails, just continue with 0\n}// Load recent messages and unread count (optional)\nlet messages=[];let unread=0;try{var _messagesRes$data,_unreadRes$data;const messagesRes=await api.get('/api/messaging/messages/');// Handle paginated or non-paginated responses\nconst allMessages=((_messagesRes$data=messagesRes.data)===null||_messagesRes$data===void 0?void 0:_messagesRes$data.results)||messagesRes.data||[];messages=allMessages.slice(0,5);// Get first 5\nconst unreadRes=await api.get('/api/messaging/messages/unread_count/');unread=((_unreadRes$data=unreadRes.data)===null||_unreadRes$data===void 0?void 0:_unreadRes$data.unread_count)||0;}catch(err){console.warn('Failed to load messages:',err);// Don't fail completely if messages fail\n}const pendingProjects=projects.filter(p=>p.status==='pending_review'||p.status==='draft').length;const approvedProjects=projects.filter(p=>p.status==='approved').length;let totalMatches=0;for(const project of projects.filter(p=>p.status==='approved')){try{const matchesRes=await api.get(\"/api/projects/\".concat(project.id,\"/matched-products/\"));totalMatches+=(matchesRes.data||[]).length;}catch(e){// Continue if matches fail for a specific project\nconsole.warn(\"Failed to load matches for project \".concat(project.id,\":\"),e);}}const pendingApplications=applications.filter(a=>a.status==='pending'||a.status==='under_review').length;// Load saved products (favourites)\nlet savedProducts=[];let savedCount=0;try{var _favouritesRes$data;const favouritesRes=await api.get('/api/products/favourites/');savedProducts=((_favouritesRes$data=favouritesRes.data)===null||_favouritesRes$data===void 0?void 0:_favouritesRes$data.results)||favouritesRes.data||[];savedCount=savedProducts.length;}catch(err){console.warn('Failed to load saved products:',err);// Continue without saved products\n}setStats({totalProjects:projects.length,pendingProjects,approvedProjects,totalMatches,totalApplications:applications.length,pendingApplications,privateEquityOpportunities:opportunities.length,savedProducts:savedCount});setRecentProjects(projects.slice(0,5));setRecentApplications(applications.slice(0,5));setRecentMessages(messages.slice(0,5));setRecentSavedProducts(savedProducts.slice(0,5));setSavedProductsCount(savedCount);setUnreadCount(unread);}catch(err){var _err$response,_err$response$data3,_err$response2,_err$response2$data;console.error('Dashboard load error:',err);const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data3=_err$response.data)===null||_err$response$data3===void 0?void 0:_err$response$data3.detail)||((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message||'Failed to load dashboard data';setError(\"Failed to load dashboard data: \".concat(errorMsg));}finally{setLoading(false);}}const getStatusBadge=status=>{const statusMap={approved:{variant:'success',label:'Approved'},pending_review:{variant:'warning',label:'Pending'},draft:{variant:'info',label:'Draft'},accepted:{variant:'success',label:'Accepted'},pending:{variant:'warning',label:'Pending'},under_review:{variant:'info',label:'Under Review'},declined:{variant:'error',label:'Declined'}};const statusInfo=statusMap[status]||{variant:'info',label:status};return/*#__PURE__*/_jsx(Badge,{variant:statusInfo.variant,children:statusInfo.label});};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.container),{},{textAlign:'center',padding:theme.spacing['3xl']}),children:/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary},children:\"Loading dashboard...\"})});}return/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.xl},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:theme.typography.fontSize['4xl'],fontWeight:theme.typography.fontWeight.bold,color:theme.colors.textPrimary,margin:\"0 0 \".concat(theme.spacing.sm,\" 0\")},children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.base,margin:0},children:\"Overview of your projects, matches, and applications\"})]}),onboardingProgress&&!onboardingProgress.is_complete&&onboardingProgress.completion_percentage<100&&/*#__PURE__*/_jsxs(\"div\",{style:{background:theme.colors.warningLight,color:theme.colors.warningDark,padding:theme.spacing.md,borderRadius:theme.borderRadius.md,marginBottom:theme.spacing.lg,border:\"1px solid \".concat(theme.colors.warning),display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Complete Your Profile\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:theme.typography.fontSize.sm,marginTop:theme.spacing.xs},children:[onboardingProgress.completion_percentage,\"% complete. \",100-onboardingProgress.completion_percentage,\"% remaining.\"]})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:onStartOnboarding,children:\"Continue Setup\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{background:theme.colors.errorLight,color:theme.colors.errorDark,padding:theme.spacing.md,borderRadius:theme.borderRadius.md,marginBottom:theme.spacing.lg,border:\"1px solid \".concat(theme.colors.error)},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:theme.spacing.lg,marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Projects\",value:stats.totalProjects,icon:\"\\uD83C\\uDFD7\\uFE0F\",color:\"primary\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Pending Review\",value:stats.pendingProjects,icon:\"\\u23F3\",color:\"warning\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Approved\",value:stats.approvedProjects,icon:\"\\u2705\",color:\"success\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Matched Products\",value:stats.totalMatches,icon:\"\\uD83D\\uDD0D\",color:\"info\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Saved Products\",value:stats.savedProducts||0,icon:\"\\u2B50\",color:\"warning\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Applications\",value:stats.totalApplications,icon:\"\\uD83D\\uDCDD\",color:\"secondary\"}),/*#__PURE__*/_jsx(StatCard,{title:\"PE Opportunities\",value:stats.privateEquityOpportunities,icon:\"\\uD83D\\uDCBC\",color:\"accent\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Unread Messages\",value:unreadCount,icon:\"\\uD83D\\uDCAC\",color:unreadCount>0?\"warning\":\"info\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.semibold,margin:\"0 0 \".concat(theme.spacing.lg,\" 0\"),color:theme.colors.textPrimary},children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:theme.spacing.md,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Link,{to:\"/borrower/projects/new\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"lg\",children:\"+ Create New Project\"})}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/private-equity\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"lg\",children:\"+ Create PE Opportunity\"})}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/matches\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"lg\",children:\"View Matched Products\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:theme.spacing.lg},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.semibold,margin:0,color:theme.colors.textPrimary},children:\"Recent Projects\"}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/projects\",style:{color:theme.colors.primary,textDecoration:'none',fontWeight:theme.typography.fontWeight.medium},children:\"View All \\u2192\"})]}),recentProjects.length===0?/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:[/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,margin:\"0 0 \".concat(theme.spacing.md,\" 0\")},children:\"No projects yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/projects/new\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Create your first project\"})})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(300px, 1fr))',gap:theme.spacing.lg},children:recentProjects.map(project=>/*#__PURE__*/_jsx(Link,{to:\"/borrower/projects/\".concat(project.id),style:{textDecoration:'none'},children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},commonStyles.card),commonStyles.cardHover),{},{cursor:'pointer'}),children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:\"0 0 \".concat(theme.spacing.sm,\" 0\"),fontSize:theme.typography.fontSize.lg,fontWeight:theme.typography.fontWeight.semibold,color:theme.colors.textPrimary},children:[project.description||project.address||\"Project #\".concat(project.id),project.project_reference&&/*#__PURE__*/_jsx(Badge,{variant:\"info\",style:{marginLeft:theme.spacing.sm},children:project.project_reference})]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",project.address,\", \",project.town]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Loan Amount:\"}),\" \\xA3\",parseFloat(project.loan_amount_required||0).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:theme.spacing.md,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[getStatusBadge(project.status||'draft'),/*#__PURE__*/_jsx(\"span\",{style:{color:theme.colors.primary,fontSize:theme.typography.fontSize.sm,fontWeight:theme.typography.fontWeight.medium},children:\"View Details \\u2192\"})]})]})},project.id))})]}),recentSavedProducts.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:theme.spacing.lg},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.semibold,margin:0,color:theme.colors.textPrimary},children:\"Recent Saved Products\"}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/matches\",style:{color:theme.colors.primary,textDecoration:'none',fontWeight:theme.typography.fontWeight.medium},children:\"View All \\u2192\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(300px, 1fr))',gap:theme.spacing.lg},children:recentSavedProducts.map(fav=>{var _fav$product,_fav$product2,_fav$product2$lender_,_fav$product3,_fav$project,_fav$project2,_fav$project3;return/*#__PURE__*/_jsxs(\"div\",{style:commonStyles.card,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start',marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:theme.typography.fontSize.lg,fontWeight:theme.typography.fontWeight.semibold},children:((_fav$product=fav.product)===null||_fav$product===void 0?void 0:_fav$product.name)||'Product'}),/*#__PURE__*/_jsx(Badge,{variant:\"warning\",children:\"\\u2B50 Saved\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing.md},children:[/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lender:\"}),\" \",((_fav$product2=fav.product)===null||_fav$product2===void 0?void 0:(_fav$product2$lender_=_fav$product2.lender_details)===null||_fav$product2$lender_===void 0?void 0:_fav$product2$lender_.organisation_name)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Funding Type:\"}),\" \",((_fav$product3=fav.product)===null||_fav$product3===void 0?void 0:_fav$product3.funding_type)||'N/A']}),fav.project&&/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"\".concat(theme.spacing.xs,\" 0\"),color:theme.colors.textSecondary,fontSize:theme.typography.fontSize.sm},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"For Project:\"}),\" \",((_fav$project=fav.project)===null||_fav$project===void 0?void 0:_fav$project.description)||((_fav$project2=fav.project)===null||_fav$project2===void 0?void 0:_fav$project2.address)||\"Project #\".concat((_fav$project3=fav.project)===null||_fav$project3===void 0?void 0:_fav$project3.id)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:theme.spacing.xs},children:[fav.product&&/*#__PURE__*/_jsx(Link,{to:\"/borrower/products/\".concat(fav.product.id).concat(fav.project?\"?project_id=\".concat(fav.project.id):''),style:{textDecoration:'none',flex:1},children:/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",style:{width:'100%'},children:\"View Details\"})}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/matches\",style:{textDecoration:'none',flex:1},children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",style:{width:'100%'},children:\"View All Saved\"})})]})]},fav.id);})})]}),recentApplications.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:theme.spacing.lg},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.semibold,margin:0,color:theme.colors.textPrimary},children:\"Recent Applications\"}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/applications\",style:{color:theme.colors.primary,textDecoration:'none',fontWeight:theme.typography.fontWeight.medium},children:\"View All \\u2192\"})]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{padding:0,overflow:'hidden'}),children:/*#__PURE__*/_jsxs(\"table\",{style:commonStyles.table,children:[/*#__PURE__*/_jsx(\"thead\",{style:commonStyles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Project\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Lender\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Loan Amount\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Interest Rate\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recentApplications.map(app=>{var _app$project_details,_app$lender_details;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid \".concat(theme.colors.gray200),cursor:'pointer'},onClick:()=>window.location.href=\"/borrower/applications/\".concat(app.id),onMouseEnter:e=>{e.currentTarget.style.background=theme.colors.gray50;},onMouseLeave:e=>{e.currentTarget.style.background='transparent';},children:[/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:((_app$project_details=app.project_details)===null||_app$project_details===void 0?void 0:_app$project_details.address)||app.project||\"Project #\".concat(app.project)}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:((_app$lender_details=app.lender_details)===null||_app$lender_details===void 0?void 0:_app$lender_details.organisation_name)||app.lender||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[\"\\xA3\",parseFloat(app.proposed_loan_amount||0).toLocaleString()]}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:app.proposed_interest_rate?\"\".concat(app.proposed_interest_rate,\"%\"):'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:getStatusBadge(app.status)})]},app.id);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:theme.spacing['2xl']},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:theme.spacing.lg},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:theme.typography.fontSize['2xl'],fontWeight:theme.typography.fontWeight.semibold,margin:0,color:theme.colors.textPrimary},children:[\"Recent Messages \",unreadCount>0&&/*#__PURE__*/_jsxs(Badge,{variant:\"warning\",style:{marginLeft:theme.spacing.sm},children:[unreadCount,\" unread\"]})]}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/messages\",style:{color:theme.colors.primary,textDecoration:'none',fontWeight:theme.typography.fontWeight.medium},children:\"View All \\u2192\"})]}),recentMessages.length===0?/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{textAlign:'center',padding:theme.spacing['2xl']}),children:[/*#__PURE__*/_jsx(\"p\",{style:{color:theme.colors.textSecondary,margin:\"0 0 \".concat(theme.spacing.md,\" 0\")},children:\"No messages yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/borrower/messages\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Go to Messages\"})})]}):/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},commonStyles.card),{},{padding:0,overflow:'hidden'}),children:/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:commonStyles.table,children:[/*#__PURE__*/_jsx(\"thead\",{style:commonStyles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"From/To\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Project Ref\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Application\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:commonStyles.tableCell,children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recentMessages.map(message=>{const isSent=message.sender_username===localStorage.getItem('username');const otherParty=isSent?message.recipient_username:message.sender_username;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid \".concat(theme.colors.gray200),cursor:'pointer',background:!message.is_read&&!isSent?theme.colors.primaryLight:'transparent'},onClick:()=>window.location.href=\"/borrower/messages?application_id=\".concat(message.application),onMouseEnter:e=>{if(message.is_read||isSent){e.currentTarget.style.background=theme.colors.gray50;}},onMouseLeave:e=>{if(message.is_read||isSent){e.currentTarget.style.background='transparent';}else{e.currentTarget.style.background=theme.colors.primaryLight;}},children:[/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[isSent?'To: ':'From: ',otherParty]}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[message.subject||'(No subject)',!message.is_read&&!isSent&&/*#__PURE__*/_jsx(Badge,{variant:\"warning\",style:{marginLeft:theme.spacing.xs},children:\"New\"})]}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:message.project_reference?/*#__PURE__*/_jsx(Badge,{variant:\"info\",children:message.project_reference}):'N/A'}),/*#__PURE__*/_jsxs(\"td\",{style:commonStyles.tableCell,children:[\"Application #\",message.application]}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},commonStyles.tableCell),{},{fontSize:theme.typography.fontSize.sm,color:theme.colors.textSecondary}),children:new Date(message.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{style:commonStyles.tableCell,children:message.is_read?/*#__PURE__*/_jsx(Badge,{variant:\"info\",children:\"Read\"}):isSent?/*#__PURE__*/_jsx(Badge,{variant:\"info\",children:\"Sent\"}):/*#__PURE__*/_jsx(Badge,{variant:\"warning\",children:\"Unread\"})})]},message.id);})})]})})})]})]});}export default BorrowerDashboard;","map":{"version":3,"names":["React","useEffect","useState","Link","api","theme","commonStyles","StatCard","Button","Badge","jsx","_jsx","jsxs","_jsxs","BorrowerDashboard","_ref","onboardingProgress","onStartOnboarding","stats","setStats","totalProjects","pendingProjects","approvedProjects","totalMatches","totalApplications","pendingApplications","privateEquityOpportunities","recentProjects","setRecentProjects","recentApplications","setRecentApplications","recentMessages","setRecentMessages","recentSavedProducts","setRecentSavedProducts","savedProductsCount","setSavedProductsCount","unreadCount","setUnreadCount","loading","setLoading","error","setError","loadDashboardData","projects","projectsRes","get","data","err","console","message","response","request","code","errorMessage","_err$response$data","_err$response$data2","status","localStorage","removeItem","window","location","href","detail","concat","Error","applications","applicationsRes","warn","opportunities","peRes","messages","unread","_messagesRes$data","_unreadRes$data","messagesRes","allMessages","results","slice","unreadRes","unread_count","filter","p","length","project","matchesRes","id","e","a","savedProducts","savedCount","_favouritesRes$data","favouritesRes","_err$response","_err$response$data3","_err$response2","_err$response2$data","errorMsg","getStatusBadge","statusMap","approved","variant","label","pending_review","draft","accepted","pending","under_review","declined","statusInfo","children","style","_objectSpread","container","textAlign","padding","spacing","color","colors","textSecondary","marginBottom","xl","fontSize","typography","fontWeight","bold","textPrimary","margin","sm","base","is_complete","completion_percentage","background","warningLight","warningDark","md","borderRadius","lg","border","warning","display","justifyContent","alignItems","marginTop","xs","size","onClick","errorLight","errorDark","gridTemplateColumns","gap","title","value","icon","semibold","flexWrap","to","textDecoration","primary","medium","card","map","cardHover","cursor","description","address","project_reference","marginLeft","town","parseFloat","loan_amount_required","toLocaleString","fav","_fav$product","_fav$product2","_fav$product2$lender_","_fav$product3","_fav$project","_fav$project2","_fav$project3","product","name","lender_details","organisation_name","funding_type","flex","width","overflow","table","tableHeader","tableCell","app","_app$project_details","_app$lender_details","borderBottom","gray200","onMouseEnter","currentTarget","gray50","onMouseLeave","project_details","lender","proposed_loan_amount","proposed_interest_rate","overflowX","isSent","sender_username","getItem","otherParty","recipient_username","is_read","primaryLight","application","subject","Date","created_at","toLocaleDateString"],"sources":["C:/Users/paul-/OneDrive - BARE Capital Ltd/BARE Drive/10.0 BUILDFUND/1.0 Website Dev/GitHub/new_website/src/pages/BorrowerDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { theme, commonStyles } from '../styles/theme';\r\nimport StatCard from '../components/StatCard';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\n\r\nfunction BorrowerDashboard({ onboardingProgress, onStartOnboarding }) {\r\n  const [stats, setStats] = useState({\r\n    totalProjects: 0,\r\n    pendingProjects: 0,\r\n    approvedProjects: 0,\r\n    totalMatches: 0,\r\n    totalApplications: 0,\r\n    pendingApplications: 0,\r\n    privateEquityOpportunities: 0,\r\n  });\r\n  const [recentProjects, setRecentProjects] = useState([]);\r\n  const [recentApplications, setRecentApplications] = useState([]);\r\n  const [recentMessages, setRecentMessages] = useState([]);\r\n  const [recentSavedProducts, setRecentSavedProducts] = useState([]);\r\n  const [savedProductsCount, setSavedProductsCount] = useState(0);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n  }, []);\r\n\r\n  async function loadDashboardData() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      // Load projects\r\n      let projects = [];\r\n      try {\r\n        const projectsRes = await api.get('/api/projects/');\r\n        projects = projectsRes.data || [];\r\n      } catch (err) {\r\n        console.error('Failed to load projects:', err);\r\n        console.error('Error details:', {\r\n          message: err.message,\r\n          response: err.response,\r\n          request: err.request,\r\n          code: err.code,\r\n        });\r\n        \r\n        // Provide more specific error messages\r\n        let errorMessage = 'Failed to load projects';\r\n        if (err.response) {\r\n          // Server responded with error\r\n          if (err.response.status === 401 || err.response.status === 403) {\r\n            errorMessage = 'Authentication failed. Please log in again.';\r\n            // Clear invalid token\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('role');\r\n            // Redirect to login\r\n            window.location.href = '/login';\r\n            return;\r\n          }\r\n          errorMessage = err.response.data?.detail || \r\n                        err.response.data?.error || \r\n                        `Server error: ${err.response.status}`;\r\n        } else if (err.request) {\r\n          // Request made but no response (network error, CORS, etc.)\r\n          errorMessage = `Network Error: Cannot connect to backend server. Please check: 1) Backend is running on http://localhost:8000, 2) CORS is configured correctly, 3) You are logged in with a valid token.`;\r\n        } else {\r\n          // Error setting up request\r\n          errorMessage = err.message || 'Unknown error';\r\n        }\r\n        throw new Error(errorMessage);\r\n      }\r\n      \r\n      // Load applications\r\n      let applications = [];\r\n      try {\r\n        const applicationsRes = await api.get('/api/applications/');\r\n        applications = applicationsRes.data || [];\r\n      } catch (err) {\r\n        console.error('Failed to load applications:', err);\r\n        // Don't fail completely if applications fail, just log it\r\n        console.warn('Applications failed to load, continuing without them');\r\n      }\r\n      \r\n      // Load private equity opportunities (optional)\r\n      let opportunities = [];\r\n      try {\r\n        const peRes = await api.get('/api/private-equity/opportunities/');\r\n        opportunities = peRes.data || [];\r\n      } catch (err) {\r\n        console.warn('Failed to load private equity opportunities:', err);\r\n        // Don't fail completely if PE fails, just continue with 0\r\n      }\r\n\r\n      // Load recent messages and unread count (optional)\r\n      let messages = [];\r\n      let unread = 0;\r\n      try {\r\n        const messagesRes = await api.get('/api/messaging/messages/');\r\n        // Handle paginated or non-paginated responses\r\n        const allMessages = messagesRes.data?.results || messagesRes.data || [];\r\n        messages = allMessages.slice(0, 5); // Get first 5\r\n        const unreadRes = await api.get('/api/messaging/messages/unread_count/');\r\n        unread = unreadRes.data?.unread_count || 0;\r\n      } catch (err) {\r\n        console.warn('Failed to load messages:', err);\r\n        // Don't fail completely if messages fail\r\n      }\r\n\r\n      const pendingProjects = projects.filter(p => p.status === 'pending_review' || p.status === 'draft').length;\r\n      const approvedProjects = projects.filter(p => p.status === 'approved').length;\r\n      \r\n      let totalMatches = 0;\r\n      for (const project of projects.filter(p => p.status === 'approved')) {\r\n        try {\r\n          const matchesRes = await api.get(`/api/projects/${project.id}/matched-products/`);\r\n          totalMatches += (matchesRes.data || []).length;\r\n        } catch (e) {\r\n          // Continue if matches fail for a specific project\r\n          console.warn(`Failed to load matches for project ${project.id}:`, e);\r\n        }\r\n      }\r\n\r\n      const pendingApplications = applications.filter(a => a.status === 'pending' || a.status === 'under_review').length;\r\n\r\n      // Load saved products (favourites)\r\n      let savedProducts = [];\r\n      let savedCount = 0;\r\n      try {\r\n        const favouritesRes = await api.get('/api/products/favourites/');\r\n        savedProducts = favouritesRes.data?.results || favouritesRes.data || [];\r\n        savedCount = savedProducts.length;\r\n      } catch (err) {\r\n        console.warn('Failed to load saved products:', err);\r\n        // Continue without saved products\r\n      }\r\n\r\n      setStats({\r\n        totalProjects: projects.length,\r\n        pendingProjects,\r\n        approvedProjects,\r\n        totalMatches,\r\n        totalApplications: applications.length,\r\n        pendingApplications,\r\n        privateEquityOpportunities: opportunities.length,\r\n        savedProducts: savedCount,\r\n      });\r\n\r\n      setRecentProjects(projects.slice(0, 5));\r\n      setRecentApplications(applications.slice(0, 5));\r\n      setRecentMessages(messages.slice(0, 5));\r\n      setRecentSavedProducts(savedProducts.slice(0, 5));\r\n      setSavedProductsCount(savedCount);\r\n      setUnreadCount(unread);\r\n\r\n    } catch (err) {\r\n      console.error('Dashboard load error:', err);\r\n      const errorMsg = err.response?.data?.detail || \r\n                      err.response?.data?.error || \r\n                      err.message || \r\n                      'Failed to load dashboard data';\r\n      setError(`Failed to load dashboard data: ${errorMsg}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusMap = {\r\n      approved: { variant: 'success', label: 'Approved' },\r\n      pending_review: { variant: 'warning', label: 'Pending' },\r\n      draft: { variant: 'info', label: 'Draft' },\r\n      accepted: { variant: 'success', label: 'Accepted' },\r\n      pending: { variant: 'warning', label: 'Pending' },\r\n      under_review: { variant: 'info', label: 'Under Review' },\r\n      declined: { variant: 'error', label: 'Declined' },\r\n    };\r\n    const statusInfo = statusMap[status] || { variant: 'info', label: status };\r\n    return <Badge variant={statusInfo.variant}>{statusInfo.label}</Badge>;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ ...commonStyles.container, textAlign: 'center', padding: theme.spacing['3xl'] }}>\r\n        <p style={{ color: theme.colors.textSecondary }}>Loading dashboard...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={commonStyles.container}>\r\n      <div style={{ marginBottom: theme.spacing.xl }}>\r\n        <h1 style={{\r\n          fontSize: theme.typography.fontSize['4xl'],\r\n          fontWeight: theme.typography.fontWeight.bold,\r\n          color: theme.colors.textPrimary,\r\n          margin: `0 0 ${theme.spacing.sm} 0`,\r\n        }}>\r\n          Dashboard\r\n        </h1>\r\n        <p style={{\r\n          color: theme.colors.textSecondary,\r\n          fontSize: theme.typography.fontSize.base,\r\n          margin: 0,\r\n        }}>\r\n          Overview of your projects, matches, and applications\r\n        </p>\r\n      </div>\r\n\r\n      {/* Onboarding Progress Banner */}\r\n      {onboardingProgress && !onboardingProgress.is_complete && onboardingProgress.completion_percentage < 100 && (\r\n        <div style={{\r\n          background: theme.colors.warningLight,\r\n          color: theme.colors.warningDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.warning}`,\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n        }}>\r\n          <div>\r\n            <strong>Complete Your Profile</strong>\r\n            <div style={{ fontSize: theme.typography.fontSize.sm, marginTop: theme.spacing.xs }}>\r\n              {onboardingProgress.completion_percentage}% complete. {100 - onboardingProgress.completion_percentage}% remaining.\r\n            </div>\r\n          </div>\r\n          <Button variant=\"primary\" size=\"sm\" onClick={onStartOnboarding}>\r\n            Continue Setup\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div style={{\r\n          background: theme.colors.errorLight,\r\n          color: theme.colors.errorDark,\r\n          padding: theme.spacing.md,\r\n          borderRadius: theme.borderRadius.md,\r\n          marginBottom: theme.spacing.lg,\r\n          border: `1px solid ${theme.colors.error}`,\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Statistics Cards */}\r\n      <div style={{ \r\n        display: 'grid', \r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', \r\n        gap: theme.spacing.lg, \r\n        marginBottom: theme.spacing['2xl'] \r\n      }}>\r\n        <StatCard title=\"Total Projects\" value={stats.totalProjects} icon=\"üèóÔ∏è\" color=\"primary\" />\r\n        <StatCard title=\"Pending Review\" value={stats.pendingProjects} icon=\"‚è≥\" color=\"warning\" />\r\n        <StatCard title=\"Approved\" value={stats.approvedProjects} icon=\"‚úÖ\" color=\"success\" />\r\n        <StatCard title=\"Matched Products\" value={stats.totalMatches} icon=\"üîç\" color=\"info\" />\r\n        <StatCard title=\"Saved Products\" value={stats.savedProducts || 0} icon=\"‚≠ê\" color=\"warning\" />\r\n        <StatCard title=\"Applications\" value={stats.totalApplications} icon=\"üìù\" color=\"secondary\" />\r\n        <StatCard title=\"PE Opportunities\" value={stats.privateEquityOpportunities} icon=\"üíº\" color=\"accent\" />\r\n        <StatCard title=\"Unread Messages\" value={unreadCount} icon=\"üí¨\" color={unreadCount > 0 ? \"warning\" : \"info\"} />\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div style={{ marginBottom: theme.spacing['2xl'] }}>\r\n        <h2 style={{\r\n          fontSize: theme.typography.fontSize['2xl'],\r\n          fontWeight: theme.typography.fontWeight.semibold,\r\n          margin: `0 0 ${theme.spacing.lg} 0`,\r\n          color: theme.colors.textPrimary,\r\n        }}>\r\n          Quick Actions\r\n        </h2>\r\n        <div style={{ display: 'flex', gap: theme.spacing.md, flexWrap: 'wrap' }}>\r\n          <Link to=\"/borrower/projects/new\" style={{ textDecoration: 'none' }}>\r\n            <Button variant=\"primary\" size=\"lg\">\r\n              + Create New Project\r\n            </Button>\r\n          </Link>\r\n          <Link to=\"/borrower/private-equity\" style={{ textDecoration: 'none' }}>\r\n            <Button variant=\"secondary\" size=\"lg\">\r\n              + Create PE Opportunity\r\n            </Button>\r\n          </Link>\r\n          <Link to=\"/borrower/matches\" style={{ textDecoration: 'none' }}>\r\n            <Button variant=\"outline\" size=\"lg\">\r\n              View Matched Products\r\n            </Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Projects */}\r\n      <div style={{ marginBottom: theme.spacing['2xl'] }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: theme.spacing.lg }}>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: 0,\r\n            color: theme.colors.textPrimary,\r\n          }}>\r\n            Recent Projects\r\n          </h2>\r\n          <Link to=\"/borrower/projects\" style={{ \r\n            color: theme.colors.primary, \r\n            textDecoration: 'none',\r\n            fontWeight: theme.typography.fontWeight.medium,\r\n          }}>\r\n            View All ‚Üí\r\n          </Link>\r\n        </div>\r\n        {recentProjects.length === 0 ? (\r\n          <div style={{\r\n            ...commonStyles.card,\r\n            textAlign: 'center',\r\n            padding: theme.spacing['2xl'],\r\n          }}>\r\n            <p style={{ color: theme.colors.textSecondary, margin: `0 0 ${theme.spacing.md} 0` }}>\r\n              No projects yet.\r\n            </p>\r\n            <Link to=\"/borrower/projects/new\" style={{ textDecoration: 'none' }}>\r\n              <Button variant=\"primary\">Create your first project</Button>\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <div style={{ \r\n            display: 'grid', \r\n            gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', \r\n            gap: theme.spacing.lg \r\n          }}>\r\n            {recentProjects.map((project) => (\r\n              <Link\r\n                key={project.id}\r\n                to={`/borrower/projects/${project.id}`}\r\n                style={{ textDecoration: 'none' }}\r\n              >\r\n                <div \r\n                  style={{\r\n                    ...commonStyles.card,\r\n                    ...commonStyles.cardHover,\r\n                    cursor: 'pointer',\r\n                  }}\r\n                >\r\n                  <h3 style={{ \r\n                    margin: `0 0 ${theme.spacing.sm} 0`, \r\n                    fontSize: theme.typography.fontSize.lg,\r\n                    fontWeight: theme.typography.fontWeight.semibold,\r\n                    color: theme.colors.textPrimary,\r\n                  }}>\r\n                    {project.description || project.address || `Project #${project.id}`}\r\n                    {project.project_reference && (\r\n                      <Badge variant=\"info\" style={{ marginLeft: theme.spacing.sm }}>\r\n                        {project.project_reference}\r\n                      </Badge>\r\n                    )}\r\n                  </h3>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                    <strong>Address:</strong> {project.address}, {project.town}\r\n                  </p>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                    <strong>Loan Amount:</strong> ¬£{parseFloat(project.loan_amount_required || 0).toLocaleString()}\r\n                  </p>\r\n                  <div style={{ marginTop: theme.spacing.md, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    {getStatusBadge(project.status || 'draft')}\r\n                    <span style={{ \r\n                      color: theme.colors.primary, \r\n                      fontSize: theme.typography.fontSize.sm,\r\n                      fontWeight: theme.typography.fontWeight.medium,\r\n                    }}>\r\n                      View Details ‚Üí\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Recent Saved Products */}\r\n      {recentSavedProducts.length > 0 && (\r\n        <div style={{ marginBottom: theme.spacing['2xl'] }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: theme.spacing.lg }}>\r\n            <h2 style={{\r\n              fontSize: theme.typography.fontSize['2xl'],\r\n              fontWeight: theme.typography.fontWeight.semibold,\r\n              margin: 0,\r\n              color: theme.colors.textPrimary,\r\n            }}>\r\n              Recent Saved Products\r\n            </h2>\r\n            <Link to=\"/borrower/matches\" style={{ \r\n              color: theme.colors.primary, \r\n              textDecoration: 'none',\r\n              fontWeight: theme.typography.fontWeight.medium,\r\n            }}>\r\n              View All ‚Üí\r\n            </Link>\r\n          </div>\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n            gap: theme.spacing.lg,\r\n          }}>\r\n            {recentSavedProducts.map((fav) => (\r\n              <div key={fav.id} style={commonStyles.card}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: theme.spacing.md }}>\r\n                  <h3 style={{\r\n                    margin: 0,\r\n                    fontSize: theme.typography.fontSize.lg,\r\n                    fontWeight: theme.typography.fontWeight.semibold,\r\n                  }}>\r\n                    {fav.product?.name || 'Product'}\r\n                  </h3>\r\n                  <Badge variant=\"warning\">‚≠ê Saved</Badge>\r\n                </div>\r\n                <div style={{ marginBottom: theme.spacing.md }}>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                    <strong>Lender:</strong> {fav.product?.lender_details?.organisation_name || 'N/A'}\r\n                  </p>\r\n                  <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                    <strong>Funding Type:</strong> {fav.product?.funding_type || 'N/A'}\r\n                  </p>\r\n                  {fav.project && (\r\n                    <p style={{ margin: `${theme.spacing.xs} 0`, color: theme.colors.textSecondary, fontSize: theme.typography.fontSize.sm }}>\r\n                      <strong>For Project:</strong> {fav.project?.description || fav.project?.address || `Project #${fav.project?.id}`}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div style={{ display: 'flex', gap: theme.spacing.xs }}>\r\n                  {fav.product && (\r\n                    <Link to={`/borrower/products/${fav.product.id}${fav.project ? `?project_id=${fav.project.id}` : ''}`} style={{ textDecoration: 'none', flex: 1 }}>\r\n                      <Button variant=\"outline\" size=\"sm\" style={{ width: '100%' }}>\r\n                        View Details\r\n                      </Button>\r\n                    </Link>\r\n                  )}\r\n                  <Link to=\"/borrower/matches\" style={{ textDecoration: 'none', flex: 1 }}>\r\n                    <Button variant=\"primary\" size=\"sm\" style={{ width: '100%' }}>\r\n                      View All Saved\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Recent Applications */}\r\n      {recentApplications.length > 0 && (\r\n        <div style={{ marginBottom: theme.spacing['2xl'] }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: theme.spacing.lg }}>\r\n            <h2 style={{\r\n              fontSize: theme.typography.fontSize['2xl'],\r\n              fontWeight: theme.typography.fontWeight.semibold,\r\n              margin: 0,\r\n              color: theme.colors.textPrimary,\r\n            }}>\r\n              Recent Applications\r\n            </h2>\r\n            <Link to=\"/borrower/applications\" style={{ \r\n              color: theme.colors.primary, \r\n              textDecoration: 'none',\r\n              fontWeight: theme.typography.fontWeight.medium,\r\n            }}>\r\n              View All ‚Üí\r\n            </Link>\r\n          </div>\r\n          <div style={{ ...commonStyles.card, padding: 0, overflow: 'hidden' }}>\r\n            <table style={commonStyles.table}>\r\n              <thead style={commonStyles.tableHeader}>\r\n                <tr>\r\n                  <th style={commonStyles.tableCell}>Project</th>\r\n                  <th style={commonStyles.tableCell}>Lender</th>\r\n                  <th style={commonStyles.tableCell}>Loan Amount</th>\r\n                  <th style={commonStyles.tableCell}>Interest Rate</th>\r\n                  <th style={commonStyles.tableCell}>Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {recentApplications.map((app) => (\r\n                  <tr \r\n                    key={app.id} \r\n                    style={{ \r\n                      borderBottom: `1px solid ${theme.colors.gray200}`,\r\n                      cursor: 'pointer',\r\n                    }}\r\n                    onClick={() => window.location.href = `/borrower/applications/${app.id}`}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = theme.colors.gray50;\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = 'transparent';\r\n                    }}\r\n                  >\r\n                    <td style={commonStyles.tableCell}>\r\n                      {app.project_details?.address || app.project || `Project #${app.project}`}\r\n                    </td>\r\n                    <td style={commonStyles.tableCell}>\r\n                      {app.lender_details?.organisation_name || app.lender || 'N/A'}\r\n                    </td>\r\n                    <td style={commonStyles.tableCell}>¬£{parseFloat(app.proposed_loan_amount || 0).toLocaleString()}</td>\r\n                    <td style={commonStyles.tableCell}>\r\n                      {app.proposed_interest_rate ? `${app.proposed_interest_rate}%` : 'N/A'}\r\n                    </td>\r\n                    <td style={commonStyles.tableCell}>{getStatusBadge(app.status)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Recent Messages */}\r\n      <div style={{ marginBottom: theme.spacing['2xl'] }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: theme.spacing.lg }}>\r\n          <h2 style={{\r\n            fontSize: theme.typography.fontSize['2xl'],\r\n            fontWeight: theme.typography.fontWeight.semibold,\r\n            margin: 0,\r\n            color: theme.colors.textPrimary,\r\n          }}>\r\n            Recent Messages {unreadCount > 0 && (\r\n              <Badge variant=\"warning\" style={{ marginLeft: theme.spacing.sm }}>\r\n                {unreadCount} unread\r\n              </Badge>\r\n            )}\r\n          </h2>\r\n          <Link to=\"/borrower/messages\" style={{ \r\n            color: theme.colors.primary, \r\n            textDecoration: 'none',\r\n            fontWeight: theme.typography.fontWeight.medium,\r\n          }}>\r\n            View All ‚Üí\r\n          </Link>\r\n        </div>\r\n        {recentMessages.length === 0 ? (\r\n          <div style={{\r\n            ...commonStyles.card,\r\n            textAlign: 'center',\r\n            padding: theme.spacing['2xl'],\r\n          }}>\r\n            <p style={{ color: theme.colors.textSecondary, margin: `0 0 ${theme.spacing.md} 0` }}>\r\n              No messages yet.\r\n            </p>\r\n            <Link to=\"/borrower/messages\" style={{ textDecoration: 'none' }}>\r\n              <Button variant=\"primary\">Go to Messages</Button>\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <div style={{ ...commonStyles.card, padding: 0, overflow: 'hidden' }}>\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={commonStyles.table}>\r\n                <thead style={commonStyles.tableHeader}>\r\n                  <tr>\r\n                    <th style={commonStyles.tableCell}>From/To</th>\r\n                    <th style={commonStyles.tableCell}>Subject</th>\r\n                    <th style={commonStyles.tableCell}>Project Ref</th>\r\n                    <th style={commonStyles.tableCell}>Application</th>\r\n                    <th style={commonStyles.tableCell}>Date</th>\r\n                    <th style={commonStyles.tableCell}>Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {recentMessages.map((message) => {\r\n                    const isSent = message.sender_username === localStorage.getItem('username');\r\n                    const otherParty = isSent ? message.recipient_username : message.sender_username;\r\n                    return (\r\n                      <tr \r\n                        key={message.id} \r\n                        style={{ \r\n                          borderBottom: `1px solid ${theme.colors.gray200}`,\r\n                          cursor: 'pointer',\r\n                          background: !message.is_read && !isSent ? theme.colors.primaryLight : 'transparent',\r\n                        }}\r\n                        onClick={() => window.location.href = `/borrower/messages?application_id=${message.application}`}\r\n                        onMouseEnter={(e) => {\r\n                          if (message.is_read || isSent) {\r\n                            e.currentTarget.style.background = theme.colors.gray50;\r\n                          }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          if (message.is_read || isSent) {\r\n                            e.currentTarget.style.background = 'transparent';\r\n                          } else {\r\n                            e.currentTarget.style.background = theme.colors.primaryLight;\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={commonStyles.tableCell}>\r\n                          {isSent ? 'To: ' : 'From: '}{otherParty}\r\n                        </td>\r\n                        <td style={commonStyles.tableCell}>\r\n                          {message.subject || '(No subject)'}\r\n                          {!message.is_read && !isSent && (\r\n                            <Badge variant=\"warning\" style={{ marginLeft: theme.spacing.xs }}>New</Badge>\r\n                          )}\r\n                        </td>\r\n                        <td style={commonStyles.tableCell}>\r\n                          {message.project_reference ? (\r\n                            <Badge variant=\"info\">{message.project_reference}</Badge>\r\n                          ) : (\r\n                            'N/A'\r\n                          )}\r\n                        </td>\r\n                        <td style={commonStyles.tableCell}>\r\n                          Application #{message.application}\r\n                        </td>\r\n                        <td style={{ ...commonStyles.tableCell, fontSize: theme.typography.fontSize.sm, color: theme.colors.textSecondary }}>\r\n                          {new Date(message.created_at).toLocaleDateString()}\r\n                        </td>\r\n                        <td style={commonStyles.tableCell}>\r\n                          {message.is_read ? (\r\n                            <Badge variant=\"info\">Read</Badge>\r\n                          ) : isSent ? (\r\n                            <Badge variant=\"info\">Sent</Badge>\r\n                          ) : (\r\n                            <Badge variant=\"warning\">Unread</Badge>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BorrowerDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}